!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=8)}([function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(4),s=r(5),a=r(22),u=r(7),c=r(1),l=r(6),f=function(t){function e(r,n,i){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=s.empty;break;case 1:if(!r){o.destination=s.empty;break}if("object"==typeof r){r instanceof e?(o.syncErrorThrowable=r.syncErrorThrowable,o.destination=r,r.add(o)):(o.syncErrorThrowable=!0,o.destination=new h(o,r));break}default:o.syncErrorThrowable=!0,o.destination=new h(o,r,n,i)}return o}return i(e,t),e.prototype[u.rxSubscriber]=function(){return this},e.create=function(t,r,n){var i=new e(t,r,n);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(a.Subscription);e.Subscriber=f;var h=function(t){function e(e,r,n,i){var a,u=t.call(this)||this;u._parentSubscriber=e;var c=u;return o.isFunction(r)?a=r:r&&(a=r.next,n=r.error,i=r.complete,r!==s.empty&&(c=Object.create(r),o.isFunction(c.unsubscribe)&&u.add(c.unsubscribe.bind(c)),c.unsubscribe=u.unsubscribe.bind(u))),u._context=c,u._next=a,u._error=n,u._complete=i,u}return i(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;c.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,r=c.config.useDeprecatedSynchronousErrorHandling;if(this._error)r&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)r?(e.syncErrorValue=t,e.syncErrorThrown=!0):l.hostReportError(t),this.unsubscribe();else{if(this.unsubscribe(),r)throw t;l.hostReportError(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};c.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),c.config.useDeprecatedSynchronousErrorHandling)throw t;l.hostReportError(t)}},e.prototype.__tryOrSetError=function(t,e,r){if(!c.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,r)}catch(e){return c.config.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(l.hostReportError(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(f);e.SafeSubscriber=h},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=!1;e.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else n&&console.log("RxJS: Back to a better error behavior. Thank you. <3");n=t},get useDeprecatedSynchronousErrorHandling(){return n}}},function(t,e,r){"use strict";function n(t){return'<svg xmlns="http://www.w3.org/2000/svg" fit="" height="100%" width="100%" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" focusable="false">\n            <g id="slider'+t+'">'+{histo:'<path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"></path>',lock:'<path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"></path>',lockOpen:'<path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"></path>',loop:'<path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"></path>',next:'<path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"></path>',previous:'<path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"></path>',play:'<path d="M8 5v14l11-7z"></path>',pause:'<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path>',refresh:'<path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"></path>',show:'<path d="M 11.9994,8.99813C 10.3424,8.99813 8.99941,10.3411 8.99941,11.9981C 8.99941,13.6551 10.3424,14.9981 11.9994,14.9981C 13.6564,14.9981 14.9994,13.6551 14.9994,11.9981C 14.9994,10.3411 13.6564,8.99813 11.9994,8.99813 Z M 11.9994,16.9981C 9.23841,16.9981 6.99941,14.7591 6.99941,11.9981C 6.99941,9.23714 9.23841,6.99813 11.9994,6.99813C 14.7604,6.99813 16.9994,9.23714 16.9994,11.9981C 16.9994,14.7591 14.7604,16.9981 11.9994,16.9981 Z M 11.9994,4.49813C 6.99741,4.49813 2.72741,7.60915 0.99941,11.9981C 2.72741,16.3871 6.99741,19.4981 11.9994,19.4981C 17.0024,19.4981 21.2714,16.3871 22.9994,11.9981C 21.2714,7.60915 17.0024,4.49813 11.9994,4.49813 Z "></path>',hide:'<path d="M 11.8344,9.01477L 14.9824,12.1627C 14.9854,12.1068 14.9994,12.0547 14.9994,11.9977C 14.9994,10.3408 13.6564,8.99774 11.9994,8.99774C 11.9424,8.99774 11.8904,9.01172 11.8344,9.01477 Z M 7.52838,9.80072L 9.07538,11.3467C 9.02838,11.5568 8.99939,11.7737 8.99939,11.9977C 8.99939,13.6547 10.3424,14.9977 11.9994,14.9977C 12.2244,14.9977 12.4414,14.9688 12.6504,14.9227L 14.1974,16.4688C 13.5314,16.7968 12.7914,16.9977 11.9994,16.9977C 9.2384,16.9977 6.99939,14.7598 6.99939,11.9977C 6.99939,11.2057 7.20038,10.4667 7.52838,9.80072 Z M 1.99939,4.27075L 4.27838,6.55072L 4.7334,7.00574C 3.0834,8.29773 1.7804,10.0157 0.99939,11.9977C 2.72739,16.3867 6.99738,19.4977 11.9994,19.4977C 13.5494,19.4977 15.0284,19.1978 16.3834,18.6558L 16.8074,19.0787L 19.7264,21.9987L 20.9994,20.7258L 3.2724,2.99872M 11.9994,6.99774C 14.7604,6.99774 16.9994,9.23676 16.9994,11.9977C 16.9994,12.6437 16.8674,13.2568 16.6444,13.8237L 19.5664,16.7457C 21.0744,15.4847 22.2674,13.8577 22.9994,11.9977C 21.2714,7.60876 17.0024,4.49774 11.9994,4.49774C 10.5994,4.49774 9.26038,4.74872 8.01538,5.19574L 10.1734,7.35376C 10.7404,7.13074 11.3534,6.99774 11.9994,6.99774 Z "></path>'}[t]+"</g></svg>"}Object.defineProperty(e,"__esModule",{value:!0}),e.SLIDER_TEMPLATE='\n<div rv-focus-member class="rv-rangeslider">\n    <div class="slider-content">\n        <div class="slider-bar">\n            <div><div id="nouislider" class="slider-widget"></div><span class="slider-units"></span></div>\n            <div class="slider-controls"></div>\n        </div>\n        <div class="slider-desc">\n            <span class="slider-desc-layers"></span>\n            <span class="slider-desc-info"></span>\n        </div>\n    </div>\n</div>',e.DESC_BAR_TEMPLATE='\n<div class="slider-bar-control slider-desc-control" ng-controller="DescSliderCtrl as ctrl">\n    <md-button\n        aria-label="{{ !ctrl.isShow ? \'plugins.rangeSlider.bar.show\' : \'plugins.rangeSlider.bar.hide\' | translate }}"\n        class="md-icon-button primary"\n        ng-click="ctrl.show()">\n        <md-tooltip>{{ !ctrl.isShow ? \'plugins.rangeSlider.bar.show\' : \'plugins.rangeSlider.bar.hide\' | translate }}</md-tooltip>\n        <md-icon ng-if="ctrl.isShow">'+n("hide")+'</md-icon>\n        <md-icon ng-if="!ctrl.isShow">'+n("show")+"</md-icon>\n    </md-button>\n</div>",e.LOCK_BAR_TEMPLATE='\n<div class="slider-bar-control slider-lock-control" ng-controller="LockSliderCtrl as ctrl">\n    <md-button\n        aria-label="{{ !ctrl.isLocked ? \'plugins.rangeSlider.bar.lock\' : \'plugins.rangeSlider.bar.unlock\' | translate }}"\n        class="md-icon-button primary"\n        ng-click="ctrl.lock()">\n        <md-tooltip>{{ !ctrl.isLocked ? \'plugins.rangeSlider.bar.lock\' : \'plugins.rangeSlider.bar.unlock\' | translate }}</md-tooltip>\n        <md-icon ng-if="ctrl.isLocked">'+n("lock")+'</md-icon>\n        <md-icon ng-if="!ctrl.isLocked">'+n("lockOpen")+"</md-icon>\n    </md-button>\n</div>",e.LOOP_BAR_TEMPLATE='\n<div class="slider-bar-control slider-loop-control" ng-controller="LoopSliderCtrl as ctrl">\n    <md-button\n        aria-label="{{ !ctrl.isLooped ? \'plugins.rangeSlider.bar.loop\' : \'plugins.rangeSlider.bar.unloop\' | translate }}"\n        class="md-icon-button primary"\n        ng-click="ctrl.loop()">\n        <md-tooltip>{{ !ctrl.isLooped ? \'plugins.rangeSlider.bar.loop\' : \'plugins.rangeSlider.bar.unloop\' | translate }}</md-tooltip>\n        <md-icon>'+n("loop")+"</md-icon>\n    </md-button>\n</div>",e.PLAY_BAR_TEMPLATE='\n<div class="slider-bar-control slider-play-control">\n    <md-button\n        ng-controller="StepSliderCtrl as ctrl"\n        aria-label="{{ \'plugins.rangeSlider.bar.previous\' | translate }}"\n        class="md-icon-button primary"\n        ng-click="ctrl.step(\'down\')">\n        <md-tooltip>{{ \'plugins.rangeSlider.bar.previous\' | translate }}</md-tooltip>\n        <md-icon>'+n("previous")+'</md-icon>\n    </md-button>\n    <div ng-controller="PlaySliderCtrl as ctrl">\n        <md-button\n            aria-label="{{ ctrl.isPlaying ? \'plugins.rangeSlider.bar.pause\' : \'plugins.rangeSlider.bar.play\' | translate }}"\n            class="md-icon-button primary"\n            ng-click="ctrl.play()">\n            <md-tooltip>{{ ctrl.isPlaying ? \'plugins.rangeSlider.bar.pause\' : \'plugins.rangeSlider.bar.play\' | translate }}</md-tooltip>\n            <md-icon ng-if="ctrl.isPlaying">'+n("pause")+'</md-icon>\n            <md-icon ng-if="!ctrl.isPlaying">'+n("play")+'</md-icon>\n        </md-button>\n    </div>\n    <md-button\n        ng-controller="StepSliderCtrl as ctrl"\n        aria-label="{{ \'plugins.rangeSlider.bar.foward\' | translate }}"\n        class="md-icon-button primary"\n        ng-click="ctrl.step(\'up\')">\n        <md-tooltip>{{ \'plugins.rangeSlider.bar.foward\' | translate }}</md-tooltip>\n        <md-icon>'+n("next")+"</md-icon>\n    </md-button>\n</div>",e.REFRESH_BAR_TEMPLATE='\n<div class="slider-bar-control slider-refresh-control">\n    <md-button\n        ng-controller="RefreshSliderCtrl as ctrl"\n        aria-label="{{ \'plugins.rangeSlider.bar.refresh\' | translate }}"\n        class="md-icon-button primary rv-slider-refresh"\n        ng-click="ctrl.refresh()">\n        <md-tooltip>{{ \'plugins.rangeSlider.bar.refresh\' | translate }}</md-tooltip>\n        <md-icon>'+n("refresh")+"</md-icon>\n    </md-button>\n</div>",e.DELAY_BAR_TEMPLATE="\n<div ng-controller=\"DelaySliderCtrl as ctrl\" class=\"slider-bar-control slider-delay-control\">\n    <md-input-container class=\"md-block\" md-no-float flex>\n        <label>{{ 'plugins.rangeSlider.bar.delay' | translate }}</label>\n        <md-select\n            aria-label=\"{{ 'plugins.rangeSlider.bar.delay' | translate }}\"\n            ng-model=\"ctrl.selectedDelay\"\n            ng-change=\"ctrl.selectDelay()\">\n            <md-option ng-repeat=\"(key, value) in { 1000: '1 sec', 2000: '2 sec', 3000: '3 sec', 4000: '4 sec', 5000: '5 sec', 6000: '6 sec', 7000: '7 sec' }\" ng-value=\"{{ key }}\">\n                {{ value }}\n            </md-option>\n        </md-select>\n    </md-input-container>\n</div>",e.EXPORT_BAR_TEMPLATE='\n<div class="slider-bar-control slider-export-control">\n    <span>\n        <md-switch\n            ng-controller="ExportSliderCtrl as ctrl"\n            aria-label="{{ \'plugins.rangeSlider.bar.tooltip.gif\' | translate }}"\n            class="rv-slider-switch"\n            ng-class="md-primary"\n            ng-model="ctrl.export"\n            ng-change="ctrl.selectExport()">\n            <label>{{ \'plugins.rangeSlider.bar.gif\' | translate }}</label>\n        </md-switch>\n        <md-tooltip>{{ \'plugins.rangeSlider.bar.tooltip.gif\' | translate }}</md-tooltip>\n    </span>\n</div>'},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(13),i=r(35),o=r(14),s=r(15),a=r(16),u=function(){function t(t,e){this._range={min:null,max:null},this._limit={min:null,max:null},this._gifImages=[],this._mapApi=t,this._slider=document.getElementById("nouislider"),this._config=e,this._precision=e.precision,this._slider.delay=e.delay,this._slider.lock=e.lock,this._slider.loop=e.loop,this._slider.range=e.range,this._slider.export=e.export,document.getElementsByClassName("slider-units")[0].textContent=e.units}return t.getPlayState=function(){return this._playState.asObservable()},t.setPlayState=function(t){this._playState.next(t)},t.prototype.startSlider=function(t,e){var r=this;this._step=this.range.max-this.range.min;var i=Math.abs(this.limit.max-this.limit.min),o=this._mapApi.fgpMapObj.width;n.create(this._slider,{start:[this.range.min,this.range.max],connect:!0,behaviour:"drag-tap",tooltips:[{to:function(n){return r.formatPips(n,t,e)},from:Number},{to:function(n){return r.formatPips(n,t,e)},from:Number}],range:this.setRanges(o,this.limit,i),pips:{mode:"range",density:o>800?2:25,format:{to:function(n){return r.formatPips(n,t,e)},from:Number}}}),document.getElementsByClassName("noUi-handle-lower")[0].setAttribute("tabindex","-2"),document.getElementsByClassName("noUi-handle-upper")[0].setAttribute("tabindex","-2"),null===this._slider.range.min&&(this._slider.range=this.range),this.setDefinitionQuery(this._slider.range);var s=this;this._slider.noUiSlider.on("set.one",(function(t){var e=t.map(Number);s._slider.range={min:e[0],max:e[1]},s.setDefinitionQuery(s._slider.range),s._slider.lock||(s._step=s._slider.range.max-s._slider.range.min)}))},t.prototype.setRanges=function(t,e,r){var n={};return n.min=e.min,n.max=e.max,n["50%"]=e.min+r/2,t>800&&(n["25%"]=e.min+r/4,n["75%"]=e.min+r/4*3),n},t.prototype.formatPips=function(t,e,r){if("number"===e)t=Math.round(100*t)/100;else if("date"===e||"wmst"===e){var n=new Date(t);t="en-FR"===r?n.getDate()+"/"+(n.getMonth()+1)+"/"+n.getFullYear():n.getMonth()+1+"/"+n.getDate()+"/"+n.getFullYear()}return t},Object.defineProperty(t.prototype,"range",{get:function(){return this._range},set:function(t){this._range=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"limit",{get:function(){return this._limit},set:function(t){this._limit=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lock",{get:function(){return this._slider.lock},set:function(t){this._slider.lock=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loop",{get:function(){return this._slider.loop},set:function(t){this._slider.loop=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"delay",{get:function(){return this._slider.delay},set:function(t){this._slider.delay=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"export",{get:function(){return this._slider.export},set:function(t){this._slider.export=t},enumerable:!0,configurable:!0}),t.prototype.play=function(e){var r=this;e?(t.setPlayState(e),this._gifImages=[],this.setTakeSnapShot(),this._playInterval=setInterval((function(){return r.playInstant(r.limit.max)}),this.delay)):this.pause()},t.prototype.playInstant=function(t){this.setTakeSnapShot(),this._slider.range.max!==t?this.step("up"):this._slider.loop?(this._slider.range.min=this.limit.min,this._slider.range.max=this._slider.range.min+this._step,this._slider.noUiSlider.set([this._slider.range.min,this._slider.range.max])):this.pause()},t.prototype.setTakeSnapShot=function(){var t=this;this.export&&setTimeout((function(){t.takeSnapShot(!1)}),this.delay-100)},t.prototype.takeSnapShot=function(t){var e=this,r=document.getElementsByClassName("rv-esri-map")[0];o.toSvg(r,{bgcolor:"white",quality:.5}).then((function(t){e._gifImages.push(t)})).catch((function(t){console.error("Not able to save screen shot!",t)}))},t.prototype.exportToGIF=function(){var t=this,e=document.getElementsByClassName("rv-esri-map")[0],r=e.offsetHeight/e.offsetWidth,n=e.offsetWidth<=1500?e.offsetWidth:1500,i=n*r;try{setTimeout((function(){s.createGIF({images:t._gifImages,frameDuration:10,numFrames:1,gifWidth:n,gifHeight:i},(function(e){t._gifImages=[],e.error||a.saveAs(t.dataURItoBlob(e.image),"fgpv-slider-export.gif")}))}),500)}catch(t){console.error("Not able to convert screen shot to GIF!",t)}},t.prototype.dataURItoBlob=function(t){for(var e=atob(t.split(",")[1]),r=t.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(e.length),i=new Uint8Array(n),o=0;o<e.length;o++)i[o]=e.charCodeAt(o);return new Blob([n],{type:r})},t.prototype.pause=function(){this.export&&this.takeSnapShot(!0),clearInterval(this._playInterval),t.setPlayState(!1)},t.prototype.refresh=function(){this._slider.noUiSlider.set([this.range.min,this.range.max]),this.setDefinitionQuery(this.range),this.pause()},t.prototype.step=function(t){var e=this._slider.noUiSlider.get().map(Number),r="up"===t?this._step:-this._step,n={min:this.lock?e[0]:this.setLeftAnchor(e,t,r),max:this.setRightAnchor(e,t,r)};this._slider.noUiSlider.set([n.min,n.max]),this.setDefinitionQuery(n),this._slider.range=n},t.prototype.setLeftAnchor=function(t,e,r){var n=0,i=this.limit;return n="down"===e?Math.floor(t[0]+r)<i.min?i.min:t[0]+r:Math.ceil(t[0]+r)>i.max-r?i.max-r:t[0]+r,parseFloat(n.toFixed(this._precision))},t.prototype.setRightAnchor=function(t,e,r){var n=0,i=this.limit;return n="up"===e?Math.ceil(t[1]+r)>i.max?i.max:t[1]+r:Math.floor(t[1]+r)<i.min-r?i.min-r:t[1]+r,parseFloat(n.toFixed(this._precision))},t.prototype.setDefinitionQuery=function(t){for(var e=0,r=this._config.layers;e<r.length;e++){var n=r[e],i=this._mapApi.layers.getLayersById(n.id)[0],o=i.type;if("esriDynamic"===o||"esriFeature"===o){if("number"===this._config.type)i.setFilterSql("rangeSliderNumberFilter",n.field+" > "+t.min+" AND "+n.field+" <= "+t.max);else if("date"===this._config.type){var s=this.getDate(t);i.setFilterSql("rangeSliderDateFilter",n.field+" > DATE '"+s[0]+"' AND "+n.field+" <= DATE '"+s[1]+"'")}}else if("ogcWms"===o)if("number"===this._config.type)i.esriLayer.setCustomParameters({},{layerDefs:"{'"+i._viewerLayer._defaultFC+"': '"+n.field+" > "+t.min+" AND "+n.field+" <= "+t.max+"'}"});else if("date"===this._config.type){s=this.getDate(t);i.esriLayer.setCustomParameters({},{layerDefs:"{'"+i._viewerLayer._defaultFC+"': \""+n.field+" > DATE '"+s[0]+"' AND "+n.field+" < DATE '"+s[1]+"'\"}"})}else if("wmst"===this._config.type){s=this.getDate(t,"wmst");i.esriLayer.setCustomParameters({},{TIME:s[0]+"/"+s[1]})}}},t.prototype.getDate=function(t,e){void 0===e&&(e="esri");var r=new Date(t.min),n=new Date(t.max),i="",o="";return"esri"===e?(i=r.getMonth()+1+"/"+r.getDate()+"/"+r.getFullYear(),o=n.getMonth()+1+"/"+n.getDate()+"/"+n.getFullYear()):"wmst"===e&&(i=r.getFullYear()+"-"+(r.getMonth()+1).toString().padStart(2,"0")+"-"+r.getDate().toString().padStart(2,"0")+"T00:00:00",o=n.getFullYear()+"-"+(n.getMonth()+1).toString().padStart(2,"0")+"-"+n.getDate().toString().padStart(2,"0")+"T00:00:00"),[i,o]},t._playState=new i.BehaviorSubject(!1),t}();e.SliderBar=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isFunction=function(t){return"function"==typeof t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(6);e.empty={closed:!0,next:function(t){},error:function(t){if(n.config.useDeprecatedSynchronousErrorHandling)throw t;i.hostReportError(t)},complete:function(){}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hostReportError=function(t){setTimeout((function(){throw t}))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),e.$$rxSubscriber=e.rxSubscriber},function(t,e,r){t.exports=r(9)},function(t,e,r){"use strict";r.r(e);r(10),r(34)},function(t,e,r){"use strict";var n=this&&this.__assign||function(){return(n=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++)for(var i in e=arguments[r])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};Object.defineProperty(e,"__esModule",{value:!0});var i=r(2),o=r(11),s=function(){function t(){}return t.prototype.init=function(e){this.mapApi=e,this.panel=this.mapApi.panels.create("rangeSlider"),this.panel.element.css(t.prototype.panelOptions),this.panel.body=i.SLIDER_TEMPLATE;var r=this._RV.getConfig("plugins").rangeSlider,s={};void 0!==r?((s=n(n({},t.prototype.layerOptions),r.params)).controls=r.controls,s.layers=r.layers,s.open=r.open):s=t.prototype.layerOptions,s.language=this._RV.getCurrentLang(),this._button=this.mapApi.mapI.addPluginButton(t.prototype.translations[this._RV.getCurrentLang()].title,this.onMenuItemClick()),s.open&&(this._button.isActive=!0),new o.SliderManager(e,this.panel,s)},t.prototype.onMenuItemClick=function(){var t=this;return function(){t._button.isActive=!t._button.isActive,t._button.isActive?t.panel.open():t.panel.close()}},t}();e.default=s,s.prototype.panelOptions={top:"calc(100% - 235px)",height:"185px","margin-right":"60px","margin-left":"420px"},s.prototype.layerOptions={open:!0,precision:2,delay:3e3,lock:!1,loop:!1,export:!1,range:{min:null,max:null},limit:{min:null,max:null},type:"date",layers:[],controls:["lock","loop","delay","refresh"]},s.prototype.translations={"en-CA":{title:"Range Slider",bar:{show:"Show slider information",hide:"Hide slider information",lock:"Lock left anchor",unlock:"Unlock left anchor",loop:"Animate in loop",unloop:"Do not animate in loop",previous:"Previous",play:"Play",pause:"Pause",foward:"Next",delay:"Delay",refresh:"Refresh",gif:"GIF",tooltip:{gif:'If enabled, click "Play" to start then "Pause" to finish then disable the control to export GIF'}}},"fr-CA":{title:"Curseur de plage",bar:{show:"Afficher l'information du curseur de plage",hide:"Cacher l'information du curseur de plage",lock:"Verrouiller la molette gauche",unlock:"Déverrouiller la molette gauche",loop:"Animer en boucle",unloop:"Ne pas animer en boucle",previous:"Précédent",play:"Jouer",pause:"Pause",foward:"Prochain",delay:"Délai",refresh:"Rafraîchir",gif:"GIF",tooltip:{gif:'Si activé, cliquez sur "Jouer" pour démarrer, puis sur "Pause" pour terminer et désactiver le contrôle pour exporter le GIF'}}}},window.rangeSlider=s},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),i=r(12),o=r(3),s=r(21),a=function(){function t(t,e,r){var n=this;this._attRead=0,this._mapApi=t,this._panel=e,this._config=r;var i=this._config.layers.map((function(t){return t.id})),o=[],s=0;this._mapApi.layersObj.layerAdded.subscribe((function(t){if(-1!==i.indexOf(t.id)){s+=1;var e=n._config.layers.find((function(e){return e.id===t.id}));if(o.push({layer:t,layerInfo:e}),s===n._config.layers.length){n.initializeSlider(o);var r=o.map((function(t){return t.layer.name+" ("+t.layerInfo.field+")"})).join(", ");document.getElementsByClassName("slider-desc-layers")[0].textContent=r,document.getElementsByClassName("slider-desc-info")[0].textContent=n._config.description}}else 0===i.length&&new Promise((function(e){$.ajax({url:"esriFeature"===t.type?t.esriLayer.url+"?f=json":t.esriLayer.url+"/"+t._layerIndex+"?f=json",cache:!1,dataType:"jsonp",success:function(t){return e(t)}})})).then((function(e){if(void 0!==e.timeInfo){var r={id:t.id,field:e.timeInfo.startTimeField};o.push({layer:t,layerInfo:r}),n._config.layers=[r],n.initializeSlider(o),document.getElementsByClassName("slider-desc-layers")[0].textContent=t.name+" ("+r.field+")",i=["done"]}}))}))}return t.prototype.initializeSlider=function(t){if(this._slider=new o.SliderBar(this._mapApi,this._config),null!==this._config.limit.min)this._slider.limit=this._config.limit,this._slider.range=null!==this._config.range.min?this._config.range:this._config.limit,this.setSliderBar();else for(var e=0,r=t;e<r.length;e++){var n=r[e],i=n.layer.type;if("esriDynamic"===i||"esriFeature"===i)0===n.layer.getAttributes().length&&this.startAttributesEvent(n.layerInfo,t.length)}},t.prototype.startAttributesEvent=function(t,e){var r=this;this._mapApi.layers.attributesAdded.pipe(s.take(1)).subscribe((function(n){r.setAttributes(n,t,e)}))},t.prototype.setAttributes=function(t,e,r){if(t.attributes.length>0&&t.layer.id===e.id){this._attRead+=1;for(var n=[],i=0,o=t.attributes;i<o.length;i++){var s=o[i];n.push(s[e.field])}var a={min:Math.min.apply(null,n),max:Math.max.apply(null,n)};(null===this._slider.limit.min||this._slider.limit.min>a.min)&&(this._slider.limit.min=a.min),(null===this._slider.limit.max||this._slider.limit.max<a.max)&&(this._slider.limit.max=a.max),this._slider.range=null!==this._config.range.min?this._config.range:this._slider.limit,r===this._attRead&&this.setSliderBar()}else this.startAttributesEvent(e,r)},t.prototype.setSliderBar=function(){this._slider.startSlider(this._config.type,this._config.language),this.setBarControls(this._config.controls),this._config.open&&this._panel.open()},t.prototype.setBarControls=function(t){for(var e=[n.PLAY_BAR_TEMPLATE],r=0,o=t;r<o.length;r++){var s=o[r];"lock"===s?e.unshift(n.LOCK_BAR_TEMPLATE):"loop"===s?e.push(n.LOOP_BAR_TEMPLATE):"refresh"===s?e.push(n.REFRESH_BAR_TEMPLATE):"delay"===s?e.push(n.DELAY_BAR_TEMPLATE):"export"===s&&e.push(n.EXPORT_BAR_TEMPLATE)}e.unshift(n.DESC_BAR_TEMPLATE),this._panel.controls=new i.SliderControls(this._mapApi,this._panel,e,this._slider)},t}();e.SliderManager=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(3),i=r(19).detect,o=function(){function t(t,e,r,o){this.mapApi=t,t.agControllerRegister("DescSliderCtrl",(function(){var t=this;this.isShow=!0,this.show=function(){t.isShow=!t.isShow;var e=document.getElementById("rangeSlider");e.style.height=t.isShow?"185px":"125px",e.style.top=t.isShow?"calc(100% - 235px)":"calc(100% - 175px)"}})),t.agControllerRegister("LockSliderCtrl",(function(){var t=this;this.isLocked=o.lock,this.lock=function(){o.lock=!o.lock,t.isLocked=o.lock}})),t.agControllerRegister("LoopSliderCtrl",(function(){var e=this;this.isLooped=o.loop,this.loop=function(){o.loop=!o.loop,e.isLooped=o.loop,t.fgpMapObj.esriMap.root.parentElement.parentElement.getElementsByClassName("slider-loop-control")[0].getElementsByTagName("md-icon")[0].classList.toggle("slider-loop-control-active")}})),t.agControllerRegister("StepSliderCtrl",(function(){this.step=function(t){o.step(t)}})),t.agControllerRegister("PlaySliderCtrl",(function(){var t=this;n.SliderBar.getPlayState().subscribe((function(e){t.isPlaying=e})),this.play=function(){o.play(!t.isPlaying)}})),t.agControllerRegister("RefreshSliderCtrl",(function(){this.refresh=function(){o.refresh()}})),t.agControllerRegister("DelaySliderCtrl",(function(){var t=this;this.selectedDelay=o.delay,this.selectDelay=function(){o.delay=t.selectedDelay}})),t.agControllerRegister("ExportSliderCtrl",(function(){var t=this;this.export=o.export,this.selectExport=function(){o.export=t.export,t.export||o.exportToGIF()}}));for(var s=e.body.find(".slider-controls"),a=0,u=r;a<u.length;a++){var c=u[a];if(c.includes("slider-delay-control"))s.find(".slider-play-control").append(this.compileTemplate(c));else if(c.includes("slider-loop-control"))s.find(".slider-play-control").prepend(this.compileTemplate(c));else if(c.includes("slider-export-control")){var l=i();"chrome"!==l.name&&"firefox"!==l.name||s.append(this.compileTemplate(c))}else s.append(this.compileTemplate(c))}}return t.prototype.compileTemplate=function(t){var e=$(t);return this.mapApi.$compile(e),e},t}();e.SliderControls=o},function(t,e,r){var n,i,o;/*! nouislider - 13.1.5 - 4/24/2019 */i=[],void 0===(o="function"==typeof(n=function(){"use strict";var t="13.1.5";function e(t){t.parentElement.removeChild(t)}function r(t){return null!=t}function n(t){t.preventDefault()}function i(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function o(t,e,r){r>0&&(c(t,e),setTimeout((function(){l(t,e)}),r))}function s(t){return Math.max(Math.min(t,100),0)}function a(t){return Array.isArray(t)?t:[t]}function u(t){var e=(t=String(t)).split(".");return e.length>1?e[1].length:0}function c(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function l(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function f(t){var e=void 0!==window.pageXOffset,r="CSS1Compat"===(t.compatMode||"");return{x:e?window.pageXOffset:r?t.documentElement.scrollLeft:t.body.scrollLeft,y:e?window.pageYOffset:r?t.documentElement.scrollTop:t.body.scrollTop}}function h(t,e){return 100/(e-t)}function d(t,e){return 100*e/(t[1]-t[0])}function p(t,e){for(var r=1;t>=e[r];)r+=1;return r}function m(t,e,r){if(r>=t.slice(-1)[0])return 100;var n=p(r,t),i=t[n-1],o=t[n],s=e[n-1],a=e[n];return s+function(t,e){return d(t,t[0]<0?e+Math.abs(t[0]):e-t[0])}([i,o],r)/h(s,a)}function v(t,e,r,n){if(100===n)return n;var i=p(n,t),o=t[i-1],s=t[i];return r?n-o>(s-o)/2?s:o:e[i-1]?t[i-1]+function(t,e){return Math.round(t/e)*e}(n-t[i-1],e[i-1]):n}function b(t,e,r){var n;if("number"==typeof e&&(e=[e]),!Array.isArray(e))throw new Error("noUiSlider (13.1.5): 'range' contains invalid value.");if(!i(n="min"===t?0:"max"===t?100:parseFloat(t))||!i(e[0]))throw new Error("noUiSlider (13.1.5): 'range' value isn't numeric.");r.xPct.push(n),r.xVal.push(e[0]),n?r.xSteps.push(!isNaN(e[1])&&e[1]):isNaN(e[1])||(r.xSteps[0]=e[1]),r.xHighestCompleteStep.push(0)}function g(t,e,r){if(e)if(r.xVal[t]!==r.xVal[t+1]){r.xSteps[t]=d([r.xVal[t],r.xVal[t+1]],e)/h(r.xPct[t],r.xPct[t+1]);var n=(r.xVal[t+1]-r.xVal[t])/r.xNumSteps[t],i=Math.ceil(Number(n.toFixed(3))-1),o=r.xVal[t]+r.xNumSteps[t]*i;r.xHighestCompleteStep[t]=o}else r.xSteps[t]=r.xHighestCompleteStep[t]=r.xVal[t]}function y(t,e,r){var n;this.xPct=[],this.xVal=[],this.xSteps=[r||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=e;var i=[];for(n in t)t.hasOwnProperty(n)&&i.push([t[n],n]);for(i.length&&"object"==typeof i[0][0]?i.sort((function(t,e){return t[0][0]-e[0][0]})):i.sort((function(t,e){return t[0]-e[0]})),n=0;n<i.length;n++)b(i[n][1],i[n][0],this);for(this.xNumSteps=this.xSteps.slice(0),n=0;n<this.xNumSteps.length;n++)g(n,this.xNumSteps[n],this)}y.prototype.getMargin=function(t){var e=this.xNumSteps[0];if(e&&t/e%1!=0)throw new Error("noUiSlider (13.1.5): 'limit', 'margin' and 'padding' must be divisible by step.");return 2===this.xPct.length&&d(this.xVal,t)},y.prototype.toStepping=function(t){return t=m(this.xVal,this.xPct,t)},y.prototype.fromStepping=function(t){return function(t,e,r){if(r>=100)return t.slice(-1)[0];var n=p(r,e),i=t[n-1],o=t[n],s=e[n-1];return function(t,e){return e*(t[1]-t[0])/100+t[0]}([i,o],(r-s)*h(s,e[n]))}(this.xVal,this.xPct,t)},y.prototype.getStep=function(t){return t=v(this.xPct,this.xSteps,this.snap,t)},y.prototype.getDefaultStep=function(t,e,r){var n=p(t,this.xPct);return(100===t||e&&t===this.xPct[n-1])&&(n=Math.max(n-1,1)),(this.xVal[n]-this.xVal[n-1])/r},y.prototype.getNearbySteps=function(t){var e=p(t,this.xPct);return{stepBefore:{startValue:this.xVal[e-2],step:this.xNumSteps[e-2],highestStep:this.xHighestCompleteStep[e-2]},thisStep:{startValue:this.xVal[e-1],step:this.xNumSteps[e-1],highestStep:this.xHighestCompleteStep[e-1]},stepAfter:{startValue:this.xVal[e],step:this.xNumSteps[e],highestStep:this.xHighestCompleteStep[e]}}},y.prototype.countStepDecimals=function(){var t=this.xNumSteps.map(u);return Math.max.apply(null,t)},y.prototype.convert=function(t){return this.getStep(this.toStepping(t))};var w={to:function(t){return void 0!==t&&t.toFixed(2)},from:Number};function S(t){if(function(t){return"object"==typeof t&&"function"==typeof t.to&&"function"==typeof t.from}(t))return!0;throw new Error("noUiSlider (13.1.5): 'format' requires 'to' and 'from' methods.")}function x(t,e){if(!i(e))throw new Error("noUiSlider (13.1.5): 'step' is not numeric.");t.singleStep=e}function _(t,e){if("object"!=typeof e||Array.isArray(e))throw new Error("noUiSlider (13.1.5): 'range' is not an object.");if(void 0===e.min||void 0===e.max)throw new Error("noUiSlider (13.1.5): Missing 'min' or 'max' in 'range'.");if(e.min===e.max)throw new Error("noUiSlider (13.1.5): 'range' 'min' and 'max' cannot be equal.");t.spectrum=new y(e,t.snap,t.singleStep)}function E(t,e){if(e=a(e),!Array.isArray(e)||!e.length)throw new Error("noUiSlider (13.1.5): 'start' option is incorrect.");t.handles=e.length,t.start=e}function C(t,e){if(t.snap=e,"boolean"!=typeof e)throw new Error("noUiSlider (13.1.5): 'snap' option must be a boolean.")}function A(t,e){if(t.animate=e,"boolean"!=typeof e)throw new Error("noUiSlider (13.1.5): 'animate' option must be a boolean.")}function O(t,e){if(t.animationDuration=e,"number"!=typeof e)throw new Error("noUiSlider (13.1.5): 'animationDuration' option must be a number.")}function T(t,e){var r,n=[!1];if("lower"===e?e=[!0,!1]:"upper"===e&&(e=[!1,!0]),!0===e||!1===e){for(r=1;r<t.handles;r++)n.push(e);n.push(!1)}else{if(!Array.isArray(e)||!e.length||e.length!==t.handles+1)throw new Error("noUiSlider (13.1.5): 'connect' option doesn't match handle count.");n=e}t.connect=n}function P(t,e){switch(e){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider (13.1.5): 'orientation' option is invalid.")}}function k(t,e){if(!i(e))throw new Error("noUiSlider (13.1.5): 'margin' option must be numeric.");if(0!==e&&(t.margin=t.spectrum.getMargin(e),!t.margin))throw new Error("noUiSlider (13.1.5): 'margin' option is only supported on linear sliders.")}function M(t,e){if(!i(e))throw new Error("noUiSlider (13.1.5): 'limit' option must be numeric.");if(t.limit=t.spectrum.getMargin(e),!t.limit||t.handles<2)throw new Error("noUiSlider (13.1.5): 'limit' option is only supported on linear sliders with 2 or more handles.")}function j(t,e){if(!i(e)&&!Array.isArray(e))throw new Error("noUiSlider (13.1.5): 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(e)&&2!==e.length&&!i(e[0])&&!i(e[1]))throw new Error("noUiSlider (13.1.5): 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==e){if(Array.isArray(e)||(e=[e,e]),t.padding=[t.spectrum.getMargin(e[0]),t.spectrum.getMargin(e[1])],!1===t.padding[0]||!1===t.padding[1])throw new Error("noUiSlider (13.1.5): 'padding' option is only supported on linear sliders.");if(t.padding[0]<0||t.padding[1]<0)throw new Error("noUiSlider (13.1.5): 'padding' option must be a positive number(s).");if(t.padding[0]+t.padding[1]>100)throw new Error("noUiSlider (13.1.5): 'padding' option must not exceed 100% of the range.")}}function N(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1;break;default:throw new Error("noUiSlider (13.1.5): 'direction' option was not recognized.")}}function I(t,e){if("string"!=typeof e)throw new Error("noUiSlider (13.1.5): 'behaviour' must be a string containing options.");var r=e.indexOf("tap")>=0,n=e.indexOf("drag")>=0,i=e.indexOf("fixed")>=0,o=e.indexOf("snap")>=0,s=e.indexOf("hover")>=0,a=e.indexOf("unconstrained")>=0;if(i){if(2!==t.handles)throw new Error("noUiSlider (13.1.5): 'fixed' behaviour must be used with 2 handles");k(t,t.start[1]-t.start[0])}if(a&&(t.margin||t.limit))throw new Error("noUiSlider (13.1.5): 'unconstrained' behaviour cannot be used with margin or limit");t.events={tap:r||o,drag:n,fixed:i,snap:o,hover:s,unconstrained:a}}function R(t,e){if(!1!==e)if(!0===e){t.tooltips=[];for(var r=0;r<t.handles;r++)t.tooltips.push(!0)}else{if(t.tooltips=a(e),t.tooltips.length!==t.handles)throw new Error("noUiSlider (13.1.5): must pass a formatter for all handles.");t.tooltips.forEach((function(t){if("boolean"!=typeof t&&("object"!=typeof t||"function"!=typeof t.to))throw new Error("noUiSlider (13.1.5): 'tooltips' must be passed a formatter or 'false'.")}))}}function F(t,e){t.ariaFormat=e,S(e)}function L(t,e){t.format=e,S(e)}function U(t,e){if(t.keyboardSupport=e,"boolean"!=typeof e)throw new Error("noUiSlider (13.1.5): 'keyboardSupport' option must be a boolean.")}function V(t,e){t.documentElement=e}function D(t,e){if("string"!=typeof e&&!1!==e)throw new Error("noUiSlider (13.1.5): 'cssPrefix' must be a string or `false`.");t.cssPrefix=e}function B(t,e){if("object"!=typeof e)throw new Error("noUiSlider (13.1.5): 'cssClasses' must be an object.");if("string"==typeof t.cssPrefix)for(var r in t.cssClasses={},e)e.hasOwnProperty(r)&&(t.cssClasses[r]=t.cssPrefix+e[r]);else t.cssClasses=e}function W(t){var e={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,ariaFormat:w,format:w},n={step:{r:!1,t:x},start:{r:!0,t:E},connect:{r:!0,t:T},direction:{r:!0,t:N},snap:{r:!1,t:C},animate:{r:!1,t:A},animationDuration:{r:!1,t:O},range:{r:!0,t:_},orientation:{r:!1,t:P},margin:{r:!1,t:k},limit:{r:!1,t:M},padding:{r:!1,t:j},behaviour:{r:!0,t:I},ariaFormat:{r:!1,t:F},format:{r:!1,t:L},tooltips:{r:!1,t:R},keyboardSupport:{r:!0,t:U},documentElement:{r:!1,t:V},cssPrefix:{r:!0,t:D},cssClasses:{r:!0,t:B}},i={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:{target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"}};t.format&&!t.ariaFormat&&(t.ariaFormat=t.format),Object.keys(n).forEach((function(o){if(!r(t[o])&&void 0===i[o]){if(n[o].r)throw new Error("noUiSlider (13.1.5): '"+o+"' is required.");return!0}n[o].t(e,r(t[o])?t[o]:i[o])})),e.pips=t.pips;var o=document.createElement("div"),s=void 0!==o.style.msTransform,a=void 0!==o.style.transform;return e.transformRule=a?"transform":s?"msTransform":"webkitTransform",e.style=[["left","top"],["right","bottom"]][e.dir][e.ort],e}function H(t,r,i){var u,h,d,p,m,v,b,g,y=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},w=window.CSS&&CSS.supports&&CSS.supports("touch-action","none")&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}(),S=t,x=r.spectrum,_=[],E=[],C=[],A=0,O={},T=t.ownerDocument,P=r.documentElement||T.documentElement,k=T.body,M="rtl"===T.dir||1===r.ort?0:100;function j(t,e){var r=T.createElement("div");return e&&c(r,e),t.appendChild(r),r}function N(t,e){var n=j(t,r.cssClasses.origin),i=j(n,r.cssClasses.handle);return j(i,r.cssClasses.touchArea),i.setAttribute("data-handle",e),r.keyboardSupport&&(i.setAttribute("tabindex","0"),i.addEventListener("keydown",(function(t){return function(t,e){if(F()||L(e))return!1;var n=["Left","Right"],i=["Down","Up"];r.dir&&!r.ort?n.reverse():r.ort&&!r.dir&&i.reverse();var o=t.key.replace("Arrow",""),s=o===i[0]||o===n[0],a=o===i[1]||o===n[1];if(!s&&!a)return!0;t.preventDefault();var u=s?0:1,c=dt(e)[u];return null===c||(!1===c&&(c=x.getDefaultStep(E[e],s,10)),c=Math.max(c,1e-7),c*=s?-1:1,ft(e,_[e]+c,!0)),!1}(t,e)}))),i.setAttribute("role","slider"),i.setAttribute("aria-orientation",r.ort?"vertical":"horizontal"),0===e?c(i,r.cssClasses.handleLower):e===r.handles-1&&c(i,r.cssClasses.handleUpper),n}function I(t,e){return!!e&&j(t,r.cssClasses.connect)}function R(t,e){return!!r.tooltips[e]&&j(t.firstChild,r.cssClasses.tooltip)}function F(){return S.hasAttribute("disabled")}function L(t){return h[t].hasAttribute("disabled")}function U(){m&&(tt("update.tooltips"),m.forEach((function(t){t&&e(t)})),m=null)}function V(){U(),m=h.map(R),Z("update.tooltips",(function(t,e,n){if(m[e]){var i=t[e];!0!==r.tooltips[e]&&(i=r.tooltips[e].to(n[e])),m[e].innerHTML=i}}))}function D(t,e,n){var i=T.createElement("div"),o=[];o[0]=r.cssClasses.valueNormal,o[1]=r.cssClasses.valueLarge,o[2]=r.cssClasses.valueSub;var s=[];s[0]=r.cssClasses.markerNormal,s[1]=r.cssClasses.markerLarge,s[2]=r.cssClasses.markerSub;var a=[r.cssClasses.valueHorizontal,r.cssClasses.valueVertical],u=[r.cssClasses.markerHorizontal,r.cssClasses.markerVertical];function l(t,e){var n=e===r.cssClasses.value,i=n?o:s;return e+" "+(n?a:u)[r.ort]+" "+i[t]}return c(i,r.cssClasses.pips),c(i,0===r.ort?r.cssClasses.pipsHorizontal:r.cssClasses.pipsVertical),Object.keys(t).forEach((function(o){!function(t,o,s){if(-1!==(s=e?e(o,s):s)){var a=j(i,!1);a.className=l(s,r.cssClasses.marker),a.style[r.style]=t+"%",s>0&&((a=j(i,!1)).className=l(s,r.cssClasses.value),a.setAttribute("data-value",o),a.style[r.style]=t+"%",a.innerHTML=n.to(o))}}(o,t[o][0],t[o][1])})),i}function B(){p&&(e(p),p=null)}function H(t){B();var e=t.mode,r=t.density||1,n=t.filter||!1,i=function(t,e,r){if("range"===t||"steps"===t)return x.xVal;if("count"===t){if(e<2)throw new Error("noUiSlider (13.1.5): 'values' (>= 2) required for mode 'count'.");var n=e-1,i=100/n;for(e=[];n--;)e[n]=n*i;e.push(100),t="positions"}return"positions"===t?e.map((function(t){return x.fromStepping(r?x.getStep(t):t)})):"values"===t?r?e.map((function(t){return x.fromStepping(x.getStep(x.toStepping(t)))})):e:void 0}(e,t.values||!1,t.stepped||!1),o=function(t,e,r){var n,i={},o=x.xVal[0],s=x.xVal[x.xVal.length-1],a=!1,u=!1,c=0;return n=r.slice().sort((function(t,e){return t-e})),(r=n.filter((function(t){return!this[t]&&(this[t]=!0)}),{}))[0]!==o&&(r.unshift(o),a=!0),r[r.length-1]!==s&&(r.push(s),u=!0),r.forEach((function(n,o){var s,l,f,h,d,p,m,v,b,g,y=n,w=r[o+1],S="steps"===e;if(S&&(s=x.xNumSteps[o]),s||(s=w-y),!1!==y&&void 0!==w)for(s=Math.max(s,1e-7),l=y;l<=w;l=(l+s).toFixed(7)/1){for(v=(d=(h=x.toStepping(l))-c)/t,g=d/(b=Math.round(v)),f=1;f<=b;f+=1)i[(p=c+f*g).toFixed(5)]=[x.fromStepping(p),0];m=r.indexOf(l)>-1?1:S?2:0,!o&&a&&(m=0),l===w&&u||(i[h.toFixed(5)]=[l,m]),c=h}})),i}(r,e,i),s=t.format||{to:Math.round};return p=S.appendChild(D(o,n,s))}function z(){var t=u.getBoundingClientRect(),e="offset"+["Width","Height"][r.ort];return 0===r.ort?t.width||u[e]:t.height||u[e]}function Y(t,e,n,i){var o=function(o){return!!(o=function(t,e,r){var n,i,o=0===t.type.indexOf("touch"),s=0===t.type.indexOf("mouse"),a=0===t.type.indexOf("pointer");if(0===t.type.indexOf("MSPointer")&&(a=!0),o){var u=function(t){return t.target===r||r.contains(t.target)};if("touchstart"===t.type){var c=Array.prototype.filter.call(t.touches,u);if(c.length>1)return!1;n=c[0].pageX,i=c[0].pageY}else{var l=Array.prototype.find.call(t.changedTouches,u);if(!l)return!1;n=l.pageX,i=l.pageY}}return e=e||f(T),(s||a)&&(n=t.clientX+e.x,i=t.clientY+e.y),t.pageOffset=e,t.points=[n,i],t.cursor=s||a,t}(o,i.pageOffset,i.target||e))&&!(F()&&!i.doNotReject)&&(s=S,a=r.cssClasses.tap,!((s.classList?s.classList.contains(a):new RegExp("\\b"+a+"\\b").test(s.className))&&!i.doNotReject)&&!(t===y.start&&void 0!==o.buttons&&o.buttons>1)&&(!i.hover||!o.buttons)&&(w||o.preventDefault(),o.calcPoint=o.points[r.ort],void n(o,i)));var s,a},s=[];return t.split(" ").forEach((function(t){e.addEventListener(t,o,!!w&&{passive:!0}),s.push([t,o])})),s}function q(t){var e,n,i,o,a,c,l=100*(t-(e=u,n=r.ort,i=e.getBoundingClientRect(),o=e.ownerDocument,a=o.documentElement,c=f(o),/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(c.x=0),n?i.top+c.y-a.clientTop:i.left+c.x-a.clientLeft))/z();return l=s(l),r.dir?100-l:l}function G(t,e){"mouseout"===t.type&&"HTML"===t.target.nodeName&&null===t.relatedTarget&&$(t,e)}function X(t,e){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===t.buttons&&0!==e.buttonsProperty)return $(t,e);var n=(r.dir?-1:1)*(t.calcPoint-e.startCalcPoint);it(n>0,100*n/e.baseSize,e.locations,e.handleNumbers)}function $(t,e){e.handle&&(l(e.handle,r.cssClasses.active),A-=1),e.listeners.forEach((function(t){P.removeEventListener(t[0],t[1])})),0===A&&(l(S,r.cssClasses.drag),st(),t.cursor&&(k.style.cursor="",k.removeEventListener("selectstart",n))),e.handleNumbers.forEach((function(t){et("change",t),et("set",t),et("end",t)}))}function K(t,e){if(e.handleNumbers.some(L))return!1;var i;1===e.handleNumbers.length&&(i=h[e.handleNumbers[0]].children[0],A+=1,c(i,r.cssClasses.active)),t.stopPropagation();var o=[],s=Y(y.move,P,X,{target:t.target,handle:i,listeners:o,startCalcPoint:t.calcPoint,baseSize:z(),pageOffset:t.pageOffset,handleNumbers:e.handleNumbers,buttonsProperty:t.buttons,locations:E.slice()}),a=Y(y.end,P,$,{target:t.target,handle:i,listeners:o,doNotReject:!0,handleNumbers:e.handleNumbers}),u=Y("mouseout",P,G,{target:t.target,handle:i,listeners:o,doNotReject:!0,handleNumbers:e.handleNumbers});o.push.apply(o,s.concat(a,u)),t.cursor&&(k.style.cursor=getComputedStyle(t.target).cursor,h.length>1&&c(S,r.cssClasses.drag),k.addEventListener("selectstart",n,!1)),e.handleNumbers.forEach((function(t){et("start",t)}))}function Q(t){t.stopPropagation();var e=q(t.calcPoint),n=function(t){var e=100,r=!1;return h.forEach((function(n,i){if(!L(i)){var o=Math.abs(E[i]-t);(o<e||100===o&&100===e)&&(r=i,e=o)}})),r}(e);if(!1===n)return!1;r.events.snap||o(S,r.cssClasses.tap,r.animationDuration),at(n,e,!0,!0),st(),et("slide",n,!0),et("update",n,!0),et("change",n,!0),et("set",n,!0),r.events.snap&&K(t,{handleNumbers:[n]})}function J(t){var e=q(t.calcPoint),r=x.getStep(e),n=x.fromStepping(r);Object.keys(O).forEach((function(t){"hover"===t.split(".")[0]&&O[t].forEach((function(t){t.call(v,n)}))}))}function Z(t,e){O[t]=O[t]||[],O[t].push(e),"update"===t.split(".")[0]&&h.forEach((function(t,e){et("update",e)}))}function tt(t){var e=t&&t.split(".")[0],r=e&&t.substring(e.length);Object.keys(O).forEach((function(t){var n=t.split(".")[0],i=t.substring(n.length);e&&e!==n||r&&r!==i||delete O[t]}))}function et(t,e,n){Object.keys(O).forEach((function(i){var o=i.split(".")[0];t===o&&O[i].forEach((function(t){t.call(v,_.map(r.format.to),e,_.slice(),n||!1,E.slice())}))}))}function rt(t,e,n,i,o,a){return h.length>1&&!r.events.unconstrained&&(i&&e>0&&(n=Math.max(n,t[e-1]+r.margin)),o&&e<h.length-1&&(n=Math.min(n,t[e+1]-r.margin))),h.length>1&&r.limit&&(i&&e>0&&(n=Math.min(n,t[e-1]+r.limit)),o&&e<h.length-1&&(n=Math.max(n,t[e+1]-r.limit))),r.padding&&(0===e&&(n=Math.max(n,r.padding[0])),e===h.length-1&&(n=Math.min(n,100-r.padding[1]))),!((n=s(n=x.getStep(n)))===t[e]&&!a)&&n}function nt(t,e){var n=r.ort;return(n?e:t)+", "+(n?t:e)}function it(t,e,r,n){var i=r.slice(),o=[!t,t],s=[t,!t];n=n.slice(),t&&n.reverse(),n.length>1?n.forEach((function(t,r){var n=rt(i,t,i[t]+e,o[r],s[r],!1);!1===n?e=0:(e=n-i[t],i[t]=n)})):o=s=[!0];var a=!1;n.forEach((function(t,n){a=at(t,r[t]+e,o[n],s[n])||a})),a&&n.forEach((function(t){et("update",t),et("slide",t)}))}function ot(t,e){return r.dir?100-t-e:t}function st(){C.forEach((function(t){var e=E[t]>50?-1:1,r=3+(h.length+e*t);h[t].style.zIndex=r}))}function at(t,e,n,i){return!1!==(e=rt(E,t,e,n,i,!1))&&(function(t,e){E[t]=e,_[t]=x.fromStepping(e);var n="translate("+nt(ot(e,0)-M+"%","0")+")";h[t].style[r.transformRule]=n,ut(t),ut(t+1)}(t,e),!0)}function ut(t){if(d[t]){var e=0,n=100;0!==t&&(e=E[t-1]),t!==d.length-1&&(n=E[t]);var i=n-e,o="translate("+nt(ot(e,i)+"%","0")+")",s="scale("+nt(i/100,"1")+")";d[t].style[r.transformRule]=o+" "+s}}function ct(t,e){return null===t||!1===t||void 0===t?E[e]:("number"==typeof t&&(t=String(t)),t=r.format.from(t),!1===(t=x.toStepping(t))||isNaN(t)?E[e]:t)}function lt(t,e){var n=a(t),i=void 0===E[0];e=void 0===e||!!e,r.animate&&!i&&o(S,r.cssClasses.tap,r.animationDuration),C.forEach((function(t){at(t,ct(n[t],t),!0,!1)})),C.forEach((function(t){at(t,E[t],!0,!0)})),st(),C.forEach((function(t){et("update",t),null!==n[t]&&e&&et("set",t)}))}function ft(t,e,r){if(!((t=Number(t))>=0&&t<C.length))throw new Error("noUiSlider (13.1.5): invalid handle number, got: "+t);at(t,ct(e,t),!0,!0),et("update",t),r&&et("set",t)}function ht(){var t=_.map(r.format.to);return 1===t.length?t[0]:t}function dt(t){var e=E[t],n=x.getNearbySteps(e),i=_[t],o=n.thisStep.step,s=null;if(r.snap)return[i-n.stepBefore.startValue||null,n.stepAfter.startValue-i||null];!1!==o&&i+o>n.stepAfter.startValue&&(o=n.stepAfter.startValue-i),s=i>n.thisStep.startValue?n.thisStep.step:!1!==n.stepBefore.step&&i-n.stepBefore.highestStep,100===e?o=null:0===e&&(s=null);var a=x.countStepDecimals();return null!==o&&!1!==o&&(o=Number(o.toFixed(a))),null!==s&&!1!==s&&(s=Number(s.toFixed(a))),[s,o]}return c(b=S,r.cssClasses.target),0===r.dir?c(b,r.cssClasses.ltr):c(b,r.cssClasses.rtl),0===r.ort?c(b,r.cssClasses.horizontal):c(b,r.cssClasses.vertical),u=j(b,r.cssClasses.base),function(t,e){var n=j(e,r.cssClasses.connects);h=[],(d=[]).push(I(n,t[0]));for(var i=0;i<r.handles;i++)h.push(N(e,i)),C[i]=i,d.push(I(n,t[i+1]))}(r.connect,u),(g=r.events).fixed||h.forEach((function(t,e){Y(y.start,t.children[0],K,{handleNumbers:[e]})})),g.tap&&Y(y.start,u,Q,{}),g.hover&&Y(y.move,u,J,{hover:!0}),g.drag&&d.forEach((function(t,e){if(!1!==t&&0!==e&&e!==d.length-1){var n=h[e-1],i=h[e],o=[t];c(t,r.cssClasses.draggable),g.fixed&&(o.push(n.children[0]),o.push(i.children[0])),o.forEach((function(t){Y(y.start,t,K,{handles:[n,i],handleNumbers:[e-1,e]})}))}})),lt(r.start),r.pips&&H(r.pips),r.tooltips&&V(),Z("update",(function(t,e,n,i,o){C.forEach((function(t){var e=h[t],i=rt(E,t,0,!0,!0,!0),s=rt(E,t,100,!0,!0,!0),a=o[t],u=r.ariaFormat.to(n[t]);i=x.fromStepping(i).toFixed(1),s=x.fromStepping(s).toFixed(1),a=x.fromStepping(a).toFixed(1),e.children[0].setAttribute("aria-valuemin",i),e.children[0].setAttribute("aria-valuemax",s),e.children[0].setAttribute("aria-valuenow",a),e.children[0].setAttribute("aria-valuetext",u)}))})),v={destroy:function(){for(var t in r.cssClasses)r.cssClasses.hasOwnProperty(t)&&l(S,r.cssClasses[t]);for(;S.firstChild;)S.removeChild(S.firstChild);delete S.noUiSlider},steps:function(){return C.map(dt)},on:Z,off:tt,get:ht,set:lt,setHandle:ft,reset:function(t){lt(r.start,t)},__moveHandles:function(t,e,r){it(t,e,E,r)},options:i,updateOptions:function(t,e){var n=ht(),o=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];o.forEach((function(e){void 0!==t[e]&&(i[e]=t[e])}));var s=W(i);o.forEach((function(e){void 0!==t[e]&&(r[e]=s[e])})),x=s.spectrum,r.margin=s.margin,r.limit=s.limit,r.padding=s.padding,r.pips?H(r.pips):B(),r.tooltips?V():U(),E=[],lt(t.start||n,e)},target:S,removePips:B,removeTooltips:U,pips:H}}return{__spectrum:y,version:t,create:function(t,e){if(!t||!t.nodeName)throw new Error("noUiSlider (13.1.5): create requires a single element, got: "+t);if(t.noUiSlider)throw new Error("noUiSlider (13.1.5): Slider was already initialized.");var r=H(t,W(e),e);return t.noUiSlider=r,r}}})?n.apply(e,i):n)||(t.exports=o)},function(t,e,r){!function(e){"use strict";var r=function(){return{escape:function(t){return t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:e,mimeType:function(t){var r=e(t).toLowerCase();return(n="application/font-woff",{woff:n,woff2:n,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"})[r]||"";var n},dataAsUrl:function(t,e){return"data:"+e+";base64,"+t},isDataUrl:function(t){return-1!==t.search(/^(data:)/)},canvasToBlob:function(t){return t.toBlob?new Promise((function(e){t.toBlob(e)})):function(t){return new Promise((function(e){for(var r=window.atob(t.toDataURL().split(",")[1]),n=r.length,i=new Uint8Array(n),o=0;o<n;o++)i[o]=r.charCodeAt(o);e(new Blob([i],{type:"image/png"}))}))}(t)},resolveUrl:function(t,e){var r=document.implementation.createHTMLDocument(),n=r.createElement("base");r.head.appendChild(n);var i=r.createElement("a");return r.body.appendChild(i),n.href=e,i.href=t,i.href},getAndEncode:function(t){a.impl.options.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime());return new Promise((function(e){var r,n=new XMLHttpRequest;if(n.onreadystatechange=function(){if(4!==n.readyState)return;if(200!==n.status)return void(r?e(r):o("cannot fetch resource: "+t+", status: "+n.status));var i=new FileReader;i.onloadend=function(){var t=i.result.split(/,/)[1];e(t)},i.readAsDataURL(n.response)},n.ontimeout=function(){r?e(r):o("timeout of 30000ms occured while fetching resource: "+t)},n.responseType="blob",n.timeout=3e4,n.open("GET",t,!0),n.send(),a.impl.options.imagePlaceholder){var i=a.impl.options.imagePlaceholder.split(/,/);i&&i[1]&&(r=i[1])}function o(t){console.error(t),e("")}}))},uid:(t=0,function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+t++}),delay:function(t){return function(e){return new Promise((function(r){setTimeout((function(){r(e)}),t)}))}},asArray:function(t){for(var e=[],r=t.length,n=0;n<r;n++)e.push(t[n]);return e},escapeXhtml:function(t){return t.replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(t){return new Promise((function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src=t}))},width:function(t){var e=r(t,"border-left-width"),n=r(t,"border-right-width");return t.scrollWidth+e+n},height:function(t){var e=r(t,"border-top-width"),n=r(t,"border-bottom-width");return t.scrollHeight+e+n}};var t;function e(t){var e=/\.([^\.\/]*?)$/g.exec(t);return e?e[1]:""}function r(t,e){var r=window.getComputedStyle(t).getPropertyValue(e);return parseFloat(r.replace("px",""))}}(),n=function(){var t=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(t,r,o){return function(){return!e(t)}()?Promise.resolve(t):Promise.resolve(t).then(n).then((function(e){var n=Promise.resolve(t);return e.forEach((function(t){n=n.then((function(e){return i(e,t,r,o)}))})),n}))},shouldProcess:e,impl:{readUrls:n,inline:i}};function e(e){return-1!==e.search(t)}function n(e){for(var n,i=[];null!==(n=t.exec(e));)i.push(n[1]);return i.filter((function(t){return!r.isDataUrl(t)}))}function i(t,e,n,i){return Promise.resolve(e).then((function(t){return n?r.resolveUrl(t,n):t})).then(i||r.getAndEncode).then((function(t){return r.dataAsUrl(t,r.mimeType(e))})).then((function(n){return t.replace(function(t){return new RegExp("(url\\(['\"]?)("+r.escape(t)+")(['\"]?\\))","g")}(e),"$1"+n+"$3")}))}}(),i=function(){return{resolveAll:function(){return t(document).then((function(t){return Promise.all(t.map((function(t){return t.resolve()})))})).then((function(t){return t.join("\n")}))},impl:{readAll:t}};function t(){return Promise.resolve(r.asArray(document.styleSheets)).then((function(t){var e=[];return t.forEach((function(t){try{r.asArray(t.cssRules||[]).forEach(e.push.bind(e))}catch(e){console.log("Error while reading CSS rules from "+t.href,e.toString())}})),e})).then((function(t){return t.filter((function(t){return t.type===CSSRule.FONT_FACE_RULE})).filter((function(t){return n.shouldProcess(t.style.getPropertyValue("src"))}))})).then((function(e){return e.map(t)}));function t(t){return{resolve:function(){var e=(t.parentStyleSheet||{}).href;return n.inlineAll(t.cssText,e)},src:function(){return t.style.getPropertyValue("src")}}}}}(),o=function(){return{inlineAll:function e(i){return i instanceof Element?function(t){var e=t.style.getPropertyValue("background");return e?n.inlineAll(e).then((function(e){t.style.setProperty("background",e,t.style.getPropertyPriority("background"))})).then((function(){return t})):Promise.resolve(t)}(i).then((function(){return i instanceof HTMLImageElement?t(i).inline():Promise.all(r.asArray(i.childNodes).map((function(t){return e(t)})))})):Promise.resolve(i)},impl:{newImage:t}};function t(t){return{inline:function(e){return r.isDataUrl(t.src)?Promise.resolve():Promise.resolve(t.src).then(e||r.getAndEncode).then((function(e){return r.dataAsUrl(e,r.mimeType(t.src))})).then((function(e){return new Promise((function(r,n){t.onload=r,t.onerror=n,t.src=e}))}))}}}}(),s={imagePlaceholder:void 0,cacheBust:!1},a={toSvg:u,toPng:function(t,e){return c(t,e||{}).then((function(t){return t.toDataURL()}))},toJpeg:function(t,e){return c(t,e=e||{}).then((function(t){return t.toDataURL("image/jpeg",e.quality||1)}))},toBlob:function(t,e){return c(t,e||{}).then(r.canvasToBlob)},toPixelData:function(t,e){return c(t,e||{}).then((function(e){return e.getContext("2d").getImageData(0,0,r.width(t),r.height(t)).data}))},impl:{fontFaces:i,images:o,util:r,inliner:n,options:{}}};function u(t,e){return function(t){void 0===t.imagePlaceholder?a.impl.options.imagePlaceholder=s.imagePlaceholder:a.impl.options.imagePlaceholder=t.imagePlaceholder;void 0===t.cacheBust?a.impl.options.cacheBust=s.cacheBust:a.impl.options.cacheBust=t.cacheBust}(e=e||{}),Promise.resolve(t).then((function(t){return function t(e,n,i){return i||!n||n(e)?Promise.resolve(e).then((function(t){return t instanceof HTMLCanvasElement?r.makeImage(t.toDataURL()):t.cloneNode(!1)})).then((function(t){return o(e,t,n)})).then((function(t){return function(t,e){return e instanceof Element?Promise.resolve().then(n).then(i).then(o).then(s).then((function(){return e})):e;function n(){var n,i;n=window.getComputedStyle(t),i=e.style,n.cssText?i.cssText=n.cssText:function(t,e){r.asArray(t).forEach((function(r){e.setProperty(r,t.getPropertyValue(r),t.getPropertyPriority(r))}))}(n,i)}function i(){[":before",":after"].forEach((function(n){!function(n){var i=window.getComputedStyle(t,n),o=i.getPropertyValue("content");if(""===o||"none"===o)return;var s=r.uid();e.className=e.className+" "+s;var a=document.createElement("style");a.appendChild(function(t,e,n){var i="."+t+":"+e,o=n.cssText?function(t){var e=t.getPropertyValue("content");return t.cssText+" content: "+e+";"}(n):function(t){return r.asArray(t).map((function(e){return e+": "+t.getPropertyValue(e)+(t.getPropertyPriority(e)?" !important":"")})).join("; ")+";"}(n);return document.createTextNode(i+"{"+o+"}")}(s,n,i)),e.appendChild(a)}(n)}))}function o(){t instanceof HTMLTextAreaElement&&(e.innerHTML=t.value),t instanceof HTMLInputElement&&e.setAttribute("value",t.value)}function s(){e instanceof SVGElement&&(e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e instanceof SVGRectElement&&["width","height"].forEach((function(t){var r=e.getAttribute(t);r&&e.style.setProperty(t,r)})))}}(e,t)})):Promise.resolve();function o(e,n,i){var o=e.childNodes;return 0===o.length?Promise.resolve(n):s(n,r.asArray(o),i).then((function(){return n}));function s(e,r,n){var i=Promise.resolve();return r.forEach((function(r){i=i.then((function(){return t(r,n)})).then((function(t){t&&e.appendChild(t)}))})),i}}}(t,e.filter,!0)})).then(l).then(f).then((function(t){e.bgcolor&&(t.style.backgroundColor=e.bgcolor);e.width&&(t.style.width=e.width+"px");e.height&&(t.style.height=e.height+"px");e.style&&Object.keys(e.style).forEach((function(r){t.style[r]=e.style[r]}));return t})).then((function(n){return function(t,e,n){return Promise.resolve(t).then((function(t){return t.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(t)})).then(r.escapeXhtml).then((function(t){return'<foreignObject x="0" y="0" width="100%" height="100%">'+t+"</foreignObject>"})).then((function(t){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+n+'">'+t+"</svg>"})).then((function(t){return"data:image/svg+xml;charset=utf-8,"+t}))}(n,e.width||r.width(t),e.height||r.height(t))}))}function c(t,e){return u(t,e).then(r.makeImage).then(r.delay(100)).then((function(n){var i=function(t){var n=document.createElement("canvas");if(n.width=e.width||r.width(t),n.height=e.height||r.height(t),e.bgcolor){var i=n.getContext("2d");i.fillStyle=e.bgcolor,i.fillRect(0,0,n.width,n.height)}return n}(t);return i.getContext("2d").drawImage(n,0,0),i}))}function l(t){return i.resolveAll().then((function(e){var r=document.createElement("style");return t.appendChild(r),r.appendChild(document.createTextNode(e)),t}))}function f(t){return o.inlineAll(t).then((function(){return t}))}t.exports=a}()},function(t,e,r){var n;!function(r,i,o,s){"use strict";var a,u,c={URL:r.URL||r.webkitURL||r.mozURL||r.msURL,getUserMedia:(u=o.getUserMedia||o.webkitGetUserMedia||o.mozGetUserMedia||o.msGetUserMedia,u?u.bind(o):u),requestAnimFrame:r.requestAnimationFrame||r.webkitRequestAnimationFrame||r.mozRequestAnimationFrame||r.oRequestAnimationFrame||r.msRequestAnimationFrame,requestTimeout:function(t,e){if(t=t||c.noop,e=e||0,!c.requestAnimFrame)return setTimeout(t,e);var r=(new Date).getTime(),n=new Object,i=c.requestAnimFrame;return n.value=i((function o(){(new Date).getTime()-r>=e?t.call():n.value=i(o)})),n},Blob:r.Blob||r.BlobBuilder||r.WebKitBlobBuilder||r.MozBlobBuilder||r.MSBlobBuilder,btoa:(a=r.btoa||function(t){for(var e="",r=0,n=t.length,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=void 0,s=void 0,a=void 0,u=void 0,c=void 0,l=void 0,f=void 0;r<n;)u=(o=t.charCodeAt(r++))>>2,c=(3&o)<<4|(s=t.charCodeAt(r++))>>4,l=(15&s)<<2|(a=t.charCodeAt(r++))>>6,f=63&a,isNaN(s)?l=f=64:isNaN(a)&&(f=64),e=e+i.charAt(u)+i.charAt(c)+i.charAt(l)+i.charAt(f);return e},a?a.bind(r):c.noop),isObject:function(t){return t&&"[object Object]"===Object.prototype.toString.call(t)},isEmptyObject:function(t){return c.isObject(t)&&!Object.keys(t).length},isArray:function(t){return t&&Array.isArray(t)},isFunction:function(t){return t&&"function"==typeof t},isElement:function(t){return t&&1===t.nodeType},isString:function(t){return"string"==typeof t||"[object String]"===Object.prototype.toString.call(t)},isSupported:{canvas:function(){var t=i.createElement("canvas");return t&&t.getContext&&t.getContext("2d")},webworkers:function(){return r.Worker},blob:function(){return c.Blob},Uint8Array:function(){return r.Uint8Array},Uint32Array:function(){return r.Uint32Array},videoCodecs:function(){var t=i.createElement("video"),e={mp4:!1,h264:!1,ogv:!1,ogg:!1,webm:!1};try{t&&t.canPlayType&&(e.mp4=""!==t.canPlayType('video/mp4; codecs="mp4v.20.8"'),e.h264=""!==(t.canPlayType('video/mp4; codecs="avc1.42E01E"')||t.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')),e.ogv=""!==t.canPlayType('video/ogg; codecs="theora"'),e.ogg=""!==t.canPlayType('video/ogg; codecs="theora"'),e.webm=-1!==t.canPlayType('video/webm; codecs="vp8, vorbis"'))}catch(t){}return e}()},noop:function(){},each:function(t,e){var r=void 0,n=void 0;if(c.isArray(t))for(r=-1,n=t.length;++r<n&&!1!==e(r,t[r]););else if(c.isObject(t))for(r in t)if(t.hasOwnProperty(r)&&!1===e(r,t[r]))break},mergeOptions:function(t,e){if(c.isObject(t)&&c.isObject(e)&&Object.keys){var r={};return c.each(t,(function(e,n){r[e]=t[e]})),c.each(e,(function(n,i){var o=e[n];c.isObject(o)&&t[n]?r[n]=c.mergeOptions(t[n],o):r[n]=o})),r}},setCSSAttr:function(t,e,r){c.isElement(t)&&(c.isString(e)&&c.isString(r)?t.style[e]=r:c.isObject(e)&&c.each(e,(function(e,r){t.style[e]=r})))},removeElement:function(t){c.isElement(t)&&t.parentNode&&t.parentNode.removeChild(t)},createWebWorker:function(t){if(!c.isString(t))return{};try{var e=new c.Blob([t],{type:"text/javascript"}),r=c.URL.createObjectURL(e);return{objectUrl:r,worker:new Worker(r)}}catch(t){return""+t}},getExtension:function(t){return t.substr(t.lastIndexOf(".")+1,t.length)},getFontSize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!i.body||!1===t.resizeFont)return t.fontSize;var e=t.text,r=t.gifWidth,n=parseInt(t.fontSize,10),o=parseInt(t.minFontSize,10),s=i.createElement("div"),a=i.createElement("span");for(s.setAttribute("width",r),s.appendChild(a),a.innerHTML=e,a.style.fontSize=n+"px",a.style.textIndent="-9999px",a.style.visibility="hidden",i.body.appendChild(a);a.offsetWidth>r&&n>=o;)a.style.fontSize=--n+"px";return i.body.removeChild(a),n+"px"},webWorkerError:!1},l=Object.freeze({default:c}),f={validate:function(t){t=c.isObject(t)?t:{};var e={};return c.each(f.validators,(function(r,n){var i=n.errorCode;if(!t[i]&&!n.condition)return(e=n).error=!0,!1})),delete e.condition,e},isValid:function(t){var e=!0!==f.validate(t).error;return e},validators:[{condition:c.isFunction(c.getUserMedia),errorCode:"getUserMedia",errorMsg:"The getUserMedia API is not supported in your browser"},{condition:c.isSupported.canvas(),errorCode:"canvas",errorMsg:"Canvas elements are not supported in your browser"},{condition:c.isSupported.webworkers(),errorCode:"webworkers",errorMsg:"The Web Workers API is not supported in your browser"},{condition:c.isFunction(c.URL),errorCode:"window.URL",errorMsg:"The window.URL API is not supported in your browser"},{condition:c.isSupported.blob(),errorCode:"window.Blob",errorMsg:"The window.Blob File API is not supported in your browser"},{condition:c.isSupported.Uint8Array(),errorCode:"window.Uint8Array",errorMsg:"The window.Uint8Array function constructor is not supported in your browser"},{condition:c.isSupported.Uint32Array(),errorCode:"window.Uint32Array",errorMsg:"The window.Uint32Array function constructor is not supported in your browser"}],messages:{videoCodecs:{errorCode:"videocodec",errorMsg:"The video codec you are trying to use is not supported in your browser"}}},h=Object.freeze({default:f}),d=function(){},p={sampleInterval:10,numWorkers:2,filter:"",gifWidth:200,gifHeight:200,interval:.1,numFrames:10,frameDuration:1,keepCameraOn:!1,images:[],video:null,webcamVideoElement:null,cameraStream:null,text:"",fontWeight:"normal",fontSize:"16px",minFontSize:"10px",resizeFont:!1,fontFamily:"sans-serif",fontColor:"#ffffff",textAlign:"center",textBaseline:"bottom",textXCoordinate:null,textYCoordinate:null,progressCallback:d,completeCallback:d,saveRenderingContexts:!1,savedRenderingContexts:[],crossOrigin:"Anonymous"},m=Object.freeze({default:p});function v(){return f.isValid()}function b(){var t,e,r,n,i,o=256,s=499,a=491,u=487,c=503,l=3*c,f=o-1,h=4,d=100,p=16,m=1<<p,v=10,b=10,g=m>>b,y=m<<v-b,w=o>>3,S=6,x=1<<S,_=w*x,E=30,C=10,A=1<<C,O=8,T=1<<O,P=C+O,k=1<<P,M=[],j=[],N=[],I=[];function R(t,s,a){var u,c;for(e=t,r=s,n=a,i=new Array(o),u=0;u<o;u++)i[u]=new Array(4),(c=i[u])[0]=c[1]=c[2]=(u<<h+8)/o|0,N[u]=m/o|0,j[u]=0}function F(){for(var t=[],e=new Array(o),r=0;r<o;r++)e[i[r][3]]=r;for(var n=0,s=0;s<o;s++){var a=e[s];t[n++]=i[a][0],t[n++]=i[a][1],t[n++]=i[a][2]}return t}function L(){var t,e,r,n,s,a,u,c;for(u=0,c=0,t=0;t<o;t++){for(r=t,n=(s=i[t])[1],e=t+1;e<o;e++)(a=i[e])[1]<n&&(r=e,n=a[1]);if(a=i[r],t!=r&&(e=a[0],a[0]=s[0],s[0]=e,e=a[1],a[1]=s[1],s[1]=e,e=a[2],a[2]=s[2],s[2]=e,e=a[3],a[3]=s[3],s[3]=e),n!=u){for(M[u]=c+t>>1,e=u+1;e<n;e++)M[e]=t;u=n,c=t}}for(M[u]=c+f>>1,e=u+1;e<256;e++)M[e]=f}function U(){var i,o,f,p,m,v,b,g,y,w,x,C,O,P;for(r<l&&(n=1),t=30+(n-1)/3,C=e,O=0,P=r,w=(x=r/(3*n))/d|0,g=A,(b=(v=_)>>S)<=1&&(b=0),i=0;i<b;i++)I[i]=g*((b*b-i*i)*T/(b*b));for(y=r<l?3:r%s!=0?3*s:r%a!=0?3*a:r%u!=0?3*u:3*c,i=0;i<x;)if(H(g,o=z(f=(255&C[O+0])<<h,p=(255&C[O+1])<<h,m=(255&C[O+2])<<h),f,p,m),0!==b&&W(b,o,f,p,m),(O+=y)>=P&&(O-=r),0===w&&(w=1),++i%w==0)for(g-=g/t,(b=(v-=v/E)>>S)<=1&&(b=0),o=0;o<b;o++)I[o]=g*((b*b-o*o)*T/(b*b))}function V(t,e,r){var n,s,a,u,c,l,f;for(c=1e3,f=-1,s=(n=M[e])-1;n<o||s>=0;)n<o&&((a=(l=i[n])[1]-e)>=c?n=o:(n++,a<0&&(a=-a),(u=l[0]-t)<0&&(u=-u),(a+=u)<c&&((u=l[2]-r)<0&&(u=-u),(a+=u)<c&&(c=a,f=l[3])))),s>=0&&((a=e-(l=i[s])[1])>=c?s=-1:(s--,a<0&&(a=-a),(u=l[0]-t)<0&&(u=-u),(a+=u)<c&&((u=l[2]-r)<0&&(u=-u),(a+=u)<c&&(c=a,f=l[3]))));return f}function D(){return U(),B(),L(),F()}function B(){var t;for(t=0;t<o;t++)i[t][0]>>=h,i[t][1]>>=h,i[t][2]>>=h,i[t][3]=t}function W(t,e,r,n,s){var a,u,c,l,f,h,d;for((c=e-t)<-1&&(c=-1),(l=e+t)>o&&(l=o),a=e+1,u=e-1,h=1;a<l||u>c;){if(f=I[h++],a<l){d=i[a++];try{d[0]-=f*(d[0]-r)/k|0,d[1]-=f*(d[1]-n)/k|0,d[2]-=f*(d[2]-s)/k|0}catch(t){}}if(u>c){d=i[u--];try{d[0]-=f*(d[0]-r)/k|0,d[1]-=f*(d[1]-n)/k|0,d[2]-=f*(d[2]-s)/k|0}catch(t){}}}}function H(t,e,r,n,o){var s=i[e],a=t/A;s[0]-=a*(s[0]-r)|0,s[1]-=a*(s[1]-n)|0,s[2]-=a*(s[2]-o)|0}function z(t,e,r){var n,s,a,u,c,l,f,d,m,w;for(m=d=~(1<<31),f=l=-1,n=0;n<o;n++)(s=(w=i[n])[0]-t)<0&&(s=-s),(a=w[1]-e)<0&&(a=-a),s+=a,(a=w[2]-r)<0&&(a=-a),(s+=a)<d&&(d=s,l=n),(u=s-(j[n]>>p-h))<m&&(m=u,f=n),c=N[n]>>b,N[n]-=c,j[n]+=c<<v;return N[l]+=g,j[l]-=y,f}R.apply(this,arguments);var Y={};return Y.map=V,Y.process=D,Y}function g(){try{this.onmessage=function(e){var r,n=e.data||{};n.gifshot&&(r=t.run(n),postMessage(r))}}catch(t){}var t={dataToRGB:function(t,e,r){for(var n=e*r*4,i=0,o=[];i<n;)o.push(t[i++]),o.push(t[i++]),o.push(t[i++]),i++;return o},componentizedPaletteToArray:function(t){t=t||[];for(var e=[],r=0;r<t.length;r+=3){var n=t[r],i=t[r+1],o=t[r+2];e.push(n<<16|i<<8|o)}return e},processFrameWithQuantizer:function(t,e,r,n){for(var i=this.dataToRGB(t,e,r),o=new b(i,i.length,n),s=o.process(),a=new Uint32Array(this.componentizedPaletteToArray(s)),u=e*r,c=new Uint8Array(u),l=0,f=0;f<u;f++){var h=i[l++],d=i[l++],p=i[l++];c[f]=o.map(h,d,p)}return{pixels:c,palette:a}},run:function(t){var e=t=t||{},r=e.height,n=(e.palette,e.sampleInterval),i=e.width,o=t.data;return this.processFrameWithQuantizer(o,i,r,n)}};return t}function y(t,e,r,n){var i=0,o=void 0===(n=void 0===n?{}:n).loop?null:n.loop,s=void 0===n.palette?null:n.palette;if(e<=0||r<=0||e>65535||r>65535)throw"Width/Height invalid.";t[i++]=71,t[i++]=73,t[i++]=70,t[i++]=56,t[i++]=57,t[i++]=97;if(t[i++]=255&e,t[i++]=e>>8&255,t[i++]=255&r,t[i++]=r>>8&255,t[i++]=0|(null!==s?128:0),t[i++]=0,t[i++]=0,null!==o){if(o<0||o>65535)throw"Loop count invalid.";t[i++]=33,t[i++]=255,t[i++]=11,t[i++]=78,t[i++]=69,t[i++]=84,t[i++]=83,t[i++]=67,t[i++]=65,t[i++]=80,t[i++]=69,t[i++]=50,t[i++]=46,t[i++]=48,t[i++]=3,t[i++]=1,t[i++]=255&o,t[i++]=o>>8&255,t[i++]=0}var a=!1;this.addFrame=function(e,r,n,o,u,c){if(!0===a&&(--i,a=!1),c=void 0===c?{}:c,e<0||r<0||e>65535||r>65535)throw"x/y invalid.";if(n<=0||o<=0||n>65535||o>65535)throw"Width/Height invalid.";if(u.length<n*o)throw"Not enough pixels for the frame size.";var l=!0,f=c.palette;if(null==f&&(l=!1,f=s),null==f)throw"Must supply either a local or global palette.";for(var h=function(t){var e=t.length;if(e<2||e>256||e&e-1)throw"Invalid code/color length, must be power of 2 and 2 .. 256.";return e}(f),d=0;h>>=1;)++d;h=1<<d;var p=void 0===c.delay?0:c.delay,m=void 0===c.disposal?0:c.disposal;if(m<0||m>3)throw"Disposal out of range.";var v=!1,b=0;if(void 0!==c.transparent&&null!==c.transparent&&(v=!0,(b=c.transparent)<0||b>=h))throw"Transparent color index.";if((0!==m||v||0!==p)&&(t[i++]=33,t[i++]=249,t[i++]=4,t[i++]=m<<2|(!0===v?1:0),t[i++]=255&p,t[i++]=p>>8&255,t[i++]=b,t[i++]=0),t[i++]=44,t[i++]=255&e,t[i++]=e>>8&255,t[i++]=255&r,t[i++]=r>>8&255,t[i++]=255&n,t[i++]=n>>8&255,t[i++]=255&o,t[i++]=o>>8&255,t[i++]=!0===l?128|d-1:0,!0===l)for(var g=0,y=f.length;g<y;++g){var w=f[g];t[i++]=w>>16&255,t[i++]=w>>8&255,t[i++]=255&w}i=function(t,e,r,n){t[e++]=r;var i=e++,o=1<<r,s=o-1,a=o+1,u=a+1,c=r+1,l=0,f=0;function h(r){for(;l>=r;)t[e++]=255&f,f>>=8,l-=8,e===i+256&&(t[i]=255,i=e++)}function d(t){f|=t<<l,l+=c,h(8)}var p=n[0]&s,m={};d(o);for(var v=1,b=n.length;v<b;++v){var g=n[v]&s,y=p<<8|g,w=m[y];if(void 0===w){for(f|=p<<l,l+=c;l>=8;)t[e++]=255&f,f>>=8,l-=8,e===i+256&&(t[i]=255,i=e++);4096===u?(d(o),u=a+1,c=r+1,m={}):(u>=1<<c&&++c,m[y]=u++),p=g}else p=w}d(p),d(a),h(1),i+1===e?t[i]=0:(t[i]=e-i-1,t[e++]=0);return e}(t,i,d<2?2:d,u)},this.end=function(){return!1===a&&(t[i++]=59,a=!0),i}}var w=function(){},S=function(t){this.canvas=null,this.ctx=null,this.repeat=0,this.frames=[],this.numRenderedFrames=0,this.onRenderCompleteCallback=w,this.onRenderProgressCallback=w,this.workers=[],this.availableWorkers=[],this.generatingGIF=!1,this.options=t,this.initializeWebWorkers(t)};function x(t,e){t.getBase64GIF((function(t){e({error:!1,errorCode:"",errorMsg:"",image:t})}))}S.prototype={workerMethods:g(),initializeWebWorkers:function(t){var e,r=b.toString()+"("+g.toString()+"());",n=void 0,o=void 0,s=void 0,a=-1,u="";for(e=t.numWorkers;++a<e;)n=c.createWebWorker(r),c.isObject(n)?(o=n.objectUrl,s=n.worker,this.workers.push({worker:s,objectUrl:o}),this.availableWorkers.push(s)):(u=n,c.webWorkerError=!!n);this.workerError=u,this.canvas=i.createElement("canvas"),this.canvas.width=t.gifWidth,this.canvas.height=t.gifHeight,this.ctx=this.canvas.getContext("2d"),this.frames=[]},getWorker:function(){return this.availableWorkers.pop()},freeWorker:function(t){this.availableWorkers.push(t)},byteMap:function(){for(var t=[],e=0;e<256;e++)t[e]=String.fromCharCode(e);return t}(),bufferToString:function(t){for(var e=t.length,r="",n=-1;++n<e;)r+=this.byteMap[t[n]];return r},onFrameFinished:function(t){var e=this,r=e.frames,n=!!(e.options.images||[]).length,i=r.every((function(t){return!t.beingProcessed&&t.done}));e.numRenderedFrames++,n&&t(e.numRenderedFrames/r.length),e.onRenderProgressCallback(.75*e.numRenderedFrames/r.length),i?e.generatingGIF||e.generateGIF(r,e.onRenderCompleteCallback):c.requestTimeout((function(){e.processNextFrame()}),1)},processFrame:function(t){var e=this,r=(this.options,this.options),n=r.progressCallback,i=r.sampleInterval,o=this.frames,s=void 0,a=void 0,u=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data;delete s.data,s.pixels=Array.prototype.slice.call(r.pixels),s.palette=Array.prototype.slice.call(r.palette),s.done=!0,s.beingProcessed=!1,e.freeWorker(a),e.onFrameFinished(n)};(s=o[t]).beingProcessed||s.done?this.onFrameFinished():(s.sampleInterval=i,s.beingProcessed=!0,s.gifshot=!0,(a=this.getWorker())?(a.onmessage=u,a.postMessage(s)):u({data:e.workerMethods.run(s)}))},startRendering:function(t){this.onRenderCompleteCallback=t;for(var e=0;e<this.options.numWorkers&&e<this.frames.length;e++)this.processFrame(e)},processNextFrame:function(){for(var t=-1,e=0;e<this.frames.length;e++){var r=this.frames[e];if(!r.done&&!r.beingProcessed){t=e;break}}t>=0&&this.processFrame(t)},generateGIF:function(t,e){var r=[],n={loop:this.repeat},i=this.options,o=i.interval,s=i.frameDuration,a=!!i.images.length,u=i.gifHeight,l=i.gifWidth,f=new y(r,l,u,n),h=this.onRenderProgressCallback,d=a?100*o:0,p=void 0;this.generatingGIF=!0,c.each(t,(function(e,r){var n=r.palette;h(.75+.25*r.position*1/t.length);for(var i=0;i<s;i++)f.addFrame(0,0,l,u,r.pixels,{palette:n,delay:d})})),f.end(),h(1),this.frames=[],this.generatingGIF=!1,c.isFunction(e)&&(p=this.bufferToString(r),e("data:image/gif;base64,"+c.btoa(p)))},setRepeat:function(t){this.repeat=t},addFrame:function(t,e){e=c.isObject(e)?e:{};var r=this.ctx,n=this.options,i=n.gifWidth,o=n.gifHeight,s=c.getFontSize(e),a=e,u=a.filter,l=a.fontColor,f=a.fontFamily,h=a.fontWeight,d=(a.gifHeight,a.gifWidth,a.text),p=a.textAlign,m=a.textBaseline,v=e.textXCoordinate?e.textXCoordinate:"left"===p?1:"right"===p?i:i/2,b=e.textYCoordinate?e.textYCoordinate:"top"===m?1:"center"===m?o/2:o,g=h+" "+s+" "+f,y=void 0;try{r.filter=u,r.drawImage(t,0,0,i,o),d&&(r.font=g,r.fillStyle=l,r.textAlign=p,r.textBaseline=m,r.fillText(d,v,b)),y=r.getImageData(0,0,i,o),this.addFrameImageData(y)}catch(t){return""+t}},addFrameImageData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.frames,r=t.data;this.frames.push({data:r,width:t.width,height:t.height,palette:null,dithering:null,done:!1,beingProcessed:!1,position:e.length})},onRenderProgress:function(t){this.onRenderProgressCallback=t},isRendering:function(){return this.generatingGIF},getBase64GIF:function(t){var e=this;e.startRendering((function(r){e.destroyWorkers(),c.requestTimeout((function(){t(r)}),0)}))},destroyWorkers:function(){if(!this.workerError){var t=this.workers;c.each(t,(function(t,e){var r=e.worker,n=e.objectUrl;r.terminate(),c.URL.revokeObjectURL(n)}))}}};var _=function(){},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];e=c.isFunction(e)?e:_;var r=i.createElement("canvas"),n=void 0,o=t.images,s=!!o.length,a=t.cameraStream,u=t.crop,l=t.filter,f=t.fontColor,h=t.fontFamily,d=t.fontWeight,p=t.keepCameraOn,m=(t.numWorkers,t.progressCallback),v=t.saveRenderingContexts,b=t.savedRenderingContexts,g=t.text,y=t.textAlign,w=t.textBaseline,x=t.videoElement,E=t.videoHeight,C=t.videoWidth,A=t.webcamVideoElement,O=Number(t.gifWidth),T=Number(t.gifHeight),P=Number(t.interval),k=(Number(t.sampleInterval),s?0:1e3*P),M=[],j=b.length?b.length:t.numFrames,N=j,I=new S(t),R=c.getFontSize(t),F=t.textXCoordinate?t.textXCoordinate:"left"===y?1:"right"===y?O:O/2,L=t.textYCoordinate?t.textYCoordinate:"top"===w?1:"center"===w?T/2:T,U=d+" "+R+" "+h,V=u?Math.floor(u.scaledWidth/2):0,D=u?C-u.scaledWidth:0,B=u?Math.floor(u.scaledHeight/2):0,W=u?E-u.scaledHeight:0,H=function t(){var r=N-1;function i(){var i;v&&M.push(n.getImageData(0,0,O,T)),g&&(n.font=U,n.fillStyle=f,n.textAlign=y,n.textBaseline=w,n.fillText(g,F,L)),i=n.getImageData(0,0,O,T),I.addFrameImageData(i),m((j-(N=r))/j),r>0&&c.requestTimeout(t,k),N||I.getBase64GIF((function(t){e({error:!1,errorCode:"",errorMsg:"",image:t,cameraStream:a,videoElement:x,webcamVideoElement:A,savedRenderingContexts:M,keepCameraOn:p})}))}b.length?(n.putImageData(b[j-N],0,0),i()):function t(){try{D>C&&(D=C),W>E&&(W=E),V<0&&(V=0),B<0&&(B=0),n.filter=l,n.drawImage(x,V,B,D,W,0,0,O,T),i()}catch(e){if("NS_ERROR_NOT_AVAILABLE"!==e.name)throw e;c.requestTimeout(t,100)}}()};j=void 0!==j?j:10,P=void 0!==P?P:.1,r.width=O,r.height=T,n=r.getContext("2d"),function t(){b.length||0!==x.currentTime?H():c.requestTimeout(t,100)}()},C=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.videoWidth,r=t.videoHeight,n=t.gifWidth,i=t.gifHeight,o={width:0,height:0,scaledWidth:0,scaledHeight:0};return e>r?(o.width=Math.round(e*(i/r))-n,o.scaledWidth=Math.round(o.width*(r/i))):(o.height=Math.round(r*(n/e))-i,o.scaledHeight=Math.round(o.height*(e/n))),o},A={loadedData:!1,defaultVideoDimensions:{width:640,height:480},findVideoSize:function t(e){t.attempts=t.attempts||0;var r=e.cameraStream,n=e.completedCallback,i=e.videoElement;i&&(i.videoWidth>0&&i.videoHeight>0?(i.removeEventListener("loadeddata",A.findVideoSize),n({videoElement:i,cameraStream:r,videoWidth:i.videoWidth,videoHeight:i.videoHeight})):t.attempts<10?(t.attempts+=1,c.requestTimeout((function(){A.findVideoSize(e)}),400)):n({videoElement:i,cameraStream:r,videoWidth:A.defaultVideoDimensions.width,videoHeight:A.defaultVideoDimensions.height}))},onStreamingTimeout:function(t){c.isFunction(t)&&t({error:!0,errorCode:"getUserMedia",errorMsg:"There was an issue with the getUserMedia API - Timed out while trying to start streaming",image:null,cameraStream:{}})},stream:function(t){var e=c.isArray(t.existingVideo)?t.existingVideo[0]:t.existingVideo,r=t.cameraStream,n=t.completedCallback,i=t.streamedCallback,o=t.videoElement;if(c.isFunction(i)&&i(),e){if(c.isString(e))o.src=e,o.innerHTML='<source src="'+e+'" type="video/'+c.getExtension(e)+'" />';else if(e instanceof Blob){try{o.src=c.URL.createObjectURL(e)}catch(t){}o.innerHTML='<source src="'+e+'" type="'+e.type+'" />'}}else if(o.mozSrcObject)o.mozSrcObject=r;else if(c.URL)try{o.srcObject=r,o.src=c.URL.createObjectURL(r)}catch(t){o.srcObject=r}o.play(),c.requestTimeout((function t(){t.count=t.count||0,!0===A.loadedData?(A.findVideoSize({videoElement:o,cameraStream:r,completedCallback:n}),A.loadedData=!1):(t.count+=1)>10?A.findVideoSize({videoElement:o,cameraStream:r,completedCallback:n}):t()}),0)},startStreaming:function(t){var e=c.isFunction(t.error)?t.error:c.noop,r=c.isFunction(t.streamed)?t.streamed:c.noop,n=c.isFunction(t.completed)?t.completed:c.noop,o=t.crossOrigin,s=t.existingVideo,a=t.lastCameraStream,u=t.options,l=t.webcamVideoElement,f=c.isElement(s)?s:l||i.createElement("video");o&&(f.crossOrigin=u.crossOrigin),f.autoplay=!0,f.loop=!0,f.muted=!0,f.addEventListener("loadeddata",(function(t){A.loadedData=!0,u.offset&&(f.currentTime=u.offset)})),s?A.stream({videoElement:f,existingVideo:s,completedCallback:n}):a?A.stream({videoElement:f,cameraStream:a,streamedCallback:r,completedCallback:n}):c.getUserMedia({video:!0},(function(t){A.stream({videoElement:f,cameraStream:t,streamedCallback:r,completedCallback:n})}),e)},startVideoStreaming:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=void 0!==e.timeout?e.timeout:0,n=e.callback,i=e.webcamVideoElement,o=void 0;r>0&&(o=c.requestTimeout((function(){A.onStreamingTimeout(n)}),1e4)),A.startStreaming({error:function(){n({error:!0,errorCode:"getUserMedia",errorMsg:"There was an issue with the getUserMedia API - the user probably denied permission",image:null,cameraStream:{}})},streamed:function(){clearTimeout(o)},completed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.cameraStream,n=e.videoElement,i=e.videoHeight,o=e.videoWidth;t({cameraStream:r,videoElement:n,videoHeight:i,videoWidth:o})},lastCameraStream:e.lastCameraStream,webcamVideoElement:i,crossOrigin:e.crossOrigin,options:e})},stopVideoStreaming:function(t){var e=t=c.isObject(t)?t:{},r=e.keepCameraOn,n=e.videoElement,i=e.webcamVideoElement,o=t.cameraStream||{},s=o.getTracks&&o.getTracks()||[],a=!!s.length,u=s[0];!r&&a&&c.isFunction(u.stop)&&u.stop(),c.isElement(n)&&!i&&(n.pause(),c.isFunction(c.URL.revokeObjectURL)&&!c.webWorkerError&&n.src&&c.URL.revokeObjectURL(n.src),c.removeElement(n))}};function O(t){t=c.isObject(t)?t:{},A.stopVideoStreaming(t)}function T(t,e){var r=t.options||{},n=r.images,o=r.video,s=Number(r.gifWidth),a=Number(r.gifHeight),u=(Number(r.numFrames),t.cameraStream),l=t.videoElement,f=t.videoWidth,h=t.videoHeight,d=C({videoWidth:f,videoHeight:h,gifHeight:a,gifWidth:s}),p=e;r.crop=d,r.videoElement=l,r.videoWidth=f,r.videoHeight=h,r.cameraStream=u,c.isElement(l)&&(l.width=s+d.width,l.height=a+d.height,r.webcamVideoElement||(c.setCSSAttr(l,{position:"fixed",opacity:"0"}),i.body.appendChild(l)),l.play(),E(r,(function(t){n&&n.length||o&&o.length||O(t),p(t)})))}function P(t,e){if(e=c.isFunction(t)?t:e,t=c.isObject(t)?t:{},c.isFunction(e)){var r=c.mergeOptions(p,t)||{},n=t.cameraStream,o=r.images,s=o?o.length:0,a=r.video,u=r.webcamVideoElement;r=c.mergeOptions(r,{gifWidth:Math.floor(r.gifWidth),gifHeight:Math.floor(r.gifHeight)}),s?function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.callback,r=t.images,n=t.options,o=t.imagesLength,s={getUserMedia:!0,"window.URL":!0},a=f.validate(s),u=[],l=0,h=void 0,d=void 0;if(a.error)return e(a);function p(){c.each(u,(function(t,e){e&&(e.text?d.addFrame(e.img,n,e.text):d.addFrame(e,n))})),x(d,e)}d=new S(n),c.each(r,(function(t,r){var s=r;r.src&&(s=s.src),c.isElement(s)?(n.crossOrigin&&(s.crossOrigin=n.crossOrigin),u[t]=s,(l+=1)===o&&p()):c.isString(s)&&(h=new Image,n.crossOrigin&&(h.crossOrigin=n.crossOrigin),function(n){r.text&&(n.text=r.text),n.onerror=function(t){var r=void 0;if(0===--o)return(r={}).error="None of the requested images was capable of being retrieved",e(r)},n.onload=function(e){r.text?u[t]={img:n,text:n.text}:u[t]=n,(l+=1)===o&&p(),c.removeElement(n)},n.src=s}(h),c.setCSSAttr(h,{position:"fixed",opacity:"0"}),i.body.appendChild(h))}))}({images:o,imagesLength:s,callback:e,options:r}):a?function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.callback,r=t.existingVideo,n=t.options,i={getUserMedia:!0,"window.URL":!0},o=f.validate(i),s=void 0,a=void 0;if(o.error)return e(o);if(c.isElement(r)&&r.src){if(a=r.src,s=c.getExtension(a),!c.isSupported.videoCodecs[s])return e(f.messages.videoCodecs)}else c.isArray(r)&&c.each(r,(function(t,e){if(s=e instanceof Blob?e.type.substr(e.type.lastIndexOf("/")+1,e.length):e.substr(e.lastIndexOf(".")+1,e.length),c.isSupported.videoCodecs[s])return r=e,!1}));A.startStreaming({completed:function(t){t.options=n||{},T(t,e)},existingVideo:r,crossOrigin:n.crossOrigin,options:n})}({existingVideo:a,callback:e,options:r}):function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.callback,r=t.lastCameraStream,n=t.options,i=t.webcamVideoElement;if(!v())return e(f.validate());n.savedRenderingContexts.length?E(n,(function(t){e(t)})):A.startVideoStreaming((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.options=n||{},T(t,e)}),{lastCameraStream:r,callback:e,webcamVideoElement:i,crossOrigin:n.crossOrigin})}({lastCameraStream:n,callback:e,webcamVideoElement:u,options:r})}}var k={utils:l,error:h,defaultOptions:m,createGIF:P,takeSnapShot:function(t,e){if(e=c.isFunction(t)?t:e,t=c.isObject(t)?t:{},c.isFunction(e)){var r=c.mergeOptions(p,t);P(c.mergeOptions(r,{interval:.1,numFrames:1,gifWidth:Math.floor(r.gifWidth),gifHeight:Math.floor(r.gifHeight)}),e)}},stopVideoStreaming:O,isSupported:function(){return f.isValid()},isWebCamGIFSupported:v,isExistingVideoGIFSupported:function(t){var e=!1;if(c.isArray(t)&&t.length){if(c.each(t,(function(t,r){c.isSupported.videoCodecs[r]&&(e=!0)})),!e)return!1}else if(c.isString(t)&&t.length&&!c.isSupported.videoCodecs[t])return!1;return f.isValid({getUserMedia:!0})},isExistingImagesGIFSupported:function(){return f.isValid({getUserMedia:!0})},VERSION:"0.4.5"};void 0===(n=function(){return k}.apply(e,[]))||(t.exports=n)}("undefined"!=typeof window?window:{},"undefined"!=typeof document?document:{createElement:function(){}},"undefined"!=typeof window?window.navigator:{})},function(t,e,r){var n,i=i||function(t){"use strict";if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=t.document,r=function(){return t.URL||t.webkitURL||t},n=e.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in n,o=/constructor/i.test(t.HTMLElement)||t.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),a=function(e){(t.setImmediate||t.setTimeout)((function(){throw e}),0)},u=function(t){setTimeout((function(){"string"==typeof t?r().revokeObjectURL(t):t.remove()}),4e4)},c=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},l=function(e,l,f){f||(e=c(e));var h,d=this,p="application/octet-stream"===e.type,m=function(){!function(t,e,r){for(var n=(e=[].concat(e)).length;n--;){var i=t["on"+e[n]];if("function"==typeof i)try{i.call(t,r||t)}catch(t){a(t)}}}(d,"writestart progress write writeend".split(" "))};if(d.readyState=d.INIT,i)return h=r().createObjectURL(e),void setTimeout((function(){var t,e;n.href=h,n.download=l,t=n,e=new MouseEvent("click"),t.dispatchEvent(e),m(),u(h),d.readyState=d.DONE}));!function(){if((s||p&&o)&&t.FileReader){var n=new FileReader;return n.onloadend=function(){var e=s?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,d.readyState=d.DONE,m()},n.readAsDataURL(e),void(d.readyState=d.INIT)}(h||(h=r().createObjectURL(e)),p)?t.location.href=h:t.open(h,"_blank")||(t.location.href=h);d.readyState=d.DONE,m(),u(h)}()},f=l.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,r){return e=e||t.name||"download",r||(t=c(t)),navigator.msSaveOrOpenBlob(t,e)}:(f.abort=function(){},f.readyState=f.INIT=0,f.WRITING=1,f.DONE=2,f.error=f.onwritestart=f.onprogress=f.onwrite=f.onabort=f.onerror=f.onwriteend=null,function(t,e,r){return new l(t,e||t.name||"download",r)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */t.exports?t.exports.saveAs=i:null!==r(17)&&null!==r(18)&&(void 0===(n=function(){return i}.call(e,r,e,t))||(t.exports=n))},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e,r){"use strict";(function(t){var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n};Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,r){this.name=t,this.version=e,this.os=r,this.type="browser"};e.BrowserInfo=n;var i=function(e){this.version=e,this.type="node",this.name="node",this.os=t.platform};e.NodeInfo=i;var o=function(t,e,r,n){this.name=t,this.version=e,this.os=r,this.bot=n,this.type="bot-device"};e.SearchBotDeviceInfo=o;var s=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null};e.BotInfo=s;var a=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null};e.ReactNativeInfo=a;var u=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,c=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/Edg\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],l=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function f(t){return""!==t&&c.reduce((function(e,r){var n=r[0],i=r[1];if(e)return e;var o=i.exec(t);return!!o&&[n,o]}),!1)}function h(t){var e=f(t);if(!e)return null;var i=e[0],a=e[1];if("searchbot"===i)return new s;var c=a[1]&&a[1].split(/[._]/).slice(0,3);c?c.length<3&&(c=r(c,function(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}(3-c.length))):c=[];var l=c.join("."),h=d(t),p=u.exec(t);return p&&p[1]?new o(i,l,h,p[1]):new n(i,c.join("."),h)}function d(t){for(var e=0,r=l.length;e<r;e++){var n=l[e],i=n[0];if(n[1].exec(t))return i}return null}function p(){return void 0!==t&&t.version?new i(t.version.slice(1)):null}e.detect=function(t){return t?h(t):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new a:"undefined"!=typeof navigator?h(navigator.userAgent):p()},e.browserName=function(t){var e=f(t);return e?e[0]:null},e.parseUserAgent=h,e.detectOS=d,e.getNodeVersion=p}).call(this,r(20))},function(t,e){var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var u,c=[],l=!1,f=-1;function h(){l&&u&&(l=!1,u.length?c=u.concat(c):f=-1,c.length&&d())}function d(){if(!l){var t=a(h);l=!0;for(var e=c.length;e;){for(u=c,c=[];++f<e;)u&&u[f].run();f=-1,e=c.length}u=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];c.push(new p(t,e)),1!==c.length||l||a(d)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),s=r(26),a=r(27);e.take=function(t){return function(e){return 0===t?a.empty():e.lift(new u(t))}};var u=function(){function t(t){if(this.total=t,this.total<0)throw new s.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e.subscribe(new c(t,this.total))},t}(),c=function(t){function e(e,r){var n=t.call(this,e)||this;return n.total=r,n.count=0,n}return i(e,t),e.prototype._next=function(t){var e=this.total,r=++this.count;r<=e&&(this.destination.next(t),r===e&&(this.destination.complete(),this.unsubscribe()))},e}(o.Subscriber)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(23),i=r(24),o=r(4),s=r(25),a=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var r=this._parent,a=this._parents,c=this._unsubscribe,l=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var f=-1,h=a?a.length:0;r;)r.remove(this),r=++f<h&&a[f]||null;if(o.isFunction(c))try{c.call(this)}catch(r){e=!0,t=r instanceof s.UnsubscriptionError?u(r.errors):[r]}if(n.isArray(l))for(f=-1,h=l.length;++f<h;){var d=l[f];if(i.isObject(d))try{d.unsubscribe()}catch(r){e=!0,t=t||[],r instanceof s.UnsubscriptionError?t=t.concat(u(r.errors)):t.push(r)}}if(e)throw new s.UnsubscriptionError(t)}},t.prototype.add=function(e){var r=e;switch(typeof e){case"function":r=new t(e);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof t)){var n=r;(r=new t)._subscriptions=[n]}break;default:if(!e)return t.EMPTY;throw new Error("unrecognized teardown "+e+" added to Subscription.")}if(r._addParent(this)){var i=this._subscriptions;i?i.push(r):this._subscriptions=[r]}return r},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},t.prototype._addParent=function(t){var e=this._parent,r=this._parents;return e!==t&&(e?r?-1===r.indexOf(t)&&(r.push(t),!0):(this._parents=[t],!0):(this._parent=t,!0))},t.EMPTY=((e=new t).closed=!0,e),t}();function u(t){return t.reduce((function(t,e){return t.concat(e instanceof s.UnsubscriptionError?e.errors:e)}),[])}e.Subscription=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isObject=function(t){return null!==t&&"object"==typeof t}},function(t,e,r){"use strict";function n(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}Object.defineProperty(e,"__esModule",{value:!0}),n.prototype=Object.create(Error.prototype),e.UnsubscriptionError=n},function(t,e,r){"use strict";function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}Object.defineProperty(e,"__esModule",{value:!0}),n.prototype=Object.create(Error.prototype),e.ArgumentOutOfRangeError=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(28);function i(t){return new n.Observable((function(e){return t.schedule((function(){return e.complete()}))}))}e.EMPTY=new n.Observable((function(t){return t.complete()})),e.empty=function(t){return t?i(t):e.EMPTY},e.emptyScheduled=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(29),i=r(30),o=r(31),s=r(32),a=r(1),u=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n=this.operator,o=i.toSubscriber(t,e,r);if(n?o.add(n.call(o,this.source)):o.add(this.source||a.config.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),a.config.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){a.config.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),n.canReportError(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var r=this;return new(e=c(e))((function(e,n){var i;i=r.subscribe((function(e){try{t(e)}catch(t){n(t),i&&i.unsubscribe()}}),n,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[o.observable]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:s.pipeFromArray(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=c(t))((function(t,r){var n;e.subscribe((function(t){return n=t}),(function(t){return r(t)}),(function(){return t(n)}))}))},t.create=function(e){return new t(e)},t}();function c(t){if(t||(t=a.config.Promise||Promise),!t)throw new Error("no Promise impl found");return t}e.Observable=u},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0);e.canReportError=function(t){for(;t;){var e=t,r=e.closed,i=e.destination,o=e.isStopped;if(r||o)return!1;t=i&&i instanceof n.Subscriber?i:null}return!0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(7),o=r(5);e.toSubscriber=function(t,e,r){if(t){if(t instanceof n.Subscriber)return t;if(t[i.rxSubscriber])return t[i.rxSubscriber]()}return t||e||r?new n.Subscriber(t,e,r):new n.Subscriber(o.empty)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(33);function i(t){return t?1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}:n.noop}e.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i(t)},e.pipeFromArray=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.noop=function(){}},function(t,e,r){},function(t,e,r){"use strict";r.r(e),r.d(e,"Observable",(function(){return E})),r.d(e,"ConnectableObservable",(function(){return I})),r.d(e,"GroupedObservable",(function(){return L})),r.d(e,"observable",(function(){return w})),r.d(e,"Subject",(function(){return k})),r.d(e,"BehaviorSubject",(function(){return V})),r.d(e,"ReplaySubject",(function(){return it})),r.d(e,"AsyncSubject",(function(){return st})),r.d(e,"asapScheduler",(function(){return ht})),r.d(e,"asyncScheduler",(function(){return dt})),r.d(e,"queueScheduler",(function(){return z})),r.d(e,"animationFrameScheduler",(function(){return mt})),r.d(e,"VirtualTimeScheduler",(function(){return vt})),r.d(e,"VirtualAction",(function(){return bt})),r.d(e,"Scheduler",(function(){return W})),r.d(e,"Subscription",(function(){return p})),r.d(e,"Subscriber",(function(){return b})),r.d(e,"Notification",(function(){return et})),r.d(e,"pipe",(function(){return x})),r.d(e,"noop",(function(){return S})),r.d(e,"identity",(function(){return gt})),r.d(e,"isObservable",(function(){return yt})),r.d(e,"ArgumentOutOfRangeError",(function(){return St})),r.d(e,"EmptyError",(function(){return _t})),r.d(e,"ObjectUnsubscribedError",(function(){return O})),r.d(e,"UnsubscriptionError",(function(){return d})),r.d(e,"TimeoutError",(function(){return Ct})),r.d(e,"bindCallback",(function(){return Pt})),r.d(e,"bindNodeCallback",(function(){return jt})),r.d(e,"combineLatest",(function(){return Xt})),r.d(e,"concat",(function(){return re})),r.d(e,"defer",(function(){return ne})),r.d(e,"empty",(function(){return q})),r.d(e,"forkJoin",(function(){return ie})),r.d(e,"from",(function(){return Qt})),r.d(e,"fromEvent",(function(){return se})),r.d(e,"fromEventPattern",(function(){return ae})),r.d(e,"generate",(function(){return ue})),r.d(e,"iif",(function(){return le})),r.d(e,"interval",(function(){return he})),r.d(e,"merge",(function(){return pe})),r.d(e,"never",(function(){return ve})),r.d(e,"of",(function(){return J})),r.d(e,"onErrorResumeNext",(function(){return be})),r.d(e,"pairs",(function(){return ge})),r.d(e,"race",(function(){return we})),r.d(e,"range",(function(){return _e})),r.d(e,"throwError",(function(){return Z})),r.d(e,"timer",(function(){return Ce})),r.d(e,"using",(function(){return Oe})),r.d(e,"zip",(function(){return Te})),r.d(e,"EMPTY",(function(){return Y})),r.d(e,"NEVER",(function(){return me})),r.d(e,"config",(function(){return a}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function i(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function o(t){return"function"==typeof t}var s=!1,a={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;s=t},get useDeprecatedSynchronousErrorHandling(){return s}};function u(t){setTimeout((function(){throw t}))}var c={closed:!0,next:function(t){},error:function(t){if(a.useDeprecatedSynchronousErrorHandling)throw t;u(t)},complete:function(){}},l=Array.isArray||function(t){return t&&"number"==typeof t.length};function f(t){return null!==t&&"object"==typeof t}function h(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}h.prototype=Object.create(Error.prototype);var d=h,p=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var r=this._parent,n=this._parents,i=this._unsubscribe,s=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var a=-1,u=n?n.length:0;r;)r.remove(this),r=++a<u&&n[a]||null;if(o(i))try{i.call(this)}catch(r){e=!0,t=r instanceof d?m(r.errors):[r]}if(l(s))for(a=-1,u=s.length;++a<u;){var c=s[a];if(f(c))try{c.unsubscribe()}catch(r){e=!0,t=t||[],r instanceof d?t=t.concat(m(r.errors)):t.push(r)}}if(e)throw new d(t)}},t.prototype.add=function(e){var r=e;switch(typeof e){case"function":r=new t(e);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof t)){var n=r;(r=new t)._subscriptions=[n]}break;default:if(!e)return t.EMPTY;throw new Error("unrecognized teardown "+e+" added to Subscription.")}if(r._addParent(this)){var i=this._subscriptions;i?i.push(r):this._subscriptions=[r]}return r},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},t.prototype._addParent=function(t){var e=this._parent,r=this._parents;return e!==t&&(e?r?-1===r.indexOf(t)&&(r.push(t),!0):(this._parents=[t],!0):(this._parent=t,!0))},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function m(t){return t.reduce((function(t,e){return t.concat(e instanceof d?e.errors:e)}),[])}var v="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),b=function(t){function e(r,n,i){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=c;break;case 1:if(!r){o.destination=c;break}if("object"==typeof r){r instanceof e?(o.syncErrorThrowable=r.syncErrorThrowable,o.destination=r,r.add(o)):(o.syncErrorThrowable=!0,o.destination=new g(o,r));break}default:o.syncErrorThrowable=!0,o.destination=new g(o,r,n,i)}return o}return i(e,t),e.prototype[v]=function(){return this},e.create=function(t,r,n){var i=new e(t,r,n);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(p),g=function(t){function e(e,r,n,i){var s,a=t.call(this)||this;a._parentSubscriber=e;var u=a;return o(r)?s=r:r&&(s=r.next,n=r.error,i=r.complete,r!==c&&(o((u=Object.create(r)).unsubscribe)&&a.add(u.unsubscribe.bind(u)),u.unsubscribe=a.unsubscribe.bind(a))),a._context=u,a._next=s,a._error=n,a._complete=i,a}return i(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,r=a.useDeprecatedSynchronousErrorHandling;if(this._error)r&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)r?(e.syncErrorValue=t,e.syncErrorThrown=!0):u(t),this.unsubscribe();else{if(this.unsubscribe(),r)throw t;u(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),a.useDeprecatedSynchronousErrorHandling)throw t;u(t)}},e.prototype.__tryOrSetError=function(t,e,r){if(!a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,r)}catch(e){return a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(u(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(b);function y(t){for(;t;){var e=t,r=e.closed,n=e.destination,i=e.isStopped;if(r||i)return!1;t=n&&n instanceof b?n:null}return!0}var w="function"==typeof Symbol&&Symbol.observable||"@@observable";function S(){}function x(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return _(t)}function _(t){return t?1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}:S}var E=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n=this.operator,i=function(t,e,r){if(t){if(t instanceof b)return t;if(t[v])return t[v]()}return t||e||r?new b(t,e,r):new b(c)}(t,e,r);if(n?i.add(n.call(i,this.source)):i.add(this.source||a.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),a.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),y(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var r=this;return new(e=C(e))((function(e,n){var i;i=r.subscribe((function(e){try{t(e)}catch(t){n(t),i&&i.unsubscribe()}}),n,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[w]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:_(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=C(t))((function(t,r){var n;e.subscribe((function(t){return n=t}),(function(t){return r(t)}),(function(){return t(n)}))}))},t.create=function(e){return new t(e)},t}();function C(t){if(t||(t=a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function A(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}A.prototype=Object.create(Error.prototype);var O=A,T=function(t){function e(e,r){var n=t.call(this)||this;return n.subject=e,n.subscriber=r,n.closed=!1,n}return i(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var r=e.indexOf(this.subscriber);-1!==r&&e.splice(r,1)}}},e}(p),P=function(t){function e(e){var r=t.call(this,e)||this;return r.destination=e,r}return i(e,t),e}(b),k=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return i(e,t),e.prototype[v]=function(){return new P(this)},e.prototype.lift=function(t){var e=new M(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new O;if(!this.isStopped)for(var e=this.observers,r=e.length,n=e.slice(),i=0;i<r;i++)n[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new O;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,r=e.length,n=e.slice(),i=0;i<r;i++)n[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new O;this.isStopped=!0;for(var t=this.observers,e=t.length,r=t.slice(),n=0;n<e;n++)r[n].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new O;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new O;return this.hasError?(t.error(this.thrownError),p.EMPTY):this.isStopped?(t.complete(),p.EMPTY):(this.observers.push(t),new T(this,t))},e.prototype.asObservable=function(){var t=new E;return t.source=this,t},e.create=function(t,e){return new M(t,e)},e}(E),M=function(t){function e(e,r){var n=t.call(this)||this;return n.destination=e,n.source=r,n}return i(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):p.EMPTY},e}(k);var j=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var r=this.connectable;r._refCount++;var n=new N(t,r),i=e.subscribe(n);return n.closed||(n.connection=r.connect()),i},t}(),N=function(t){function e(e,r){var n=t.call(this,e)||this;return n.connectable=r,n}return i(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var r=this.connection,n=t._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},e}(b),I=function(t){function e(e,r){var n=t.call(this)||this;return n.source=e,n.subjectFactory=r,n._refCount=0,n._isComplete=!1,n}return i(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new p).add(this.source.subscribe(new F(this.getSubject(),this))),t.closed?(this._connection=null,t=p.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return(t=this).lift(new j(t));var t},e}(E),R=I.prototype,F=(R._subscribe,R._isComplete,R.getSubject,R.connect,R.refCount,function(t){function e(e,r){var n=t.call(this,e)||this;return n.connectable=r,n}return i(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(P));var L=function(t){function e(e,r,n){var i=t.call(this)||this;return i.key=e,i.groupSubject=r,i.refCountSubscription=n,i}return i(e,t),e.prototype._subscribe=function(t){var e=new p,r=this.refCountSubscription,n=this.groupSubject;return r&&!r.closed&&e.add(new U(r)),e.add(n.subscribe(t)),e},e}(E),U=function(t){function e(e){var r=t.call(this)||this;return r.parent=e,e.count++,r}return i(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(p),V=function(t){function e(e){var r=t.call(this)||this;return r._value=e,r}return i(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var r=t.prototype._subscribe.call(this,e);return r&&!r.closed&&e.next(this._value),r},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new O;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(k),D=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.scheduler=e,n.work=r,n.pending=!1,n}return i(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},e.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),setInterval(t.flush.bind(t,this),r)},e.prototype.recycleAsyncId=function(t,e,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var r=!1,n=void 0;try{this.work(t)}catch(t){r=!0,n=!!t&&t||new Error(t)}if(r)return this.unsubscribe(),n},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,r=e.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,r){return t.call(this)||this}return i(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(p)),B=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.scheduler=e,n.work=r,n}return i(e,t),e.prototype.schedule=function(e,r){return void 0===r&&(r=0),r>0?t.prototype.schedule.call(this,e,r):(this.delay=r,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,r){return r>0||this.closed?t.prototype.execute.call(this,e,r):this._execute(e,r)},e.prototype.requestAsyncId=function(e,r,n){return void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0?t.prototype.requestAsyncId.call(this,e,r,n):e.flush(this)},e}(D),W=function(){function t(e,r){void 0===r&&(r=t.now),this.SchedulerAction=e,this.now=r}return t.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(r,e)},t.now=function(){return Date.now()},t}(),H=function(t){function e(r,n){void 0===n&&(n=W.now);var i=t.call(this,r,(function(){return e.delegate&&e.delegate!==i?e.delegate.now():n()}))||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return i(e,t),e.prototype.schedule=function(r,n,i){return void 0===n&&(n=0),e.delegate&&e.delegate!==this?e.delegate.schedule(r,n,i):t.prototype.schedule.call(this,r,n,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var r;this.active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}},e}(W),z=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(H))(B),Y=new E((function(t){return t.complete()}));function q(t){return t?function(t){return new E((function(e){return t.schedule((function(){return e.complete()}))}))}(t):Y}function G(t){return t&&"function"==typeof t.schedule}var X,$=function(t){return function(e){for(var r=0,n=t.length;r<n&&!e.closed;r++)e.next(t[r]);e.closed||e.complete()}};function K(t,e){return new E(e?function(r){var n=new p,i=0;return n.add(e.schedule((function(){i!==t.length?(r.next(t[i++]),r.closed||n.add(this.schedule())):r.complete()}))),n}:$(t))}function Q(t){var e=new E((function(e){e.next(t),e.complete()}));return e._isScalar=!0,e.value=t,e}function J(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];switch(G(r)?t.pop():r=void 0,t.length){case 0:return q(r);case 1:return r?K(t,r):Q(t[0]);default:return K(t,r)}}function Z(t,e){return new E(e?function(r){return e.schedule(tt,0,{error:t,subscriber:r})}:function(e){return e.error(t)})}function tt(t){var e=t.error;t.subscriber.error(e)}X||(X={});var et=function(){function t(t,e,r){this.kind=t,this.value=e,this.error=r,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,r){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return r&&r()}},t.prototype.accept=function(t,e,r){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,r)},t.prototype.toObservable=function(){switch(this.kind){case"N":return J(this.value);case"E":return Z(this.error);case"C":return q()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();var rt=function(t){function e(e,r,n){void 0===n&&(n=0);var i=t.call(this,e)||this;return i.scheduler=r,i.delay=n,i}return i(e,t),e.dispatch=function(t){var e=t.notification,r=t.destination;e.observe(r),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(e.dispatch,this.delay,new nt(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(et.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(et.createError(t)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(et.createComplete()),this.unsubscribe()},e}(b),nt=function(){return function(t,e){this.notification=t,this.destination=e}}(),it=function(t){function e(e,r,n){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this)||this;return i.scheduler=n,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=e<1?1:e,i._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return i(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var r=this._events;r.push(e),r.length>this._bufferSize&&r.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new ot(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,r=this._infiniteTimeWindow,n=r?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=n.length;if(this.closed)throw new O;if(this.isStopped||this.hasError?e=p.EMPTY:(this.observers.push(t),e=new T(this,t)),i&&t.add(t=new rt(t,i)),r)for(var s=0;s<o&&!t.closed;s++)t.next(n[s]);else for(s=0;s<o&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||z).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,r=this._windowTime,n=this._events,i=n.length,o=0;o<i&&!(t-n[o].time<r);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&n.splice(0,o),n},e}(k),ot=function(){return function(t,e){this.time=t,this.value=e}}(),st=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return i(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),p.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),p.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(k),at=1,ut={};var ct=function(t){var e=at++;return ut[e]=t,Promise.resolve().then((function(){return function(t){var e=ut[t];e&&e()}(e)})),e},lt=function(t){delete ut[t]},ft=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.scheduler=e,n.work=r,n}return i(e,t),e.prototype.requestAsyncId=function(e,r,n){return void 0===n&&(n=0),null!==n&&n>0?t.prototype.requestAsyncId.call(this,e,r,n):(e.actions.push(this),e.scheduled||(e.scheduled=ct(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,r,n){if(void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,r,n);0===e.actions.length&&(lt(r),e.scheduled=void 0)},e}(D),ht=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,r=this.actions,n=-1,i=r.length;t=t||r.shift();do{if(e=t.execute(t.state,t.delay))break}while(++n<i&&(t=r.shift()));if(this.active=!1,e){for(;++n<i&&(t=r.shift());)t.unsubscribe();throw e}},e}(H))(ft),dt=new H(D),pt=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.scheduler=e,n.work=r,n}return i(e,t),e.prototype.requestAsyncId=function(e,r,n){return void 0===n&&(n=0),null!==n&&n>0?t.prototype.requestAsyncId.call(this,e,r,n):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame((function(){return e.flush(null)}))))},e.prototype.recycleAsyncId=function(e,r,n){if(void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,r,n);0===e.actions.length&&(cancelAnimationFrame(r),e.scheduled=void 0)},e}(D),mt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,r=this.actions,n=-1,i=r.length;t=t||r.shift();do{if(e=t.execute(t.state,t.delay))break}while(++n<i&&(t=r.shift()));if(this.active=!1,e){for(;++n<i&&(t=r.shift());)t.unsubscribe();throw e}},e}(H))(pt),vt=function(t){function e(e,r){void 0===e&&(e=bt),void 0===r&&(r=Number.POSITIVE_INFINITY);var n=t.call(this,e,(function(){return n.frame}))||this;return n.maxFrames=r,n.frame=0,n.index=-1,n}return i(e,t),e.prototype.flush=function(){for(var t,e,r=this.actions,n=this.maxFrames;(e=r[0])&&e.delay<=n&&(r.shift(),this.frame=e.delay,!(t=e.execute(e.state,e.delay))););if(t){for(;e=r.shift();)e.unsubscribe();throw t}},e.frameTimeFactor=10,e}(H),bt=function(t){function e(e,r,n){void 0===n&&(n=e.index+=1);var i=t.call(this,e,r)||this;return i.scheduler=e,i.work=r,i.index=n,i.active=!0,i.index=e.index=n,i}return i(e,t),e.prototype.schedule=function(r,n){if(void 0===n&&(n=0),!this.id)return t.prototype.schedule.call(this,r,n);this.active=!1;var i=new e(this.scheduler,this.work);return this.add(i),i.schedule(r,n)},e.prototype.requestAsyncId=function(t,r,n){void 0===n&&(n=0),this.delay=t.frame+n;var i=t.actions;return i.push(this),i.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(t,e,r){void 0===r&&(r=0)},e.prototype._execute=function(e,r){if(!0===this.active)return t.prototype._execute.call(this,e,r)},e.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},e}(D);function gt(t){return t}function yt(t){return!!t&&(t instanceof E||"function"==typeof t.lift&&"function"==typeof t.subscribe)}function wt(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}wt.prototype=Object.create(Error.prototype);var St=wt;function xt(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}xt.prototype=Object.create(Error.prototype);var _t=xt;function Et(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}Et.prototype=Object.create(Error.prototype);var Ct=Et;function At(t,e){return function(r){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new Ot(t,e))}}var Ot=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new Tt(t,this.project,this.thisArg))},t}(),Tt=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.project=r,i.count=0,i.thisArg=n||i,i}return i(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(b);function Pt(t,e,r){if(e){if(!G(e))return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return Pt(t,r).apply(void 0,n).pipe(At((function(t){return l(t)?e.apply(void 0,t):e(t)})))};r=e}return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i,o=this,s={context:o,subject:i,callbackFunc:t,scheduler:r};return new E((function(n){if(r){var a={args:e,subscriber:n,params:s};return r.schedule(kt,0,a)}if(!i){i=new st;try{t.apply(o,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.next(t.length<=1?t[0]:t),i.complete()}]))}catch(t){y(i)?i.error(t):console.warn(t)}}return i.subscribe(n)}))}}function kt(t){var e=this,r=t.args,n=t.subscriber,i=t.params,o=i.callbackFunc,s=i.context,a=i.scheduler,u=i.subject;if(!u){u=i.subject=new st;try{o.apply(s,r.concat([function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t.length<=1?t[0]:t;e.add(a.schedule(Mt,0,{value:n,subject:u}))}]))}catch(t){u.error(t)}}this.add(u.subscribe(n))}function Mt(t){var e=t.value,r=t.subject;r.next(e),r.complete()}function jt(t,e,r){if(e){if(!G(e))return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return jt(t,r).apply(void 0,n).pipe(At((function(t){return l(t)?e.apply(void 0,t):e(t)})))};r=e}return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i={subject:void 0,args:e,callbackFunc:t,scheduler:r,context:this};return new E((function(n){var o=i.context,s=i.subject;if(r)return r.schedule(Nt,0,{params:i,subscriber:n,context:o});if(!s){s=i.subject=new st;try{t.apply(o,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.shift();r?s.error(r):(s.next(t.length<=1?t[0]:t),s.complete())}]))}catch(t){y(s)?s.error(t):console.warn(t)}}return s.subscribe(n)}))}}function Nt(t){var e=this,r=t.params,n=t.subscriber,i=t.context,o=r.callbackFunc,s=r.args,a=r.scheduler,u=r.subject;if(!u){u=r.subject=new st;try{o.apply(i,s.concat([function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t.shift();if(n)e.add(a.schedule(Rt,0,{err:n,subject:u}));else{var i=t.length<=1?t[0]:t;e.add(a.schedule(It,0,{value:i,subject:u}))}}]))}catch(t){this.add(a.schedule(Rt,0,{err:t,subject:u}))}}this.add(u.subscribe(n))}function It(t){var e=t.value,r=t.subject;r.next(e),r.complete()}function Rt(t){var e=t.err;t.subject.error(e)}var Ft=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.notifyNext=function(t,e,r,n,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(b),Lt=function(t){function e(e,r,n){var i=t.call(this)||this;return i.parent=e,i.outerValue=r,i.outerIndex=n,i.index=0,i}return i(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(b),Ut=function(t){return function(e){return t.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,u),e}};function Vt(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var Dt=Vt(),Bt=function(t){return function(e){for(var r=t[Dt]();;){var n=r.next();if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof r.return&&e.add((function(){r.return&&r.return()})),e}},Wt=function(t){return function(e){var r=t[w]();if("function"!=typeof r.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return r.subscribe(e)}},Ht=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function zt(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var Yt=function(t){if(t instanceof E)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[w])return Wt(t);if(Ht(t))return $(t);if(zt(t))return Ut(t);if(t&&"function"==typeof t[Dt])return Bt(t);var e=f(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function qt(t,e,r,n,i){if(void 0===i&&(i=new Lt(t,r,n)),!i.closed)return Yt(e)(i)}var Gt={};function Xt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=null,n=null;return G(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&l(t[0])&&(t=t[0]),K(t,n).lift(new $t(r))}var $t=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new Kt(t,this.resultSelector))},t}(),Kt=function(t){function e(e,r){var n=t.call(this,e)||this;return n.resultSelector=r,n.active=0,n.values=[],n.observables=[],n}return i(e,t),e.prototype._next=function(t){this.values.push(Gt),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var r=0;r<e;r++){var n=t[r];this.add(qt(this,n,n,r))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,r,n,i){var o=this.values,s=o[r],a=this.toRespond?s===Gt?--this.toRespond:this.toRespond:0;o[r]=e,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(Ft);function Qt(t,e){if(!e)return t instanceof E?t:new E(Yt(t));if(null!=t){if(function(t){return t&&"function"==typeof t[w]}(t))return function(t,e){return new E(e?function(r){var n=new p;return n.add(e.schedule((function(){var i=t[w]();n.add(i.subscribe({next:function(t){n.add(e.schedule((function(){return r.next(t)})))},error:function(t){n.add(e.schedule((function(){return r.error(t)})))},complete:function(){n.add(e.schedule((function(){return r.complete()})))}}))}))),n}:Wt(t))}(t,e);if(zt(t))return function(t,e){return new E(e?function(r){var n=new p;return n.add(e.schedule((function(){return t.then((function(t){n.add(e.schedule((function(){r.next(t),n.add(e.schedule((function(){return r.complete()})))})))}),(function(t){n.add(e.schedule((function(){return r.error(t)})))}))}))),n}:Ut(t))}(t,e);if(Ht(t))return K(t,e);if(function(t){return t&&"function"==typeof t[Dt]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new E(e?function(r){var n,i=new p;return i.add((function(){n&&"function"==typeof n.return&&n.return()})),i.add(e.schedule((function(){n=t[Dt](),i.add(e.schedule((function(){if(!r.closed){var t,e;try{var i=n.next();t=i.value,e=i.done}catch(t){return void r.error(t)}e?r.complete():(r.next(t),this.schedule())}})))}))),i}:Bt(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}var Jt=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new Zt(t,this.project,this.concurrent))},t}(),Zt=function(t){function e(e,r,n){void 0===n&&(n=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=r,i.concurrent=n,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return i(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,r)},e.prototype._innerSub=function(t,e,r){var n=new Lt(this,void 0,void 0);this.destination.add(n),qt(this,t,e,r,n)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,r,n,i){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(Ft);function te(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),function t(e,r,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof r?function(i){return i.pipe(t((function(t,n){return Qt(e(t,n)).pipe(At((function(e,i){return r(t,e,n,i)})))}),n))}:("number"==typeof r&&(n=r),function(t){return t.lift(new Jt(e,n))})}(gt,t)}function ee(){return te(1)}function re(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ee()(J.apply(void 0,t))}function ne(t){return new E((function(e){var r;try{r=t()}catch(t){return void e.error(t)}return(r?Qt(r):q()).subscribe(e)}))}function ie(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&l(e[0])&&(e=e[0]),0===e.length?Y:t?ie(e).pipe(At((function(e){return t.apply(void 0,e)}))):new E((function(t){return new oe(t,e)}))}var oe=function(t){function e(e,r){var n=t.call(this,e)||this;n.sources=r,n.completed=0,n.haveValues=0;var i=r.length;n.values=new Array(i);for(var o=0;o<i;o++){var s=qt(n,r[o],null,o);s&&n.add(s)}return n}return i(e,t),e.prototype.notifyNext=function(t,e,r,n,i){this.values[r]=e,i._hasValue||(i._hasValue=!0,this.haveValues++)},e.prototype.notifyComplete=function(t){var e=this.destination,r=this.haveValues,n=this.values,i=n.length;t._hasValue?(this.completed++,this.completed===i&&(r===i&&e.next(n),e.complete())):e.complete()},e}(Ft);Object.prototype.toString;function se(t,e,r,n){return o(r)&&(n=r,r=void 0),n?se(t,e,r).pipe(At((function(t){return l(t)?n.apply(void 0,t):n(t)}))):new E((function(n){!function t(e,r,n,i,o){var s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){var a=e;e.addEventListener(r,n,o),s=function(){return a.removeEventListener(r,n,o)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){var u=e;e.on(r,n),s=function(){return u.off(r,n)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){var c=e;e.addListener(r,n),s=function(){return c.removeListener(r,n)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var l=0,f=e.length;l<f;l++)t(e[l],r,n,i,o)}i.add(s)}(t,e,(function(t){arguments.length>1?n.next(Array.prototype.slice.call(arguments)):n.next(t)}),n,r)}))}function ae(t,e,r){return r?ae(t,e).pipe(At((function(t){return l(t)?r.apply(void 0,t):r(t)}))):new E((function(r){var n,i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.next(1===t.length?t[0]:t)};try{n=t(i)}catch(t){return void r.error(t)}if(o(e))return function(){return e(i,n)}}))}function ue(t,e,r,n,i){var o,s;if(1==arguments.length){var a=t;s=a.initialState,e=a.condition,r=a.iterate,o=a.resultSelector||gt,i=a.scheduler}else void 0===n||G(n)?(s=t,o=gt,i=n):(s=t,o=n);return new E((function(t){var n=s;if(i)return i.schedule(ce,0,{subscriber:t,iterate:r,condition:e,resultSelector:o,state:n});for(;;){if(e){var a=void 0;try{a=e(n)}catch(e){return void t.error(e)}if(!a){t.complete();break}}var u=void 0;try{u=o(n)}catch(e){return void t.error(e)}if(t.next(u),t.closed)break;try{n=r(n)}catch(e){return void t.error(e)}}}))}function ce(t){var e=t.subscriber,r=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(t){return void e.error(t)}else t.needIterate=!0;if(r){var n=void 0;try{n=r(t.state)}catch(t){return void e.error(t)}if(!n)return void e.complete();if(e.closed)return}var i;try{i=t.resultSelector(t.state)}catch(t){return void e.error(t)}if(!e.closed&&(e.next(i),!e.closed))return this.schedule(t)}}function le(t,e,r){return void 0===e&&(e=Y),void 0===r&&(r=Y),ne((function(){return t()?e:r}))}function fe(t){return!l(t)&&t-parseFloat(t)+1>=0}function he(t,e){return void 0===t&&(t=0),void 0===e&&(e=dt),(!fe(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=dt),new E((function(r){return r.add(e.schedule(de,t,{subscriber:r,counter:0,period:t})),r}))}function de(t){var e=t.subscriber,r=t.counter,n=t.period;e.next(r),this.schedule({subscriber:e,counter:r+1,period:n},n)}function pe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Number.POSITIVE_INFINITY,n=null,i=t[t.length-1];return G(i)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(r=t.pop())):"number"==typeof i&&(r=t.pop()),null===n&&1===t.length&&t[0]instanceof E?t[0]:te(r)(K(t,n))}var me=new E(S);function ve(){return me}function be(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return Y;var r=t[0],n=t.slice(1);return 1===t.length&&l(r)?be.apply(void 0,r):new E((function(t){var e=function(){return t.add(be.apply(void 0,n).subscribe(t))};return Qt(r).subscribe({next:function(e){t.next(e)},error:e,complete:e})}))}function ge(t,e){return new E(e?function(r){var n=Object.keys(t),i=new p;return i.add(e.schedule(ye,0,{keys:n,index:0,subscriber:r,subscription:i,obj:t})),i}:function(e){for(var r=Object.keys(t),n=0;n<r.length&&!e.closed;n++){var i=r[n];t.hasOwnProperty(i)&&e.next([i,t[i]])}e.complete()})}function ye(t){var e=t.keys,r=t.index,n=t.subscriber,i=t.subscription,o=t.obj;if(!n.closed)if(r<e.length){var s=e[r];n.next([s,o[s]]),i.add(this.schedule({keys:e,index:r+1,subscriber:n,subscription:i,obj:o}))}else n.complete()}function we(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!l(t[0]))return t[0];t=t[0]}return K(t,void 0).lift(new Se)}var Se=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new xe(t))},t}(),xe=function(t){function e(e){var r=t.call(this,e)||this;return r.hasFirst=!1,r.observables=[],r.subscriptions=[],r}return i(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var r=0;r<e&&!this.hasFirst;r++){var n=t[r],i=qt(this,n,n,r);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},e.prototype.notifyNext=function(t,e,r,n,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==r){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(e)},e}(Ft);function _e(t,e,r){return void 0===t&&(t=0),new E((function(n){void 0===e&&(e=t,t=0);var i=0,o=t;if(r)return r.schedule(Ee,0,{index:i,count:e,start:t,subscriber:n});for(;;){if(i++>=e){n.complete();break}if(n.next(o++),n.closed)break}}))}function Ee(t){var e=t.start,r=t.index,n=t.count,i=t.subscriber;r>=n?i.complete():(i.next(e),i.closed||(t.index=r+1,t.start=e+1,this.schedule(t)))}function Ce(t,e,r){void 0===t&&(t=0);var n=-1;return fe(e)?n=Number(e)<1?1:Number(e):G(e)&&(r=e),G(r)||(r=dt),new E((function(e){var i=fe(t)?t:+t-r.now();return r.schedule(Ae,i,{index:0,period:n,subscriber:e})}))}function Ae(t){var e=t.index,r=t.period,n=t.subscriber;if(n.next(e),!n.closed){if(-1===r)return n.complete();t.index=e+1,this.schedule(t,r)}}function Oe(t,e){return new E((function(r){var n,i;try{n=t()}catch(t){return void r.error(t)}try{i=e(n)}catch(t){return void r.error(t)}var o=(i?Qt(i):Y).subscribe(r);return function(){o.unsubscribe(),n&&n.unsubscribe()}}))}function Te(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return"function"==typeof r&&t.pop(),K(t,void 0).lift(new Pe(r))}var Pe=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new ke(t,this.resultSelector))},t}(),ke=function(t){function e(e,r,n){void 0===n&&(n=Object.create(null));var i=t.call(this,e)||this;return i.iterators=[],i.active=0,i.resultSelector="function"==typeof r?r:null,i.values=n,i}return i(e,t),e.prototype._next=function(t){var e=this.iterators;l(t)?e.push(new je(t)):"function"==typeof t[Dt]?e.push(new Me(t[Dt]())):e.push(new Ne(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(var r=0;r<e;r++){var n=t[r];if(n.stillUnsubscribed)this.destination.add(n.subscribe(n,r));else this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,r=this.destination,n=0;n<e;n++){if("function"==typeof(s=t[n]).hasValue&&!s.hasValue())return}var i=!1,o=[];for(n=0;n<e;n++){var s,a=(s=t[n]).next();if(s.hasCompleted()&&(i=!0),a.done)return void r.complete();o.push(a.value)}this.resultSelector?this._tryresultSelector(o):r.next(o),i&&r.complete()},e.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(b),Me=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),je=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[Dt]=function(){return this},t.prototype.next=function(t){var e=this.index++,r=this.array;return e<this.length?{value:r[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),Ne=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.parent=r,i.observable=n,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return i(e,t),e.prototype[Dt]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t,e,r,n,i){this.buffer.push(e),this.parent.checkIterators()},e.prototype.subscribe=function(t,e){return qt(this,this.observable,this,e)},e}(Ft)}]);