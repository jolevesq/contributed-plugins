/*! For license information please see range-slider.js.LICENSE.txt */
(()=>{var e={701:function(e,t){"use strict";var r=this&&this.__spreadArrays||function(){for(var e=0,t=0,r=arguments.length;t<r;t++)e+=arguments[t].length;var n=Array(e),i=0;for(t=0;t<r;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n};Object.defineProperty(t,"__esModule",{value:!0});var n=function(e,t,r){this.name=e,this.version=t,this.os=r,this.type="browser"};t.BrowserInfo=n;var i=function(e){this.version=e,this.type="node",this.name="node",this.os=process.platform};t.NodeInfo=i;var o=function(e,t,r,n){this.name=e,this.version=t,this.os=r,this.bot=n,this.type="bot-device"};t.SearchBotDeviceInfo=o;var s=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null};t.BotInfo=s;var a=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null};t.ReactNativeInfo=a;var c=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,u=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/Edg\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],l=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function h(e){return""!==e&&u.reduce((function(t,r){var n=r[0],i=r[1];if(t)return t;var o=i.exec(e);return!!o&&[n,o]}),!1)}function d(e){var t=h(e);if(!t)return null;var i=t[0],a=t[1];if("searchbot"===i)return new s;var u=a[1]&&a[1].split(/[._]/).slice(0,3);u?u.length<3&&(u=r(u,function(e){for(var t=[],r=0;r<e;r++)t.push("0");return t}(3-u.length))):u=[];var l=u.join("."),d=p(e),f=c.exec(e);return f&&f[1]?new o(i,l,d,f[1]):new n(i,u.join("."),d)}function p(e){for(var t=0,r=l.length;t<r;t++){var n=l[t],i=n[0];if(n[1].exec(e))return i}return null}function f(){return"undefined"!=typeof process&&process.version?new i(process.version.slice(1)):null}t.detect=function(e){return e?d(e):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new a:"undefined"!=typeof navigator?d(navigator.userAgent):f()},t.browserName=function(e){var t=h(e);return t?t[0]:null},t.parseUserAgent=d,t.detectOS=p,t.getNodeVersion=f},306:function(e){!function(t){"use strict";var r=function(){return{escape:function(e){return e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:t,mimeType:function(e){var r,n;return(r="application/font-woff",n="image/jpeg",{woff:r,woff2:r,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:n,jpeg:n,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"})[t(e).toLowerCase()]||""},dataAsUrl:function(e,t){return"data:"+t+";base64,"+e},isDataUrl:function(e){return-1!==e.search(/^(data:)/)},canvasToBlob:function(e){return e.toBlob?new Promise((function(t){e.toBlob(t)})):function(e){return new Promise((function(t){for(var r=window.atob(e.toDataURL().split(",")[1]),n=r.length,i=new Uint8Array(n),o=0;o<n;o++)i[o]=r.charCodeAt(o);t(new Blob([i],{type:"image/png"}))}))}(e)},resolveUrl:function(e,t){var r=document.implementation.createHTMLDocument(),n=r.createElement("base");r.head.appendChild(n);var i=r.createElement("a");return r.body.appendChild(i),n.href=t,i.href=e,i.href},getAndEncode:function(e){return c.impl.options.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+(new Date).getTime()),new Promise((function(t){var r,n=new XMLHttpRequest;if(n.onreadystatechange=function(){if(4===n.readyState)if(200===n.status){var i=new FileReader;i.onloadend=function(){var e=i.result.split(/,/)[1];t(e)},i.readAsDataURL(n.response)}else r?t(r):o("cannot fetch resource: "+e+", status: "+n.status)},n.ontimeout=function(){r?t(r):o("timeout of 30000ms occured while fetching resource: "+e)},n.responseType="blob",n.timeout=3e4,n.open("GET",e,!0),n.send(),c.impl.options.imagePlaceholder){var i=c.impl.options.imagePlaceholder.split(/,/);i&&i[1]&&(r=i[1])}function o(e){console.error(e),t("")}}))},uid:(e=0,function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+e++}),delay:function(e){return function(t){return new Promise((function(r){setTimeout((function(){r(t)}),e)}))}},asArray:function(e){for(var t=[],r=e.length,n=0;n<r;n++)t.push(e[n]);return t},escapeXhtml:function(e){return e.replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(e){return new Promise((function(t,r){var n=new Image;n.onload=function(){t(n)},n.onerror=r,n.src=e}))},width:function(e){var t=r(e,"border-left-width"),n=r(e,"border-right-width");return e.scrollWidth+t+n},height:function(e){var t=r(e,"border-top-width"),n=r(e,"border-bottom-width");return e.scrollHeight+t+n}};var e;function t(e){var t=/\.([^\.\/]*?)$/g.exec(e);return t?t[1]:""}function r(e,t){var r=window.getComputedStyle(e).getPropertyValue(t);return parseFloat(r.replace("px",""))}}(),n=function(){var e=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(e,r,o){return t(e)?Promise.resolve(e).then(n).then((function(t){var n=Promise.resolve(e);return t.forEach((function(e){n=n.then((function(t){return i(t,e,r,o)}))})),n})):Promise.resolve(e)},shouldProcess:t,impl:{readUrls:n,inline:i}};function t(t){return-1!==t.search(e)}function n(t){for(var n,i=[];null!==(n=e.exec(t));)i.push(n[1]);return i.filter((function(e){return!r.isDataUrl(e)}))}function i(e,t,n,i){return Promise.resolve(t).then((function(e){return n?r.resolveUrl(e,n):e})).then(i||r.getAndEncode).then((function(e){return r.dataAsUrl(e,r.mimeType(t))})).then((function(n){return e.replace(function(e){return new RegExp("(url\\(['\"]?)("+r.escape(e)+")(['\"]?\\))","g")}(t),"$1"+n+"$3")}))}}(),i=function(){return{resolveAll:function(){return e(document).then((function(e){return Promise.all(e.map((function(e){return e.resolve()})))})).then((function(e){return e.join("\n")}))},impl:{readAll:e}};function e(){return Promise.resolve(r.asArray(document.styleSheets)).then((function(e){var t=[];return e.forEach((function(e){try{r.asArray(e.cssRules||[]).forEach(t.push.bind(t))}catch(t){console.log("Error while reading CSS rules from "+e.href,t.toString())}})),t})).then((function(e){return e.filter((function(e){return e.type===CSSRule.FONT_FACE_RULE})).filter((function(e){return n.shouldProcess(e.style.getPropertyValue("src"))}))})).then((function(t){return t.map(e)}));function e(e){return{resolve:function(){var t=(e.parentStyleSheet||{}).href;return n.inlineAll(e.cssText,t)},src:function(){return e.style.getPropertyValue("src")}}}}}(),o=function(){return{inlineAll:function t(i){return i instanceof Element?function(e){var t=e.style.getPropertyValue("background");return t?n.inlineAll(t).then((function(t){e.style.setProperty("background",t,e.style.getPropertyPriority("background"))})).then((function(){return e})):Promise.resolve(e)}(i).then((function(){return i instanceof HTMLImageElement?e(i).inline():Promise.all(r.asArray(i.childNodes).map((function(e){return t(e)})))})):Promise.resolve(i)},impl:{newImage:e}};function e(e){return{inline:function(t){return r.isDataUrl(e.src)?Promise.resolve():Promise.resolve(e.src).then(t||r.getAndEncode).then((function(t){return r.dataAsUrl(t,r.mimeType(e.src))})).then((function(t){return new Promise((function(r,n){e.onload=r,e.onerror=n,e.src=t}))}))}}}}(),s=void 0,a=!1,c={toSvg:u,toPng:function(e,t){return l(e,t||{}).then((function(e){return e.toDataURL()}))},toJpeg:function(e,t){return l(e,t=t||{}).then((function(e){return e.toDataURL("image/jpeg",t.quality||1)}))},toBlob:function(e,t){return l(e,t||{}).then(r.canvasToBlob)},toPixelData:function(e,t){return l(e,t||{}).then((function(t){return t.getContext("2d").getImageData(0,0,r.width(e),r.height(e)).data}))},impl:{fontFaces:i,images:o,util:r,inliner:n,options:{}}};function u(e,t){return function(e){void 0===e.imagePlaceholder?c.impl.options.imagePlaceholder=s:c.impl.options.imagePlaceholder=e.imagePlaceholder,void 0===e.cacheBust?c.impl.options.cacheBust=a:c.impl.options.cacheBust=e.cacheBust}(t=t||{}),Promise.resolve(e).then((function(e){return h(e,t.filter,!0)})).then(d).then(p).then((function(e){return t.bgcolor&&(e.style.backgroundColor=t.bgcolor),t.width&&(e.style.width=t.width+"px"),t.height&&(e.style.height=t.height+"px"),t.style&&Object.keys(t.style).forEach((function(r){e.style[r]=t.style[r]})),e})).then((function(n){return function(e,t,n){return Promise.resolve(e).then((function(e){return e.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(e)})).then(r.escapeXhtml).then((function(e){return'<foreignObject x="0" y="0" width="100%" height="100%">'+e+"</foreignObject>"})).then((function(e){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+t+'" height="'+n+'">'+e+"</svg>"})).then((function(e){return"data:image/svg+xml;charset=utf-8,"+e}))}(n,t.width||r.width(e),t.height||r.height(e))}))}function l(e,t){return u(e,t).then(r.makeImage).then(r.delay(100)).then((function(n){var i=function(e){var n=document.createElement("canvas");if(n.width=t.width||r.width(e),n.height=t.height||r.height(e),t.bgcolor){var i=n.getContext("2d");i.fillStyle=t.bgcolor,i.fillRect(0,0,n.width,n.height)}return n}(e);return i.getContext("2d").drawImage(n,0,0),i}))}function h(e,t,n){return n||!t||t(e)?Promise.resolve(e).then((function(e){return e instanceof HTMLCanvasElement?r.makeImage(e.toDataURL()):e.cloneNode(!1)})).then((function(n){return function(e,t,n){var i=e.childNodes;return 0===i.length?Promise.resolve(t):function(e,t,r){var n=Promise.resolve();return t.forEach((function(t){n=n.then((function(){return h(t,r)})).then((function(t){t&&e.appendChild(t)}))})),n}(t,r.asArray(i),n).then((function(){return t}))}(e,n,t)})).then((function(t){return function(e,t){return t instanceof Element?Promise.resolve().then((function(){n=window.getComputedStyle(e),i=t.style,n.cssText?i.cssText=n.cssText:function(e,t){r.asArray(e).forEach((function(r){t.setProperty(r,e.getPropertyValue(r),e.getPropertyPriority(r))}))}(n,i);var n,i})).then((function(){[":before",":after"].forEach((function(n){!function(n){var i=window.getComputedStyle(e,n),o=i.getPropertyValue("content");if(""!==o&&"none"!==o){var s=r.uid();t.className=t.className+" "+s;var a=document.createElement("style");a.appendChild(function(e,t,n){var i="."+e+":"+t,o=n.cssText?s(n):a(n);return document.createTextNode(i+"{"+o+"}");function s(e){var t=e.getPropertyValue("content");return e.cssText+" content: "+t+";"}function a(e){return r.asArray(e).map(t).join("; ")+";";function t(t){return t+": "+e.getPropertyValue(t)+(e.getPropertyPriority(t)?" !important":"")}}}(s,n,i)),t.appendChild(a)}}(n)}))})).then((function(){e instanceof HTMLTextAreaElement&&(t.innerHTML=e.value),e instanceof HTMLInputElement&&t.setAttribute("value",e.value)})).then((function(){t instanceof SVGElement&&(t.setAttribute("xmlns","http://www.w3.org/2000/svg"),t instanceof SVGRectElement&&["width","height"].forEach((function(e){var r=t.getAttribute(e);r&&t.style.setProperty(e,r)})))})).then((function(){return t})):t}(e,t)})):Promise.resolve()}function d(e){return i.resolveAll().then((function(t){var r=document.createElement("style");return e.appendChild(r),r.appendChild(document.createTextNode(t)),e}))}function p(e){return o.inlineAll(e).then((function(){return e}))}e.exports=c}()},598:function(e,t,r){var n,i=i||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=e.document,r=function(){return e.URL||e.webkitURL||e},n=t.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in n,o=/constructor/i.test(e.HTMLElement)||e.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),a=function(t){(e.setImmediate||e.setTimeout)((function(){throw t}),0)},c=function(e){setTimeout((function(){"string"==typeof e?r().revokeObjectURL(e):e.remove()}),4e4)},u=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},l=function(t,l,h){h||(t=u(t));var d,p=this,f="application/octet-stream"===t.type,m=function(){!function(e,t,r){for(var n=(t=[].concat(t)).length;n--;){var i=e["on"+t[n]];if("function"==typeof i)try{i.call(e,e)}catch(e){a(e)}}}(p,"writestart progress write writeend".split(" "))};if(p.readyState=p.INIT,i)return d=r().createObjectURL(t),void setTimeout((function(){var e,t;n.href=d,n.download=l,e=n,t=new MouseEvent("click"),e.dispatchEvent(t),m(),c(d),p.readyState=p.DONE}));!function(){if((s||f&&o)&&e.FileReader){var n=new FileReader;return n.onloadend=function(){var t=s?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,p.readyState=p.DONE,m()},n.readAsDataURL(t),void(p.readyState=p.INIT)}d||(d=r().createObjectURL(t)),f?e.location.href=d:e.open(d,"_blank")||(e.location.href=d),p.readyState=p.DONE,m(),c(d)}()},h=l.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,r){return t=t||e.name||"download",r||(e=u(e)),navigator.msSaveOrOpenBlob(e,t)}:(h.abort=function(){},h.readyState=h.INIT=0,h.WRITING=1,h.DONE=2,h.error=h.onwritestart=h.onprogress=h.onwrite=h.onabort=h.onerror=h.onwriteend=null,function(e,t,r){return new l(e,t||e.name||"download",r)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);e.exports?e.exports.saveAs=i:null!==r.amdD&&null!==r.amdO&&(void 0===(n=function(){return i}.call(t,r,t,e))||(e.exports=n))},911:(e,t)=>{var r;!function(n,i,o,s){"use strict";var a,c,u={URL:n.URL||n.webkitURL||n.mozURL||n.msURL,getUserMedia:(c=o.getUserMedia||o.webkitGetUserMedia||o.mozGetUserMedia||o.msGetUserMedia,c?c.bind(o):c),requestAnimFrame:n.requestAnimationFrame||n.webkitRequestAnimationFrame||n.mozRequestAnimationFrame||n.oRequestAnimationFrame||n.msRequestAnimationFrame,requestTimeout:function(e,t){if(e=e||u.noop,t=t||0,!u.requestAnimFrame)return setTimeout(e,t);var r=(new Date).getTime(),n=new Object,i=u.requestAnimFrame;return n.value=i((function o(){(new Date).getTime()-r>=t?e.call():n.value=i(o)})),n},Blob:n.Blob||n.BlobBuilder||n.WebKitBlobBuilder||n.MozBlobBuilder||n.MSBlobBuilder,btoa:(a=n.btoa||function(e){for(var t="",r=0,n=e.length,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=void 0,s=void 0,a=void 0,c=void 0,u=void 0,l=void 0,h=void 0;r<n;)c=(o=e.charCodeAt(r++))>>2,u=(3&o)<<4|(s=e.charCodeAt(r++))>>4,l=(15&s)<<2|(a=e.charCodeAt(r++))>>6,h=63&a,isNaN(s)?l=h=64:isNaN(a)&&(h=64),t=t+i.charAt(c)+i.charAt(u)+i.charAt(l)+i.charAt(h);return t},a?a.bind(n):u.noop),isObject:function(e){return e&&"[object Object]"===Object.prototype.toString.call(e)},isEmptyObject:function(e){return u.isObject(e)&&!Object.keys(e).length},isArray:function(e){return e&&Array.isArray(e)},isFunction:function(e){return e&&"function"==typeof e},isElement:function(e){return e&&1===e.nodeType},isString:function(e){return"string"==typeof e||"[object String]"===Object.prototype.toString.call(e)},isSupported:{canvas:function(){var e=i.createElement("canvas");return e&&e.getContext&&e.getContext("2d")},webworkers:function(){return n.Worker},blob:function(){return u.Blob},Uint8Array:function(){return n.Uint8Array},Uint32Array:function(){return n.Uint32Array},videoCodecs:function(){var e=i.createElement("video"),t={mp4:!1,h264:!1,ogv:!1,ogg:!1,webm:!1};try{e&&e.canPlayType&&(t.mp4=""!==e.canPlayType('video/mp4; codecs="mp4v.20.8"'),t.h264=""!==(e.canPlayType('video/mp4; codecs="avc1.42E01E"')||e.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')),t.ogv=""!==e.canPlayType('video/ogg; codecs="theora"'),t.ogg=""!==e.canPlayType('video/ogg; codecs="theora"'),t.webm=-1!==e.canPlayType('video/webm; codecs="vp8, vorbis"'))}catch(e){}return t}()},noop:function(){},each:function(e,t){var r=void 0,n=void 0;if(u.isArray(e))for(r=-1,n=e.length;++r<n&&!1!==t(r,e[r]););else if(u.isObject(e))for(r in e)if(e.hasOwnProperty(r)&&!1===t(r,e[r]))break},mergeOptions:function(e,t){if(u.isObject(e)&&u.isObject(t)&&Object.keys){var r={};return u.each(e,(function(t,n){r[t]=e[t]})),u.each(t,(function(n,i){var o=t[n];u.isObject(o)&&e[n]?r[n]=u.mergeOptions(e[n],o):r[n]=o})),r}},setCSSAttr:function(e,t,r){u.isElement(e)&&(u.isString(t)&&u.isString(r)?e.style[t]=r:u.isObject(t)&&u.each(t,(function(t,r){e.style[t]=r})))},removeElement:function(e){u.isElement(e)&&e.parentNode&&e.parentNode.removeChild(e)},createWebWorker:function(e){if(!u.isString(e))return{};try{var t=new u.Blob([e],{type:"text/javascript"}),r=u.URL.createObjectURL(t);return{objectUrl:r,worker:new Worker(r)}}catch(e){return""+e}},getExtension:function(e){return e.substr(e.lastIndexOf(".")+1,e.length)},getFontSize:function(){var e=arguments.length>0&&arguments[0]!==s?arguments[0]:{};if(!i.body||!1===e.resizeFont)return e.fontSize;var t=e.text,r=e.gifWidth,n=parseInt(e.fontSize,10),o=parseInt(e.minFontSize,10),a=i.createElement("div"),c=i.createElement("span");for(a.setAttribute("width",r),a.appendChild(c),c.innerHTML=t,c.style.fontSize=n+"px",c.style.textIndent="-9999px",c.style.visibility="hidden",i.body.appendChild(c);c.offsetWidth>r&&n>=o;)c.style.fontSize=--n+"px";return i.body.removeChild(c),n+"px"},webWorkerError:!1},l=Object.freeze({default:u}),h={validate:function(e){e=u.isObject(e)?e:{};var t={};return u.each(h.validators,(function(r,n){var i=n.errorCode;if(!e[i]&&!n.condition)return(t=n).error=!0,!1})),delete t.condition,t},isValid:function(e){return!0!==h.validate(e).error},validators:[{condition:u.isFunction(u.getUserMedia),errorCode:"getUserMedia",errorMsg:"The getUserMedia API is not supported in your browser"},{condition:u.isSupported.canvas(),errorCode:"canvas",errorMsg:"Canvas elements are not supported in your browser"},{condition:u.isSupported.webworkers(),errorCode:"webworkers",errorMsg:"The Web Workers API is not supported in your browser"},{condition:u.isFunction(u.URL),errorCode:"window.URL",errorMsg:"The window.URL API is not supported in your browser"},{condition:u.isSupported.blob(),errorCode:"window.Blob",errorMsg:"The window.Blob File API is not supported in your browser"},{condition:u.isSupported.Uint8Array(),errorCode:"window.Uint8Array",errorMsg:"The window.Uint8Array function constructor is not supported in your browser"},{condition:u.isSupported.Uint32Array(),errorCode:"window.Uint32Array",errorMsg:"The window.Uint32Array function constructor is not supported in your browser"}],messages:{videoCodecs:{errorCode:"videocodec",errorMsg:"The video codec you are trying to use is not supported in your browser"}}},d=Object.freeze({default:h}),p=function(){},f={sampleInterval:10,numWorkers:2,filter:"",gifWidth:200,gifHeight:200,interval:.1,numFrames:10,frameDuration:1,keepCameraOn:!1,images:[],video:null,webcamVideoElement:null,cameraStream:null,text:"",fontWeight:"normal",fontSize:"16px",minFontSize:"10px",resizeFont:!1,fontFamily:"sans-serif",fontColor:"#ffffff",textAlign:"center",textBaseline:"bottom",textXCoordinate:null,textYCoordinate:null,progressCallback:p,completeCallback:p,saveRenderingContexts:!1,savedRenderingContexts:[],crossOrigin:"Anonymous"},m=Object.freeze({default:f});function g(){return h.isValid()}function b(){var e,t,r,n,i,o=256,s=499,a=491,c=487,u=503,l=3*u,h=o-1,d=4,p=100,f=16,m=1<<f,g=10,b=10,v=m>>b,y=m<<g-b,w=o>>3,S=6,_=1<<S,x=w*_,E=30,C=10,T=1<<C,A=8,O=1<<A,P=C+A,M=1<<P,k=[],I=[],R=[],N=[];function L(e,s,a){var c,u;for(t=e,r=s,n=a,i=new Array(o),c=0;c<o;c++)i[c]=new Array(4),(u=i[c])[0]=u[1]=u[2]=(c<<d+8)/o|0,R[c]=m/o|0,I[c]=0}function j(){for(var e=[],t=new Array(o),r=0;r<o;r++)t[i[r][3]]=r;for(var n=0,s=0;s<o;s++){var a=t[s];e[n++]=i[a][0],e[n++]=i[a][1],e[n++]=i[a][2]}return e}function F(){var e,t,r,n,s,a,c,u;for(c=0,u=0,e=0;e<o;e++){for(r=e,n=(s=i[e])[1],t=e+1;t<o;t++)(a=i[t])[1]<n&&(r=t,n=a[1]);if(a=i[r],e!=r&&(t=a[0],a[0]=s[0],s[0]=t,t=a[1],a[1]=s[1],s[1]=t,t=a[2],a[2]=s[2],s[2]=t,t=a[3],a[3]=s[3],s[3]=t),n!=c){for(k[c]=u+e>>1,t=c+1;t<n;t++)k[t]=e;c=n,u=e}}for(k[c]=u+h>>1,t=c+1;t<256;t++)k[t]=h}function U(){var i,o,h,f,m,g,b,v,y,w,_,C,A,P;for(r<l&&(n=1),e=30+(n-1)/3,C=t,A=0,P=r,w=(_=r/(3*n))/p|0,v=T,(b=(g=x)>>S)<=1&&(b=0),i=0;i<b;i++)N[i]=v*((b*b-i*i)*O/(b*b));for(y=r<l?3:r%s!=0?3*s:r%a!=0?3*a:r%c!=0?3*c:3*u,i=0;i<_;)if(z(v,o=H(h=(255&C[A+0])<<d,f=(255&C[A+1])<<d,m=(255&C[A+2])<<d),h,f,m),0!==b&&W(b,o,h,f,m),(A+=y)>=P&&(A-=r),0===w&&(w=1),++i%w==0)for(v-=v/e,(b=(g-=g/E)>>S)<=1&&(b=0),o=0;o<b;o++)N[o]=v*((b*b-o*o)*O/(b*b))}function V(e,t,r){var n,s,a,c,u,l,h;for(u=1e3,h=-1,s=(n=k[t])-1;n<o||s>=0;)n<o&&((a=(l=i[n])[1]-t)>=u?n=o:(n++,a<0&&(a=-a),(c=l[0]-e)<0&&(c=-c),(a+=c)<u&&((c=l[2]-r)<0&&(c=-c),(a+=c)<u&&(u=a,h=l[3])))),s>=0&&((a=t-(l=i[s])[1])>=u?s=-1:(s--,a<0&&(a=-a),(c=l[0]-e)<0&&(c=-c),(a+=c)<u&&((c=l[2]-r)<0&&(c=-c),(a+=c)<u&&(u=a,h=l[3]))));return h}function D(){return U(),B(),F(),j()}function B(){var e;for(e=0;e<o;e++)i[e][0]>>=d,i[e][1]>>=d,i[e][2]>>=d,i[e][3]=e}function W(e,t,r,n,s){var a,c,u,l,h,d,p;for((u=t-e)<-1&&(u=-1),(l=t+e)>o&&(l=o),a=t+1,c=t-1,d=1;a<l||c>u;){if(h=N[d++],a<l){p=i[a++];try{p[0]-=h*(p[0]-r)/M|0,p[1]-=h*(p[1]-n)/M|0,p[2]-=h*(p[2]-s)/M|0}catch(e){}}if(c>u){p=i[c--];try{p[0]-=h*(p[0]-r)/M|0,p[1]-=h*(p[1]-n)/M|0,p[2]-=h*(p[2]-s)/M|0}catch(e){}}}}function z(e,t,r,n,o){var s=i[t],a=e/T;s[0]-=a*(s[0]-r)|0,s[1]-=a*(s[1]-n)|0,s[2]-=a*(s[2]-o)|0}function H(e,t,r){var n,s,a,c,u,l,h,p,m,w;for(m=p=~(1<<31),h=l=-1,n=0;n<o;n++)(s=(w=i[n])[0]-e)<0&&(s=-s),(a=w[1]-t)<0&&(a=-a),s+=a,(a=w[2]-r)<0&&(a=-a),(s+=a)<p&&(p=s,l=n),(c=s-(I[n]>>f-d))<m&&(m=c,h=n),u=R[n]>>b,R[n]-=u,I[n]+=u<<g;return R[l]+=v,I[l]-=y,h}L.apply(this,arguments);var $={};return $.map=V,$.process=D,$}function v(){try{this.onmessage=function(t){var r,n=t.data||{};n.gifshot&&(r=e.run(n),postMessage(r))}}catch(e){}var e={dataToRGB:function(e,t,r){for(var n=t*r*4,i=0,o=[];i<n;)o.push(e[i++]),o.push(e[i++]),o.push(e[i++]),i++;return o},componentizedPaletteToArray:function(e){e=e||[];for(var t=[],r=0;r<e.length;r+=3){var n=e[r],i=e[r+1],o=e[r+2];t.push(n<<16|i<<8|o)}return t},processFrameWithQuantizer:function(e,t,r,n){for(var i=this.dataToRGB(e,t,r),o=new b(i,i.length,n),s=o.process(),a=new Uint32Array(this.componentizedPaletteToArray(s)),c=t*r,u=new Uint8Array(c),l=0,h=0;h<c;h++){var d=i[l++],p=i[l++],f=i[l++];u[h]=o.map(d,p,f)}return{pixels:u,palette:a}},run:function(e){var t=e=e||{},r=t.height,n=(t.palette,t.sampleInterval),i=t.width,o=e.data;return this.processFrameWithQuantizer(o,i,r,n)}};return e}function y(e,t,r,n){var i=0,o=(n=n===s?{}:n).loop===s?null:n.loop,a=n.palette===s?null:n.palette;if(t<=0||r<=0||t>65535||r>65535)throw"Width/Height invalid.";if(e[i++]=71,e[i++]=73,e[i++]=70,e[i++]=56,e[i++]=57,e[i++]=97,e[i++]=255&t,e[i++]=t>>8&255,e[i++]=255&r,e[i++]=r>>8&255,e[i++]=0|(null!==a?128:0),e[i++]=0,e[i++]=0,null!==o){if(o<0||o>65535)throw"Loop count invalid.";e[i++]=33,e[i++]=255,e[i++]=11,e[i++]=78,e[i++]=69,e[i++]=84,e[i++]=83,e[i++]=67,e[i++]=65,e[i++]=80,e[i++]=69,e[i++]=50,e[i++]=46,e[i++]=48,e[i++]=3,e[i++]=1,e[i++]=255&o,e[i++]=o>>8&255,e[i++]=0}var c=!1;this.addFrame=function(t,r,n,o,u,l){if(!0===c&&(--i,c=!1),l=l===s?{}:l,t<0||r<0||t>65535||r>65535)throw"x/y invalid.";if(n<=0||o<=0||n>65535||o>65535)throw"Width/Height invalid.";if(u.length<n*o)throw"Not enough pixels for the frame size.";var h=!0,d=l.palette;if(d!==s&&null!==d||(h=!1,d=a),d===s||null===d)throw"Must supply either a local or global palette.";for(var p=function(e){var t=e.length;if(t<2||t>256||t&t-1)throw"Invalid code/color length, must be power of 2 and 2 .. 256.";return t}(d),f=0;p>>=1;)++f;p=1<<f;var m=l.delay===s?0:l.delay,g=l.disposal===s?0:l.disposal;if(g<0||g>3)throw"Disposal out of range.";var b=!1,v=0;if(l.transparent!==s&&null!==l.transparent&&(b=!0,(v=l.transparent)<0||v>=p))throw"Transparent color index.";if((0!==g||b||0!==m)&&(e[i++]=33,e[i++]=249,e[i++]=4,e[i++]=g<<2|(!0===b?1:0),e[i++]=255&m,e[i++]=m>>8&255,e[i++]=v,e[i++]=0),e[i++]=44,e[i++]=255&t,e[i++]=t>>8&255,e[i++]=255&r,e[i++]=r>>8&255,e[i++]=255&n,e[i++]=n>>8&255,e[i++]=255&o,e[i++]=o>>8&255,e[i++]=!0===h?128|f-1:0,!0===h)for(var y=0,w=d.length;y<w;++y){var S=d[y];e[i++]=S>>16&255,e[i++]=S>>8&255,e[i++]=255&S}i=function(e,t,r,n){e[t++]=r;var i=t++,o=1<<r,a=o-1,c=o+1,u=c+1,l=r+1,h=0,d=0;function p(r){for(;h>=r;)e[t++]=255&d,d>>=8,h-=8,t===i+256&&(e[i]=255,i=t++)}function f(e){d|=e<<h,h+=l,p(8)}var m=n[0]&a,g={};f(o);for(var b=1,v=n.length;b<v;++b){var y=n[b]&a,w=m<<8|y,S=g[w];if(S===s){for(d|=m<<h,h+=l;h>=8;)e[t++]=255&d,d>>=8,h-=8,t===i+256&&(e[i]=255,i=t++);4096===u?(f(o),u=c+1,l=r+1,g={}):(u>=1<<l&&++l,g[w]=u++),m=y}else m=S}return f(m),f(c),p(1),i+1===t?e[i]=0:(e[i]=t-i-1,e[t++]=0),t}(e,i,f<2?2:f,u)},this.end=function(){return!1===c&&(e[i++]=59,c=!0),i}}var w=function(){},S=function(e){this.canvas=null,this.ctx=null,this.repeat=0,this.frames=[],this.numRenderedFrames=0,this.onRenderCompleteCallback=w,this.onRenderProgressCallback=w,this.workers=[],this.availableWorkers=[],this.generatingGIF=!1,this.options=e,this.initializeWebWorkers(e)};function _(e,t){e.getBase64GIF((function(e){t({error:!1,errorCode:"",errorMsg:"",image:e})}))}S.prototype={workerMethods:v(),initializeWebWorkers:function(e){var t,r=b.toString()+"("+v.toString()+"());",n=void 0,o=void 0,s=void 0,a=-1,c="";for(t=e.numWorkers;++a<t;)n=u.createWebWorker(r),u.isObject(n)?(o=n.objectUrl,s=n.worker,this.workers.push({worker:s,objectUrl:o}),this.availableWorkers.push(s)):(c=n,u.webWorkerError=!!n);this.workerError=c,this.canvas=i.createElement("canvas"),this.canvas.width=e.gifWidth,this.canvas.height=e.gifHeight,this.ctx=this.canvas.getContext("2d"),this.frames=[]},getWorker:function(){return this.availableWorkers.pop()},freeWorker:function(e){this.availableWorkers.push(e)},byteMap:function(){for(var e=[],t=0;t<256;t++)e[t]=String.fromCharCode(t);return e}(),bufferToString:function(e){for(var t=e.length,r="",n=-1;++n<t;)r+=this.byteMap[e[n]];return r},onFrameFinished:function(e){var t=this,r=t.frames,n=!!(t.options.images||[]).length,i=r.every((function(e){return!e.beingProcessed&&e.done}));t.numRenderedFrames++,n&&e(t.numRenderedFrames/r.length),t.onRenderProgressCallback(.75*t.numRenderedFrames/r.length),i?t.generatingGIF||t.generateGIF(r,t.onRenderCompleteCallback):u.requestTimeout((function(){t.processNextFrame()}),1)},processFrame:function(e){var t=this,r=(this.options,this.options),n=r.progressCallback,i=r.sampleInterval,o=this.frames,a=void 0,c=void 0,u=function(){var e=arguments.length>0&&arguments[0]!==s?arguments[0]:{},r=e.data;delete a.data,a.pixels=Array.prototype.slice.call(r.pixels),a.palette=Array.prototype.slice.call(r.palette),a.done=!0,a.beingProcessed=!1,t.freeWorker(c),t.onFrameFinished(n)};(a=o[e]).beingProcessed||a.done?this.onFrameFinished():(a.sampleInterval=i,a.beingProcessed=!0,a.gifshot=!0,(c=this.getWorker())?(c.onmessage=u,c.postMessage(a)):u({data:t.workerMethods.run(a)}))},startRendering:function(e){this.onRenderCompleteCallback=e;for(var t=0;t<this.options.numWorkers&&t<this.frames.length;t++)this.processFrame(t)},processNextFrame:function(){for(var e=-1,t=0;t<this.frames.length;t++){var r=this.frames[t];if(!r.done&&!r.beingProcessed){e=t;break}}e>=0&&this.processFrame(e)},generateGIF:function(e,t){var r=[],n={loop:this.repeat},i=this.options,o=i.interval,s=i.frameDuration,a=!!i.images.length,c=i.gifHeight,l=i.gifWidth,h=new y(r,l,c,n),d=this.onRenderProgressCallback,p=a?100*o:0,f=void 0;this.generatingGIF=!0,u.each(e,(function(t,r){var n=r.palette;d(.75+.25*r.position*1/e.length);for(var i=0;i<s;i++)h.addFrame(0,0,l,c,r.pixels,{palette:n,delay:p})})),h.end(),d(1),this.frames=[],this.generatingGIF=!1,u.isFunction(t)&&(f=this.bufferToString(r),t("data:image/gif;base64,"+u.btoa(f)))},setRepeat:function(e){this.repeat=e},addFrame:function(e,t){t=u.isObject(t)?t:{};var r=this,n=r.ctx,i=r.options,o=i.gifWidth,s=i.gifHeight,a=u.getFontSize(t),c=t,l=c.filter,h=c.fontColor,d=c.fontFamily,p=c.fontWeight,f=(c.gifHeight,c.gifWidth,c.text),m=c.textAlign,g=c.textBaseline,b=t.textXCoordinate?t.textXCoordinate:"left"===m?1:"right"===m?o:o/2,v=t.textYCoordinate?t.textYCoordinate:"top"===g?1:"center"===g?s/2:s,y=p+" "+a+" "+d,w=void 0;try{n.filter=l,n.drawImage(e,0,0,o,s),f&&(n.font=y,n.fillStyle=h,n.textAlign=m,n.textBaseline=g,n.fillText(f,b,v)),w=n.getImageData(0,0,o,s),r.addFrameImageData(w)}catch(e){return""+e}},addFrameImageData:function(){var e=arguments.length>0&&arguments[0]!==s?arguments[0]:{},t=this.frames,r=e.data;this.frames.push({data:r,width:e.width,height:e.height,palette:null,dithering:null,done:!1,beingProcessed:!1,position:t.length})},onRenderProgress:function(e){this.onRenderProgressCallback=e},isRendering:function(){return this.generatingGIF},getBase64GIF:function(e){var t=this;t.startRendering((function(r){t.destroyWorkers(),u.requestTimeout((function(){e(r)}),0)}))},destroyWorkers:function(){if(!this.workerError){var e=this.workers;u.each(e,(function(e,t){var r=t.worker,n=t.objectUrl;r.terminate(),u.URL.revokeObjectURL(n)}))}}};var x=function(){},E=function(){var e=arguments.length>0&&arguments[0]!==s?arguments[0]:{},t=arguments[1];t=u.isFunction(t)?t:x;var r=i.createElement("canvas"),n=void 0,o=e.images,a=!!o.length,c=e.cameraStream,l=e.crop,h=e.filter,d=e.fontColor,p=e.fontFamily,f=e.fontWeight,m=e.keepCameraOn,g=(e.numWorkers,e.progressCallback),b=e.saveRenderingContexts,v=e.savedRenderingContexts,y=e.text,w=e.textAlign,_=e.textBaseline,E=e.videoElement,C=e.videoHeight,T=e.videoWidth,A=e.webcamVideoElement,O=Number(e.gifWidth),P=Number(e.gifHeight),M=Number(e.interval),k=(Number(e.sampleInterval),a?0:1e3*M),I=[],R=v.length?v.length:e.numFrames,N=R,L=new S(e),j=u.getFontSize(e),F=e.textXCoordinate?e.textXCoordinate:"left"===w?1:"right"===w?O:O/2,U=e.textYCoordinate?e.textYCoordinate:"top"===_?1:"center"===_?P/2:P,V=f+" "+j+" "+p,D=l?Math.floor(l.scaledWidth/2):0,B=l?T-l.scaledWidth:0,W=l?Math.floor(l.scaledHeight/2):0,z=l?C-l.scaledHeight:0,H=function e(){var r=N-1;function i(){var i;b&&I.push(n.getImageData(0,0,O,P)),y&&(n.font=V,n.fillStyle=d,n.textAlign=w,n.textBaseline=_,n.fillText(y,F,U)),i=n.getImageData(0,0,O,P),L.addFrameImageData(i),g((R-(N=r))/R),r>0&&u.requestTimeout(e,k),N||L.getBase64GIF((function(e){t({error:!1,errorCode:"",errorMsg:"",image:e,cameraStream:c,videoElement:E,webcamVideoElement:A,savedRenderingContexts:I,keepCameraOn:m})}))}v.length?(n.putImageData(v[R-N],0,0),i()):function e(){try{B>T&&(B=T),z>C&&(z=C),D<0&&(D=0),W<0&&(W=0),n.filter=h,n.drawImage(E,D,W,B,z,0,0,O,P),i()}catch(t){if("NS_ERROR_NOT_AVAILABLE"!==t.name)throw t;u.requestTimeout(e,100)}}()};R=R!==s?R:10,M=M!==s?M:.1,r.width=O,r.height=P,n=r.getContext("2d"),function e(){v.length||0!==E.currentTime?H():u.requestTimeout(e,100)}()},C={loadedData:!1,defaultVideoDimensions:{width:640,height:480},findVideoSize:function e(t){e.attempts=e.attempts||0;var r=t.cameraStream,n=t.completedCallback,i=t.videoElement;i&&(i.videoWidth>0&&i.videoHeight>0?(i.removeEventListener("loadeddata",C.findVideoSize),n({videoElement:i,cameraStream:r,videoWidth:i.videoWidth,videoHeight:i.videoHeight})):e.attempts<10?(e.attempts+=1,u.requestTimeout((function(){C.findVideoSize(t)}),400)):n({videoElement:i,cameraStream:r,videoWidth:C.defaultVideoDimensions.width,videoHeight:C.defaultVideoDimensions.height}))},onStreamingTimeout:function(e){u.isFunction(e)&&e({error:!0,errorCode:"getUserMedia",errorMsg:"There was an issue with the getUserMedia API - Timed out while trying to start streaming",image:null,cameraStream:{}})},stream:function(e){var t=u.isArray(e.existingVideo)?e.existingVideo[0]:e.existingVideo,r=e.cameraStream,n=e.completedCallback,i=e.streamedCallback,o=e.videoElement;if(u.isFunction(i)&&i(),t){if(u.isString(t))o.src=t,o.innerHTML='<source src="'+t+'" type="video/'+u.getExtension(t)+'" />';else if(t instanceof Blob){try{o.src=u.URL.createObjectURL(t)}catch(e){}o.innerHTML='<source src="'+t+'" type="'+t.type+'" />'}}else if(o.mozSrcObject)o.mozSrcObject=r;else if(u.URL)try{o.srcObject=r,o.src=u.URL.createObjectURL(r)}catch(e){o.srcObject=r}o.play(),u.requestTimeout((function e(){e.count=e.count||0,!0===C.loadedData?(C.findVideoSize({videoElement:o,cameraStream:r,completedCallback:n}),C.loadedData=!1):(e.count+=1)>10?C.findVideoSize({videoElement:o,cameraStream:r,completedCallback:n}):e()}),0)},startStreaming:function(e){var t=u.isFunction(e.error)?e.error:u.noop,r=u.isFunction(e.streamed)?e.streamed:u.noop,n=u.isFunction(e.completed)?e.completed:u.noop,o=e.crossOrigin,s=e.existingVideo,a=e.lastCameraStream,c=e.options,l=e.webcamVideoElement,h=u.isElement(s)?s:l||i.createElement("video");o&&(h.crossOrigin=c.crossOrigin),h.autoplay=!0,h.loop=!0,h.muted=!0,h.addEventListener("loadeddata",(function(e){C.loadedData=!0,c.offset&&(h.currentTime=c.offset)})),s?C.stream({videoElement:h,existingVideo:s,completedCallback:n}):a?C.stream({videoElement:h,cameraStream:a,streamedCallback:r,completedCallback:n}):u.getUserMedia({video:!0},(function(e){C.stream({videoElement:h,cameraStream:e,streamedCallback:r,completedCallback:n})}),t)},startVideoStreaming:function(e){var t=arguments.length>1&&arguments[1]!==s?arguments[1]:{},r=t.timeout!==s?t.timeout:0,n=t.callback,i=t.webcamVideoElement,o=void 0;r>0&&(o=u.requestTimeout((function(){C.onStreamingTimeout(n)}),1e4)),C.startStreaming({error:function(){n({error:!0,errorCode:"getUserMedia",errorMsg:"There was an issue with the getUserMedia API - the user probably denied permission",image:null,cameraStream:{}})},streamed:function(){clearTimeout(o)},completed:function(){var t=arguments.length>0&&arguments[0]!==s?arguments[0]:{},r=t.cameraStream,n=t.videoElement,i=t.videoHeight,o=t.videoWidth;e({cameraStream:r,videoElement:n,videoHeight:i,videoWidth:o})},lastCameraStream:t.lastCameraStream,webcamVideoElement:i,crossOrigin:t.crossOrigin,options:t})},stopVideoStreaming:function(e){var t=e=u.isObject(e)?e:{},r=t.keepCameraOn,n=t.videoElement,i=t.webcamVideoElement,o=e.cameraStream||{},s=o.getTracks&&o.getTracks()||[],a=!!s.length,c=s[0];!r&&a&&u.isFunction(c.stop)&&c.stop(),u.isElement(n)&&!i&&(n.pause(),u.isFunction(u.URL.revokeObjectURL)&&!u.webWorkerError&&n.src&&u.URL.revokeObjectURL(n.src),u.removeElement(n))}};function T(e){e=u.isObject(e)?e:{},C.stopVideoStreaming(e)}function A(e,t){var r=e.options||{},n=r.images,o=r.video,a=Number(r.gifWidth),c=Number(r.gifHeight),l=(Number(r.numFrames),e.cameraStream),h=e.videoElement,d=e.videoWidth,p=e.videoHeight,f=function(){var e=arguments.length>0&&arguments[0]!==s?arguments[0]:{},t=e.videoWidth,r=e.videoHeight,n=e.gifWidth,i=e.gifHeight,o={width:0,height:0,scaledWidth:0,scaledHeight:0};return t>r?(o.width=Math.round(t*(i/r))-n,o.scaledWidth=Math.round(o.width*(r/i))):(o.height=Math.round(r*(n/t))-i,o.scaledHeight=Math.round(o.height*(t/n))),o}({videoWidth:d,videoHeight:p,gifHeight:c,gifWidth:a}),m=t;r.crop=f,r.videoElement=h,r.videoWidth=d,r.videoHeight=p,r.cameraStream=l,u.isElement(h)&&(h.width=a+f.width,h.height=c+f.height,r.webcamVideoElement||(u.setCSSAttr(h,{position:"fixed",opacity:"0"}),i.body.appendChild(h)),h.play(),E(r,(function(e){n&&n.length||o&&o.length||T(e),m(e)})))}function O(e,t){if(t=u.isFunction(e)?e:t,e=u.isObject(e)?e:{},u.isFunction(t)){var r=u.mergeOptions(f,e)||{},n=e.cameraStream,o=r.images,a=o?o.length:0,c=r.video,l=r.webcamVideoElement;r=u.mergeOptions(r,{gifWidth:Math.floor(r.gifWidth),gifHeight:Math.floor(r.gifHeight)}),a?function(){var e=arguments.length>0&&arguments[0]!==s?arguments[0]:{},t=e.callback,r=e.images,n=e.options,o=e.imagesLength,a={getUserMedia:!0,"window.URL":!0},c=h.validate(a),l=[],d=0,p=void 0,f=void 0;if(c.error)return t(c);function m(){u.each(l,(function(e,t){t&&(t.text?f.addFrame(t.img,n,t.text):f.addFrame(t,n))})),_(f,t)}f=new S(n),u.each(r,(function(e,r){var s=r;r.src&&(s=s.src),u.isElement(s)?(n.crossOrigin&&(s.crossOrigin=n.crossOrigin),l[e]=s,(d+=1)===o&&m()):u.isString(s)&&(p=new Image,n.crossOrigin&&(p.crossOrigin=n.crossOrigin),function(n){r.text&&(n.text=r.text),n.onerror=function(e){var r=void 0;if(0==--o)return(r={}).error="None of the requested images was capable of being retrieved",t(r)},n.onload=function(t){r.text?l[e]={img:n,text:n.text}:l[e]=n,(d+=1)===o&&m(),u.removeElement(n)},n.src=s}(p),u.setCSSAttr(p,{position:"fixed",opacity:"0"}),i.body.appendChild(p))}))}({images:o,imagesLength:a,callback:t,options:r}):c?function(){var e=arguments.length>0&&arguments[0]!==s?arguments[0]:{},t=e.callback,r=e.existingVideo,n=e.options,i={getUserMedia:!0,"window.URL":!0},o=h.validate(i),a=void 0,c=void 0;if(o.error)return t(o);if(u.isElement(r)&&r.src){if(c=r.src,a=u.getExtension(c),!u.isSupported.videoCodecs[a])return t(h.messages.videoCodecs)}else u.isArray(r)&&u.each(r,(function(e,t){if(a=t instanceof Blob?t.type.substr(t.type.lastIndexOf("/")+1,t.length):t.substr(t.lastIndexOf(".")+1,t.length),u.isSupported.videoCodecs[a])return r=t,!1}));C.startStreaming({completed:function(e){e.options=n||{},A(e,t)},existingVideo:r,crossOrigin:n.crossOrigin,options:n})}({existingVideo:c,callback:t,options:r}):function(){var e=arguments.length>0&&arguments[0]!==s?arguments[0]:{},t=e.callback,r=e.lastCameraStream,n=e.options,i=e.webcamVideoElement;if(!g())return t(h.validate());n.savedRenderingContexts.length?E(n,(function(e){t(e)})):C.startVideoStreaming((function(){var e=arguments.length>0&&arguments[0]!==s?arguments[0]:{};e.options=n||{},A(e,t)}),{lastCameraStream:r,callback:t,webcamVideoElement:i,crossOrigin:n.crossOrigin})}({lastCameraStream:n,callback:t,webcamVideoElement:l,options:r})}}var P={utils:l,error:d,defaultOptions:m,createGIF:O,takeSnapShot:function(e,t){if(t=u.isFunction(e)?e:t,e=u.isObject(e)?e:{},u.isFunction(t)){var r=u.mergeOptions(f,e);O(u.mergeOptions(r,{interval:.1,numFrames:1,gifWidth:Math.floor(r.gifWidth),gifHeight:Math.floor(r.gifHeight)}),t)}},stopVideoStreaming:T,isSupported:function(){return h.isValid()},isWebCamGIFSupported:g,isExistingVideoGIFSupported:function(e){var t=!1;if(u.isArray(e)&&e.length){if(u.each(e,(function(e,r){u.isSupported.videoCodecs[r]&&(t=!0)})),!t)return!1}else if(u.isString(e)&&e.length&&!u.isSupported.videoCodecs[e])return!1;return h.isValid({getUserMedia:!0})},isExistingImagesGIFSupported:function(){return h.isValid({getUserMedia:!0})},VERSION:"0.4.5"};(r=function(){return P}.apply(t,[]))===s||(e.exports=r)}("undefined"!=typeof window?window:{},"undefined"!=typeof document?document:{createElement:function(){}},"undefined"!=typeof window?window.navigator:{})},204:()=>{},365:(e,t)=>{var r,n;void 0===(n="function"==typeof(r=function(){"use strict";var e="13.1.5";function t(e){e.parentElement.removeChild(e)}function r(e){return null!=e}function n(e){e.preventDefault()}function i(e){return"number"==typeof e&&!isNaN(e)&&isFinite(e)}function o(e,t,r){r>0&&(u(e,t),setTimeout((function(){l(e,t)}),r))}function s(e){return Math.max(Math.min(e,100),0)}function a(e){return Array.isArray(e)?e:[e]}function c(e){var t=(e=String(e)).split(".");return t.length>1?t[1].length:0}function u(e,t){e.classList?e.classList.add(t):e.className+=" "+t}function l(e,t){e.classList?e.classList.remove(t):e.className=e.className.replace(new RegExp("(^|\\b)"+t.split(" ").join("|")+"(\\b|$)","gi")," ")}function h(e){var t=void 0!==window.pageXOffset,r="CSS1Compat"===(e.compatMode||"");return{x:t?window.pageXOffset:r?e.documentElement.scrollLeft:e.body.scrollLeft,y:t?window.pageYOffset:r?e.documentElement.scrollTop:e.body.scrollTop}}function d(e,t){return 100/(t-e)}function p(e,t){return 100*t/(e[1]-e[0])}function f(e,t){for(var r=1;e>=t[r];)r+=1;return r}function m(e,t,r){if(r>=e.slice(-1)[0])return 100;var n=f(r,e),i=e[n-1],o=e[n],s=t[n-1],a=t[n];return s+function(e,t){return p(e,e[0]<0?t+Math.abs(e[0]):t-e[0])}([i,o],r)/d(s,a)}function g(e,t,r,n){if(100===n)return n;var i=f(n,e),o=e[i-1],s=e[i];return r?n-o>(s-o)/2?s:o:t[i-1]?e[i-1]+function(e,t){return Math.round(e/t)*t}(n-e[i-1],t[i-1]):n}function b(e,t,r){var n;if("number"==typeof t&&(t=[t]),!Array.isArray(t))throw new Error("noUiSlider (13.1.5): 'range' contains invalid value.");if(!i(n="min"===e?0:"max"===e?100:parseFloat(e))||!i(t[0]))throw new Error("noUiSlider (13.1.5): 'range' value isn't numeric.");r.xPct.push(n),r.xVal.push(t[0]),n?r.xSteps.push(!isNaN(t[1])&&t[1]):isNaN(t[1])||(r.xSteps[0]=t[1]),r.xHighestCompleteStep.push(0)}function v(e,t,r){if(t)if(r.xVal[e]!==r.xVal[e+1]){r.xSteps[e]=p([r.xVal[e],r.xVal[e+1]],t)/d(r.xPct[e],r.xPct[e+1]);var n=(r.xVal[e+1]-r.xVal[e])/r.xNumSteps[e],i=Math.ceil(Number(n.toFixed(3))-1),o=r.xVal[e]+r.xNumSteps[e]*i;r.xHighestCompleteStep[e]=o}else r.xSteps[e]=r.xHighestCompleteStep[e]=r.xVal[e]}function y(e,t,r){var n;this.xPct=[],this.xVal=[],this.xSteps=[r||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=t;var i=[];for(n in e)e.hasOwnProperty(n)&&i.push([e[n],n]);for(i.length&&"object"==typeof i[0][0]?i.sort((function(e,t){return e[0][0]-t[0][0]})):i.sort((function(e,t){return e[0]-t[0]})),n=0;n<i.length;n++)b(i[n][1],i[n][0],this);for(this.xNumSteps=this.xSteps.slice(0),n=0;n<this.xNumSteps.length;n++)v(n,this.xNumSteps[n],this)}y.prototype.getMargin=function(e){var t=this.xNumSteps[0];if(t&&e/t%1!=0)throw new Error("noUiSlider (13.1.5): 'limit', 'margin' and 'padding' must be divisible by step.");return 2===this.xPct.length&&p(this.xVal,e)},y.prototype.toStepping=function(e){return m(this.xVal,this.xPct,e)},y.prototype.fromStepping=function(e){return function(e,t,r){if(r>=100)return e.slice(-1)[0];var n=f(r,t),i=e[n-1],o=e[n],s=t[n-1];return function(e,t){return t*(e[1]-e[0])/100+e[0]}([i,o],(r-s)*d(s,t[n]))}(this.xVal,this.xPct,e)},y.prototype.getStep=function(e){return g(this.xPct,this.xSteps,this.snap,e)},y.prototype.getDefaultStep=function(e,t,r){var n=f(e,this.xPct);return(100===e||t&&e===this.xPct[n-1])&&(n=Math.max(n-1,1)),(this.xVal[n]-this.xVal[n-1])/r},y.prototype.getNearbySteps=function(e){var t=f(e,this.xPct);return{stepBefore:{startValue:this.xVal[t-2],step:this.xNumSteps[t-2],highestStep:this.xHighestCompleteStep[t-2]},thisStep:{startValue:this.xVal[t-1],step:this.xNumSteps[t-1],highestStep:this.xHighestCompleteStep[t-1]},stepAfter:{startValue:this.xVal[t],step:this.xNumSteps[t],highestStep:this.xHighestCompleteStep[t]}}},y.prototype.countStepDecimals=function(){var e=this.xNumSteps.map(c);return Math.max.apply(null,e)},y.prototype.convert=function(e){return this.getStep(this.toStepping(e))};var w={to:function(e){return void 0!==e&&e.toFixed(2)},from:Number};function S(e){if(function(e){return"object"==typeof e&&"function"==typeof e.to&&"function"==typeof e.from}(e))return!0;throw new Error("noUiSlider (13.1.5): 'format' requires 'to' and 'from' methods.")}function _(e,t){if(!i(t))throw new Error("noUiSlider (13.1.5): 'step' is not numeric.");e.singleStep=t}function x(e,t){if("object"!=typeof t||Array.isArray(t))throw new Error("noUiSlider (13.1.5): 'range' is not an object.");if(void 0===t.min||void 0===t.max)throw new Error("noUiSlider (13.1.5): Missing 'min' or 'max' in 'range'.");if(t.min===t.max)throw new Error("noUiSlider (13.1.5): 'range' 'min' and 'max' cannot be equal.");e.spectrum=new y(t,e.snap,e.singleStep)}function E(e,t){if(t=a(t),!Array.isArray(t)||!t.length)throw new Error("noUiSlider (13.1.5): 'start' option is incorrect.");e.handles=t.length,e.start=t}function C(e,t){if(e.snap=t,"boolean"!=typeof t)throw new Error("noUiSlider (13.1.5): 'snap' option must be a boolean.")}function T(e,t){if(e.animate=t,"boolean"!=typeof t)throw new Error("noUiSlider (13.1.5): 'animate' option must be a boolean.")}function A(e,t){if(e.animationDuration=t,"number"!=typeof t)throw new Error("noUiSlider (13.1.5): 'animationDuration' option must be a number.")}function O(e,t){var r,n=[!1];if("lower"===t?t=[!0,!1]:"upper"===t&&(t=[!1,!0]),!0===t||!1===t){for(r=1;r<e.handles;r++)n.push(t);n.push(!1)}else{if(!Array.isArray(t)||!t.length||t.length!==e.handles+1)throw new Error("noUiSlider (13.1.5): 'connect' option doesn't match handle count.");n=t}e.connect=n}function P(e,t){switch(t){case"horizontal":e.ort=0;break;case"vertical":e.ort=1;break;default:throw new Error("noUiSlider (13.1.5): 'orientation' option is invalid.")}}function M(e,t){if(!i(t))throw new Error("noUiSlider (13.1.5): 'margin' option must be numeric.");if(0!==t&&(e.margin=e.spectrum.getMargin(t),!e.margin))throw new Error("noUiSlider (13.1.5): 'margin' option is only supported on linear sliders.")}function k(e,t){if(!i(t))throw new Error("noUiSlider (13.1.5): 'limit' option must be numeric.");if(e.limit=e.spectrum.getMargin(t),!e.limit||e.handles<2)throw new Error("noUiSlider (13.1.5): 'limit' option is only supported on linear sliders with 2 or more handles.")}function I(e,t){if(!i(t)&&!Array.isArray(t))throw new Error("noUiSlider (13.1.5): 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(t)&&2!==t.length&&!i(t[0])&&!i(t[1]))throw new Error("noUiSlider (13.1.5): 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==t){if(Array.isArray(t)||(t=[t,t]),e.padding=[e.spectrum.getMargin(t[0]),e.spectrum.getMargin(t[1])],!1===e.padding[0]||!1===e.padding[1])throw new Error("noUiSlider (13.1.5): 'padding' option is only supported on linear sliders.");if(e.padding[0]<0||e.padding[1]<0)throw new Error("noUiSlider (13.1.5): 'padding' option must be a positive number(s).");if(e.padding[0]+e.padding[1]>100)throw new Error("noUiSlider (13.1.5): 'padding' option must not exceed 100% of the range.")}}function R(e,t){switch(t){case"ltr":e.dir=0;break;case"rtl":e.dir=1;break;default:throw new Error("noUiSlider (13.1.5): 'direction' option was not recognized.")}}function N(e,t){if("string"!=typeof t)throw new Error("noUiSlider (13.1.5): 'behaviour' must be a string containing options.");var r=t.indexOf("tap")>=0,n=t.indexOf("drag")>=0,i=t.indexOf("fixed")>=0,o=t.indexOf("snap")>=0,s=t.indexOf("hover")>=0,a=t.indexOf("unconstrained")>=0;if(i){if(2!==e.handles)throw new Error("noUiSlider (13.1.5): 'fixed' behaviour must be used with 2 handles");M(e,e.start[1]-e.start[0])}if(a&&(e.margin||e.limit))throw new Error("noUiSlider (13.1.5): 'unconstrained' behaviour cannot be used with margin or limit");e.events={tap:r||o,drag:n,fixed:i,snap:o,hover:s,unconstrained:a}}function L(e,t){if(!1!==t)if(!0===t){e.tooltips=[];for(var r=0;r<e.handles;r++)e.tooltips.push(!0)}else{if(e.tooltips=a(t),e.tooltips.length!==e.handles)throw new Error("noUiSlider (13.1.5): must pass a formatter for all handles.");e.tooltips.forEach((function(e){if("boolean"!=typeof e&&("object"!=typeof e||"function"!=typeof e.to))throw new Error("noUiSlider (13.1.5): 'tooltips' must be passed a formatter or 'false'.")}))}}function j(e,t){e.ariaFormat=t,S(t)}function F(e,t){e.format=t,S(t)}function U(e,t){if(e.keyboardSupport=t,"boolean"!=typeof t)throw new Error("noUiSlider (13.1.5): 'keyboardSupport' option must be a boolean.")}function V(e,t){e.documentElement=t}function D(e,t){if("string"!=typeof t&&!1!==t)throw new Error("noUiSlider (13.1.5): 'cssPrefix' must be a string or `false`.");e.cssPrefix=t}function B(e,t){if("object"!=typeof t)throw new Error("noUiSlider (13.1.5): 'cssClasses' must be an object.");if("string"==typeof e.cssPrefix)for(var r in e.cssClasses={},t)t.hasOwnProperty(r)&&(e.cssClasses[r]=e.cssPrefix+t[r]);else e.cssClasses=t}function W(e){var t={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,ariaFormat:w,format:w},n={step:{r:!1,t:_},start:{r:!0,t:E},connect:{r:!0,t:O},direction:{r:!0,t:R},snap:{r:!1,t:C},animate:{r:!1,t:T},animationDuration:{r:!1,t:A},range:{r:!0,t:x},orientation:{r:!1,t:P},margin:{r:!1,t:M},limit:{r:!1,t:k},padding:{r:!1,t:I},behaviour:{r:!0,t:N},ariaFormat:{r:!1,t:j},format:{r:!1,t:F},tooltips:{r:!1,t:L},keyboardSupport:{r:!0,t:U},documentElement:{r:!1,t:V},cssPrefix:{r:!0,t:D},cssClasses:{r:!0,t:B}},i={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:{target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"}};e.format&&!e.ariaFormat&&(e.ariaFormat=e.format),Object.keys(n).forEach((function(o){if(!r(e[o])&&void 0===i[o]){if(n[o].r)throw new Error("noUiSlider (13.1.5): '"+o+"' is required.");return!0}n[o].t(t,r(e[o])?e[o]:i[o])})),t.pips=e.pips;var o=document.createElement("div"),s=void 0!==o.style.msTransform,a=void 0!==o.style.transform;t.transformRule=a?"transform":s?"msTransform":"webkitTransform";return t.style=[["left","top"],["right","bottom"]][t.dir][t.ort],t}function z(e,r,i){var c,d,p,f,m,g,b,v,y=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},w=window.CSS&&CSS.supports&&CSS.supports("touch-action","none")&&function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("test",null,t)}catch(e){}return e}(),S=e,_=r.spectrum,x=[],E=[],C=[],T=0,A={},O=e.ownerDocument,P=r.documentElement||O.documentElement,M=O.body,k="rtl"===O.dir||1===r.ort?0:100;function I(e,t){var r=O.createElement("div");return t&&u(r,t),e.appendChild(r),r}function R(e,t){var n=I(e,r.cssClasses.origin),i=I(n,r.cssClasses.handle);return I(i,r.cssClasses.touchArea),i.setAttribute("data-handle",t),r.keyboardSupport&&(i.setAttribute("tabindex","0"),i.addEventListener("keydown",(function(e){return function(e,t){if(j()||F(t))return!1;var n=["Left","Right"],i=["Down","Up"];r.dir&&!r.ort?n.reverse():r.ort&&!r.dir&&i.reverse();var o=e.key.replace("Arrow",""),s=o===i[0]||o===n[0],a=o===i[1]||o===n[1];if(!s&&!a)return!0;e.preventDefault();var c=s?0:1,u=pe(t)[c];return null===u||(!1===u&&(u=_.getDefaultStep(E[t],s,10)),u=Math.max(u,1e-7),u*=s?-1:1,he(t,x[t]+u,!0)),!1}(e,t)}))),i.setAttribute("role","slider"),i.setAttribute("aria-orientation",r.ort?"vertical":"horizontal"),0===t?u(i,r.cssClasses.handleLower):t===r.handles-1&&u(i,r.cssClasses.handleUpper),n}function N(e,t){return!!t&&I(e,r.cssClasses.connect)}function L(e,t){return!!r.tooltips[t]&&I(e.firstChild,r.cssClasses.tooltip)}function j(){return S.hasAttribute("disabled")}function F(e){return d[e].hasAttribute("disabled")}function U(){m&&(ee("update.tooltips"),m.forEach((function(e){e&&t(e)})),m=null)}function V(){U(),m=d.map(L),Z("update.tooltips",(function(e,t,n){if(m[t]){var i=e[t];!0!==r.tooltips[t]&&(i=r.tooltips[t].to(n[t])),m[t].innerHTML=i}}))}function D(e,t,n){var i=O.createElement("div"),o=[];o[0]=r.cssClasses.valueNormal,o[1]=r.cssClasses.valueLarge,o[2]=r.cssClasses.valueSub;var s=[];s[0]=r.cssClasses.markerNormal,s[1]=r.cssClasses.markerLarge,s[2]=r.cssClasses.markerSub;var a=[r.cssClasses.valueHorizontal,r.cssClasses.valueVertical],c=[r.cssClasses.markerHorizontal,r.cssClasses.markerVertical];function l(e,t){var n=t===r.cssClasses.value,i=n?o:s;return t+" "+(n?a:c)[r.ort]+" "+i[e]}return u(i,r.cssClasses.pips),u(i,0===r.ort?r.cssClasses.pipsHorizontal:r.cssClasses.pipsVertical),Object.keys(e).forEach((function(o){!function(e,o,s){if(-1!==(s=t?t(o,s):s)){var a=I(i,!1);a.className=l(s,r.cssClasses.marker),a.style[r.style]=e+"%",s>0&&((a=I(i,!1)).className=l(s,r.cssClasses.value),a.setAttribute("data-value",o),a.style[r.style]=e+"%",a.innerHTML=n.to(o))}}(o,e[o][0],e[o][1])})),i}function B(){f&&(t(f),f=null)}function z(e){B();var t=e.mode,r=e.density||1,n=e.filter||!1,i=function(e,t,r){var n,i={},o=_.xVal[0],s=_.xVal[_.xVal.length-1],a=!1,c=!1,u=0;return(n=r.slice().sort((function(e,t){return e-t})),r=n.filter((function(e){return!this[e]&&(this[e]=!0)}),{}))[0]!==o&&(r.unshift(o),a=!0),r[r.length-1]!==s&&(r.push(s),c=!0),r.forEach((function(n,o){var s,l,h,d,p,f,m,g,b,v,y=n,w=r[o+1],S="steps"===t;if(S&&(s=_.xNumSteps[o]),s||(s=w-y),!1!==y&&void 0!==w)for(s=Math.max(s,1e-7),l=y;l<=w;l=(l+s).toFixed(7)/1){for(g=(p=(d=_.toStepping(l))-u)/e,v=p/(b=Math.round(g)),h=1;h<=b;h+=1)i[(f=u+h*v).toFixed(5)]=[_.fromStepping(f),0];m=r.indexOf(l)>-1?1:S?2:0,!o&&a&&(m=0),l===w&&c||(i[d.toFixed(5)]=[l,m]),u=d}})),i}(r,t,function(e,t,r){if("range"===e||"steps"===e)return _.xVal;if("count"===e){if(t<2)throw new Error("noUiSlider (13.1.5): 'values' (>= 2) required for mode 'count'.");var n=t-1,i=100/n;for(t=[];n--;)t[n]=n*i;t.push(100),e="positions"}return"positions"===e?t.map((function(e){return _.fromStepping(r?_.getStep(e):e)})):"values"===e?r?t.map((function(e){return _.fromStepping(_.getStep(_.toStepping(e)))})):t:void 0}(t,e.values||!1,e.stepped||!1)),o=e.format||{to:Math.round};return f=S.appendChild(D(i,n,o))}function H(){var e=c.getBoundingClientRect(),t="offset"+["Width","Height"][r.ort];return 0===r.ort?e.width||c[t]:e.height||c[t]}function $(e,t,n,i){var o=function(o){return!!(o=function(e,t,r){var n,i,o=0===e.type.indexOf("touch"),s=0===e.type.indexOf("mouse"),a=0===e.type.indexOf("pointer");if(0===e.type.indexOf("MSPointer")&&(a=!0),o){var c=function(e){return e.target===r||r.contains(e.target)};if("touchstart"===e.type){var u=Array.prototype.filter.call(e.touches,c);if(u.length>1)return!1;n=u[0].pageX,i=u[0].pageY}else{var l=Array.prototype.find.call(e.changedTouches,c);if(!l)return!1;n=l.pageX,i=l.pageY}}return t=t||h(O),(s||a)&&(n=e.clientX+t.x,i=e.clientY+t.y),e.pageOffset=t,e.points=[n,i],e.cursor=s||a,e}(o,i.pageOffset,i.target||t))&&!(j()&&!i.doNotReject)&&(s=S,a=r.cssClasses.tap,!((s.classList?s.classList.contains(a):new RegExp("\\b"+a+"\\b").test(s.className))&&!i.doNotReject))&&!(e===y.start&&void 0!==o.buttons&&o.buttons>1)&&(!i.hover||!o.buttons)&&(w||o.preventDefault(),o.calcPoint=o.points[r.ort],void n(o,i));var s,a},s=[];return e.split(" ").forEach((function(e){t.addEventListener(e,o,!!w&&{passive:!0}),s.push([e,o])})),s}function Y(e){var t,n,i,o,a,u,l=100*(e-(t=c,n=r.ort,i=t.getBoundingClientRect(),o=t.ownerDocument,a=o.documentElement,u=h(o),/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(u.x=0),n?i.top+u.y-a.clientTop:i.left+u.x-a.clientLeft))/H();return l=s(l),r.dir?100-l:l}function q(e,t){"mouseout"===e.type&&"HTML"===e.target.nodeName&&null===e.relatedTarget&&X(e,t)}function G(e,t){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===e.buttons&&0!==t.buttonsProperty)return X(e,t);var n=(r.dir?-1:1)*(e.calcPoint-t.startCalcPoint);ie(n>0,100*n/t.baseSize,t.locations,t.handleNumbers)}function X(e,t){t.handle&&(l(t.handle,r.cssClasses.active),T-=1),t.listeners.forEach((function(e){P.removeEventListener(e[0],e[1])})),0===T&&(l(S,r.cssClasses.drag),se(),e.cursor&&(M.style.cursor="",M.removeEventListener("selectstart",n))),t.handleNumbers.forEach((function(e){te("change",e),te("set",e),te("end",e)}))}function K(e,t){if(t.handleNumbers.some(F))return!1;var i;1===t.handleNumbers.length&&(i=d[t.handleNumbers[0]].children[0],T+=1,u(i,r.cssClasses.active)),e.stopPropagation();var o=[],s=$(y.move,P,G,{target:e.target,handle:i,listeners:o,startCalcPoint:e.calcPoint,baseSize:H(),pageOffset:e.pageOffset,handleNumbers:t.handleNumbers,buttonsProperty:e.buttons,locations:E.slice()}),a=$(y.end,P,X,{target:e.target,handle:i,listeners:o,doNotReject:!0,handleNumbers:t.handleNumbers}),c=$("mouseout",P,q,{target:e.target,handle:i,listeners:o,doNotReject:!0,handleNumbers:t.handleNumbers});o.push.apply(o,s.concat(a,c)),e.cursor&&(M.style.cursor=getComputedStyle(e.target).cursor,d.length>1&&u(S,r.cssClasses.drag),M.addEventListener("selectstart",n,!1)),t.handleNumbers.forEach((function(e){te("start",e)}))}function Q(e){e.stopPropagation();var t=Y(e.calcPoint),n=function(e){var t=100,r=!1;return d.forEach((function(n,i){if(!F(i)){var o=Math.abs(E[i]-e);(o<t||100===o&&100===t)&&(r=i,t=o)}})),r}(t);if(!1===n)return!1;r.events.snap||o(S,r.cssClasses.tap,r.animationDuration),ae(n,t,!0,!0),se(),te("slide",n,!0),te("update",n,!0),te("change",n,!0),te("set",n,!0),r.events.snap&&K(e,{handleNumbers:[n]})}function J(e){var t=Y(e.calcPoint),r=_.getStep(t),n=_.fromStepping(r);Object.keys(A).forEach((function(e){"hover"===e.split(".")[0]&&A[e].forEach((function(e){e.call(g,n)}))}))}function Z(e,t){A[e]=A[e]||[],A[e].push(t),"update"===e.split(".")[0]&&d.forEach((function(e,t){te("update",t)}))}function ee(e){var t=e&&e.split(".")[0],r=t&&e.substring(t.length);Object.keys(A).forEach((function(e){var n=e.split(".")[0],i=e.substring(n.length);t&&t!==n||r&&r!==i||delete A[e]}))}function te(e,t,n){Object.keys(A).forEach((function(i){var o=i.split(".")[0];e===o&&A[i].forEach((function(e){e.call(g,x.map(r.format.to),t,x.slice(),n||!1,E.slice())}))}))}function re(e,t,n,i,o,a){return d.length>1&&!r.events.unconstrained&&(i&&t>0&&(n=Math.max(n,e[t-1]+r.margin)),o&&t<d.length-1&&(n=Math.min(n,e[t+1]-r.margin))),d.length>1&&r.limit&&(i&&t>0&&(n=Math.min(n,e[t-1]+r.limit)),o&&t<d.length-1&&(n=Math.max(n,e[t+1]-r.limit))),r.padding&&(0===t&&(n=Math.max(n,r.padding[0])),t===d.length-1&&(n=Math.min(n,100-r.padding[1]))),!((n=s(n=_.getStep(n)))===e[t]&&!a)&&n}function ne(e,t){var n=r.ort;return(n?t:e)+", "+(n?e:t)}function ie(e,t,r,n){var i=r.slice(),o=[!e,e],s=[e,!e];n=n.slice(),e&&n.reverse(),n.length>1?n.forEach((function(e,r){var n=re(i,e,i[e]+t,o[r],s[r],!1);!1===n?t=0:(t=n-i[e],i[e]=n)})):o=s=[!0];var a=!1;n.forEach((function(e,n){a=ae(e,r[e]+t,o[n],s[n])||a})),a&&n.forEach((function(e){te("update",e),te("slide",e)}))}function oe(e,t){return r.dir?100-e-t:e}function se(){C.forEach((function(e){var t=E[e]>50?-1:1,r=3+(d.length+t*e);d[e].style.zIndex=r}))}function ae(e,t,n,i){return!1!==(t=re(E,e,t,n,i,!1))&&(function(e,t){E[e]=t,x[e]=_.fromStepping(t);var n="translate("+ne(oe(t,0)-k+"%","0")+")";d[e].style[r.transformRule]=n,ce(e),ce(e+1)}(e,t),!0)}function ce(e){if(p[e]){var t=0,n=100;0!==e&&(t=E[e-1]),e!==p.length-1&&(n=E[e]);var i=n-t,o="translate("+ne(oe(t,i)+"%","0")+")",s="scale("+ne(i/100,"1")+")";p[e].style[r.transformRule]=o+" "+s}}function ue(e,t){return null===e||!1===e||void 0===e?E[t]:("number"==typeof e&&(e=String(e)),e=r.format.from(e),!1===(e=_.toStepping(e))||isNaN(e)?E[t]:e)}function le(e,t){var n=a(e),i=void 0===E[0];t=void 0===t||!!t,r.animate&&!i&&o(S,r.cssClasses.tap,r.animationDuration),C.forEach((function(e){ae(e,ue(n[e],e),!0,!1)})),C.forEach((function(e){ae(e,E[e],!0,!0)})),se(),C.forEach((function(e){te("update",e),null!==n[e]&&t&&te("set",e)}))}function he(e,t,r){if(!((e=Number(e))>=0&&e<C.length))throw new Error("noUiSlider (13.1.5): invalid handle number, got: "+e);ae(e,ue(t,e),!0,!0),te("update",e),r&&te("set",e)}function de(){var e=x.map(r.format.to);return 1===e.length?e[0]:e}function pe(e){var t=E[e],n=_.getNearbySteps(t),i=x[e],o=n.thisStep.step,s=null;if(r.snap)return[i-n.stepBefore.startValue||null,n.stepAfter.startValue-i||null];!1!==o&&i+o>n.stepAfter.startValue&&(o=n.stepAfter.startValue-i),s=i>n.thisStep.startValue?n.thisStep.step:!1!==n.stepBefore.step&&i-n.stepBefore.highestStep,100===t?o=null:0===t&&(s=null);var a=_.countStepDecimals();return null!==o&&!1!==o&&(o=Number(o.toFixed(a))),null!==s&&!1!==s&&(s=Number(s.toFixed(a))),[s,o]}return u(v=S,r.cssClasses.target),0===r.dir?u(v,r.cssClasses.ltr):u(v,r.cssClasses.rtl),0===r.ort?u(v,r.cssClasses.horizontal):u(v,r.cssClasses.vertical),c=I(v,r.cssClasses.base),function(e,t){var n=I(t,r.cssClasses.connects);d=[],(p=[]).push(N(n,e[0]));for(var i=0;i<r.handles;i++)d.push(R(t,i)),C[i]=i,p.push(N(n,e[i+1]))}(r.connect,c),(b=r.events).fixed||d.forEach((function(e,t){$(y.start,e.children[0],K,{handleNumbers:[t]})})),b.tap&&$(y.start,c,Q,{}),b.hover&&$(y.move,c,J,{hover:!0}),b.drag&&p.forEach((function(e,t){if(!1!==e&&0!==t&&t!==p.length-1){var n=d[t-1],i=d[t],o=[e];u(e,r.cssClasses.draggable),b.fixed&&(o.push(n.children[0]),o.push(i.children[0])),o.forEach((function(e){$(y.start,e,K,{handles:[n,i],handleNumbers:[t-1,t]})}))}})),le(r.start),r.pips&&z(r.pips),r.tooltips&&V(),Z("update",(function(e,t,n,i,o){C.forEach((function(e){var t=d[e],i=re(E,e,0,!0,!0,!0),s=re(E,e,100,!0,!0,!0),a=o[e],c=r.ariaFormat.to(n[e]);i=_.fromStepping(i).toFixed(1),s=_.fromStepping(s).toFixed(1),a=_.fromStepping(a).toFixed(1),t.children[0].setAttribute("aria-valuemin",i),t.children[0].setAttribute("aria-valuemax",s),t.children[0].setAttribute("aria-valuenow",a),t.children[0].setAttribute("aria-valuetext",c)}))})),g={destroy:function(){for(var e in r.cssClasses)r.cssClasses.hasOwnProperty(e)&&l(S,r.cssClasses[e]);for(;S.firstChild;)S.removeChild(S.firstChild);delete S.noUiSlider},steps:function(){return C.map(pe)},on:Z,off:ee,get:de,set:le,setHandle:he,reset:function(e){le(r.start,e)},__moveHandles:function(e,t,r){ie(e,t,E,r)},options:i,updateOptions:function(e,t){var n=de(),o=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];o.forEach((function(t){void 0!==e[t]&&(i[t]=e[t])}));var s=W(i);o.forEach((function(t){void 0!==e[t]&&(r[t]=s[t])})),_=s.spectrum,r.margin=s.margin,r.limit=s.limit,r.padding=s.padding,r.pips?z(r.pips):B(),r.tooltips?V():U(),E=[],le(e.start||n,t)},target:S,removePips:B,removeTooltips:U,pips:z}}return{__spectrum:y,version:e,create:function(e,t){if(!e||!e.nodeName)throw new Error("noUiSlider (13.1.5): create requires a single element, got: "+e);if(e.noUiSlider)throw new Error("noUiSlider (13.1.5): Slider was already initialized.");var r=z(e,W(t),t);return e.noUiSlider=r,r}}})?r.apply(t,[]):r)||(e.exports=n)},650:(e,t,r)=>{"use strict";r.r(t),r.d(t,{ArgumentOutOfRangeError:()=>ye,AsyncSubject:()=>se,BehaviorSubject:()=>V,ConnectableObservable:()=>N,EMPTY:()=>$,EmptyError:()=>Se,GroupedObservable:()=>F,NEVER:()=>mt,Notification:()=>te,ObjectUnsubscribedError:()=>A,Observable:()=>E,ReplaySubject:()=>ie,Scheduler:()=>W,Subject:()=>M,Subscriber:()=>b,Subscription:()=>f,TimeoutError:()=>xe,UnsubscriptionError:()=>p,VirtualAction:()=>me,VirtualTimeScheduler:()=>fe,animationFrameScheduler:()=>pe,asapScheduler:()=>le,asyncScheduler:()=>he,bindCallback:()=>Ae,bindNodeCallback:()=>Me,combineLatest:()=>Ye,concat:()=>tt,config:()=>a,defer:()=>rt,empty:()=>Y,forkJoin:()=>nt,from:()=>Xe,fromEvent:()=>ot,fromEventPattern:()=>at,generate:()=>ct,identity:()=>ge,iif:()=>lt,interval:()=>dt,isObservable:()=>be,merge:()=>ft,never:()=>gt,noop:()=>S,observable:()=>w,of:()=>J,onErrorResumeNext:()=>bt,pairs:()=>vt,pipe:()=>_,queueScheduler:()=>H,race:()=>wt,range:()=>xt,throwError:()=>Z,timer:()=>Ct,using:()=>At,zip:()=>Ot});var n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function i(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}function o(e){return"function"==typeof e}var s=!1,a={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){e&&(new Error).stack,s=e},get useDeprecatedSynchronousErrorHandling(){return s}};function c(e){setTimeout((function(){throw e}))}var u={closed:!0,next:function(e){},error:function(e){if(a.useDeprecatedSynchronousErrorHandling)throw e;c(e)},complete:function(){}},l=Array.isArray||function(e){return e&&"number"==typeof e.length};function h(e){return null!==e&&"object"==typeof e}function d(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}d.prototype=Object.create(Error.prototype);var p=d,f=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var r=this,n=r._parent,i=r._parents,s=r._unsubscribe,a=r._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var c=-1,u=i?i.length:0;n;)n.remove(this),n=++c<u&&i[c]||null;if(o(s))try{s.call(this)}catch(r){t=!0,e=r instanceof p?m(r.errors):[r]}if(l(a))for(c=-1,u=a.length;++c<u;){var d=a[c];if(h(d))try{d.unsubscribe()}catch(r){t=!0,e=e||[],r instanceof p?e=e.concat(m(r.errors)):e.push(r)}}if(t)throw new p(e)}},e.prototype.add=function(t){var r=t;switch(typeof t){case"function":r=new e(t);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof e)){var n=r;(r=new e)._subscriptions=[n]}break;default:if(!t)return e.EMPTY;throw new Error("unrecognized teardown "+t+" added to Subscription.")}if(r._addParent(this)){var i=this._subscriptions;i?i.push(r):this._subscriptions=[r]}return r},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},e.prototype._addParent=function(e){var t=this._parent,r=this._parents;return t!==e&&(t?r?-1===r.indexOf(e)&&(r.push(e),!0):(this._parents=[e],!0):(this._parent=e,!0))},e.EMPTY=function(e){return e.closed=!0,e}(new e),e}();function m(e){return e.reduce((function(e,t){return e.concat(t instanceof p?t.errors:t)}),[])}var g="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),b=function(e){function t(r,n,i){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=u;break;case 1:if(!r){o.destination=u;break}if("object"==typeof r){r instanceof t?(o.syncErrorThrowable=r.syncErrorThrowable,o.destination=r,r.add(o)):(o.syncErrorThrowable=!0,o.destination=new v(o,r));break}default:o.syncErrorThrowable=!0,o.destination=new v(o,r,n,i)}return o}return i(t,e),t.prototype[g]=function(){return this},t.create=function(e,r,n){var i=new t(e,r,n);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this},t}(f),v=function(e){function t(t,r,n,i){var s,a=e.call(this)||this;a._parentSubscriber=t;var c=a;return o(r)?s=r:r&&(s=r.next,n=r.error,i=r.complete,r!==u&&(o((c=Object.create(r)).unsubscribe)&&a.add(c.unsubscribe.bind(c)),c.unsubscribe=a.unsubscribe.bind(a))),a._context=c,a._next=s,a._error=n,a._complete=i,a}return i(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,r=a.useDeprecatedSynchronousErrorHandling;if(this._error)r&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):c(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;c(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),a.useDeprecatedSynchronousErrorHandling)throw e;c(e)}},t.prototype.__tryOrSetError=function(e,t,r){if(!a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(t){return a.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(c(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(b);function y(e){for(;e;){var t=e,r=t.closed,n=t.destination,i=t.isStopped;if(r||i)return!1;e=n&&n instanceof b?n:null}return!0}var w="function"==typeof Symbol&&Symbol.observable||"@@observable";function S(){}function _(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return x(e)}function x(e){return e?1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}:S}var E=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n=this.operator,i=function(e,t,r){if(e){if(e instanceof b)return e;if(e[g])return e[g]()}return e||t||r?new b(e,t,r):new b(u)}(e,t,r);if(n?i.add(n.call(i,this.source)):i.add(this.source||a.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),a.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){a.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),y(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=C(t))((function(t,n){var i;i=r.subscribe((function(t){try{e(t)}catch(e){n(e),i&&i.unsubscribe()}}),n,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[w]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:x(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=C(e))((function(e,r){var n;t.subscribe((function(e){return n=e}),(function(e){return r(e)}),(function(){return e(n)}))}))},e.create=function(t){return new e(t)},e}();function C(e){if(e||(e=a.Promise||Promise),!e)throw new Error("no Promise impl found");return e}function T(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}T.prototype=Object.create(Error.prototype);var A=T,O=function(e){function t(t,r){var n=e.call(this)||this;return n.subject=t,n.subscriber=r,n.closed=!1,n}return i(t,e),t.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var e=this.subject,t=e.observers;if(this.subject=null,t&&0!==t.length&&!e.isStopped&&!e.closed){var r=t.indexOf(this.subscriber);-1!==r&&t.splice(r,1)}}},t}(f),P=function(e){function t(t){var r=e.call(this,t)||this;return r.destination=t,r}return i(t,e),t}(b),M=function(e){function t(){var t=e.call(this)||this;return t.observers=[],t.closed=!1,t.isStopped=!1,t.hasError=!1,t.thrownError=null,t}return i(t,e),t.prototype[g]=function(){return new P(this)},t.prototype.lift=function(e){var t=new k(this,this);return t.operator=e,t},t.prototype.next=function(e){if(this.closed)throw new A;if(!this.isStopped)for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].next(e)},t.prototype.error=function(e){if(this.closed)throw new A;this.hasError=!0,this.thrownError=e,this.isStopped=!0;for(var t=this.observers,r=t.length,n=t.slice(),i=0;i<r;i++)n[i].error(e);this.observers.length=0},t.prototype.complete=function(){if(this.closed)throw new A;this.isStopped=!0;for(var e=this.observers,t=e.length,r=e.slice(),n=0;n<t;n++)r[n].complete();this.observers.length=0},t.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},t.prototype._trySubscribe=function(t){if(this.closed)throw new A;return e.prototype._trySubscribe.call(this,t)},t.prototype._subscribe=function(e){if(this.closed)throw new A;return this.hasError?(e.error(this.thrownError),f.EMPTY):this.isStopped?(e.complete(),f.EMPTY):(this.observers.push(e),new O(this,e))},t.prototype.asObservable=function(){var e=new E;return e.source=this,e},t.create=function(e,t){return new k(e,t)},t}(E),k=function(e){function t(t,r){var n=e.call(this)||this;return n.destination=t,n.source=r,n}return i(t,e),t.prototype.next=function(e){var t=this.destination;t&&t.next&&t.next(e)},t.prototype.error=function(e){var t=this.destination;t&&t.error&&this.destination.error(e)},t.prototype.complete=function(){var e=this.destination;e&&e.complete&&this.destination.complete()},t.prototype._subscribe=function(e){return this.source?this.source.subscribe(e):f.EMPTY},t}(M),I=function(){function e(e){this.connectable=e}return e.prototype.call=function(e,t){var r=this.connectable;r._refCount++;var n=new R(e,r),i=t.subscribe(n);return n.closed||(n.connection=r.connect()),i},e}(),R=function(e){function t(t,r){var n=e.call(this,t)||this;return n.connectable=r,n}return i(t,e),t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._refCount;if(t<=0)this.connection=null;else if(e._refCount=t-1,t>1)this.connection=null;else{var r=this.connection,n=e._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},t}(b),N=function(e){function t(t,r){var n=e.call(this)||this;return n.source=t,n.subjectFactory=r,n._refCount=0,n._isComplete=!1,n}return i(t,e),t.prototype._subscribe=function(e){return this.getSubject().subscribe(e)},t.prototype.getSubject=function(){var e=this._subject;return e&&!e.isStopped||(this._subject=this.subjectFactory()),this._subject},t.prototype.connect=function(){var e=this._connection;return e||(this._isComplete=!1,(e=this._connection=new f).add(this.source.subscribe(new j(this.getSubject(),this))),e.closed?(this._connection=null,e=f.EMPTY):this._connection=e),e},t.prototype.refCount=function(){return(e=this).lift(new I(e));var e},t}(E),L=N.prototype,j=(L._subscribe,L._isComplete,L.getSubject,L.connect,L.refCount,function(e){function t(t,r){var n=e.call(this,t)||this;return n.connectable=r,n}return i(t,e),t.prototype._error=function(t){this._unsubscribe(),e.prototype._error.call(this,t)},t.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),e.prototype._complete.call(this)},t.prototype._unsubscribe=function(){var e=this.connectable;if(e){this.connectable=null;var t=e._connection;e._refCount=0,e._subject=null,e._connection=null,t&&t.unsubscribe()}},t}(P)),F=function(e){function t(t,r,n){var i=e.call(this)||this;return i.key=t,i.groupSubject=r,i.refCountSubscription=n,i}return i(t,e),t.prototype._subscribe=function(e){var t=new f,r=this.refCountSubscription,n=this.groupSubject;return r&&!r.closed&&t.add(new U(r)),t.add(n.subscribe(e)),t},t}(E),U=function(e){function t(t){var r=e.call(this)||this;return r.parent=t,t.count++,r}return i(t,e),t.prototype.unsubscribe=function(){var t=this.parent;t.closed||this.closed||(e.prototype.unsubscribe.call(this),t.count-=1,0===t.count&&t.attemptedToUnsubscribe&&t.unsubscribe())},t}(f),V=function(e){function t(t){var r=e.call(this)||this;return r._value=t,r}return i(t,e),Object.defineProperty(t.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),t.prototype._subscribe=function(t){var r=e.prototype._subscribe.call(this,t);return r&&!r.closed&&t.next(this._value),r},t.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new A;return this._value},t.prototype.next=function(t){e.prototype.next.call(this,this._value=t)},t}(M),D=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n.pending=!1,n}return i(t,e),t.prototype.schedule=function(e,t){if(void 0===t&&(t=0),this.closed)return this;this.state=e;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,t)),this.pending=!0,this.delay=t,this.id=this.id||this.requestAsyncId(n,this.id,t),this},t.prototype.requestAsyncId=function(e,t,r){return void 0===r&&(r=0),setInterval(e.flush.bind(e,this),r)},t.prototype.recycleAsyncId=function(e,t,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return t;clearInterval(t)},t.prototype.execute=function(e,t){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(e,t);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},t.prototype._execute=function(e,t){var r=!1,n=void 0;try{this.work(e)}catch(e){r=!0,n=!!e&&e||new Error(e)}if(r)return this.unsubscribe(),n},t.prototype._unsubscribe=function(){var e=this.id,t=this.scheduler,r=t.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=e&&(this.id=this.recycleAsyncId(t,e,null)),this.delay=null},t}(function(e){function t(t,r){return e.call(this)||this}return i(t,e),t.prototype.schedule=function(e,t){return void 0===t&&(t=0),this},t}(f)),B=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return i(t,e),t.prototype.schedule=function(t,r){return void 0===r&&(r=0),r>0?e.prototype.schedule.call(this,t,r):(this.delay=r,this.state=t,this.scheduler.flush(this),this)},t.prototype.execute=function(t,r){return r>0||this.closed?e.prototype.execute.call(this,t,r):this._execute(t,r)},t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0?e.prototype.requestAsyncId.call(this,t,r,n):t.flush(this)},t}(D),W=function(){function e(t,r){void 0===r&&(r=e.now),this.SchedulerAction=t,this.now=r}return e.prototype.schedule=function(e,t,r){return void 0===t&&(t=0),new this.SchedulerAction(this,e).schedule(r,t)},e.now=function(){return Date.now()},e}(),z=function(e){function t(r,n){void 0===n&&(n=W.now);var i=e.call(this,r,(function(){return t.delegate&&t.delegate!==i?t.delegate.now():n()}))||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return i(t,e),t.prototype.schedule=function(r,n,i){return void 0===n&&(n=0),t.delegate&&t.delegate!==this?t.delegate.schedule(r,n,i):e.prototype.schedule.call(this,r,n,i)},t.prototype.flush=function(e){var t=this.actions;if(this.active)t.push(e);else{var r;this.active=!0;do{if(r=e.execute(e.state,e.delay))break}while(e=t.shift());if(this.active=!1,r){for(;e=t.shift();)e.unsubscribe();throw r}}},t}(W),H=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t}(z))(B),$=new E((function(e){return e.complete()}));function Y(e){return e?function(e){return new E((function(t){return e.schedule((function(){return t.complete()}))}))}(e):$}function q(e){return e&&"function"==typeof e.schedule}var G,X=function(e){return function(t){for(var r=0,n=e.length;r<n&&!t.closed;r++)t.next(e[r]);t.closed||t.complete()}};function K(e,t){return new E(t?function(r){var n=new f,i=0;return n.add(t.schedule((function(){i!==e.length?(r.next(e[i++]),r.closed||n.add(this.schedule())):r.complete()}))),n}:X(e))}function Q(e){var t=new E((function(t){t.next(e),t.complete()}));return t._isScalar=!0,t.value=e,t}function J(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[e.length-1];switch(q(r)?e.pop():r=void 0,e.length){case 0:return Y(r);case 1:return r?K(e,r):Q(e[0]);default:return K(e,r)}}function Z(e,t){return new E(t?function(r){return t.schedule(ee,0,{error:e,subscriber:r})}:function(t){return t.error(e)})}function ee(e){var t=e.error;e.subscriber.error(t)}G||(G={});var te=function(){function e(e,t,r){this.kind=e,this.value=t,this.error=r,this.hasValue="N"===e}return e.prototype.observe=function(e){switch(this.kind){case"N":return e.next&&e.next(this.value);case"E":return e.error&&e.error(this.error);case"C":return e.complete&&e.complete()}},e.prototype.do=function(e,t,r){switch(this.kind){case"N":return e&&e(this.value);case"E":return t&&t(this.error);case"C":return r&&r()}},e.prototype.accept=function(e,t,r){return e&&"function"==typeof e.next?this.observe(e):this.do(e,t,r)},e.prototype.toObservable=function(){switch(this.kind){case"N":return J(this.value);case"E":return Z(this.error);case"C":return Y()}throw new Error("unexpected notification kind value")},e.createNext=function(t){return void 0!==t?new e("N",t):e.undefinedValueNotification},e.createError=function(t){return new e("E",void 0,t)},e.createComplete=function(){return e.completeNotification},e.completeNotification=new e("C"),e.undefinedValueNotification=new e("N",void 0),e}(),re=function(e){function t(t,r,n){void 0===n&&(n=0);var i=e.call(this,t)||this;return i.scheduler=r,i.delay=n,i}return i(t,e),t.dispatch=function(e){var t=e.notification,r=e.destination;t.observe(r),this.unsubscribe()},t.prototype.scheduleMessage=function(e){this.destination.add(this.scheduler.schedule(t.dispatch,this.delay,new ne(e,this.destination)))},t.prototype._next=function(e){this.scheduleMessage(te.createNext(e))},t.prototype._error=function(e){this.scheduleMessage(te.createError(e)),this.unsubscribe()},t.prototype._complete=function(){this.scheduleMessage(te.createComplete()),this.unsubscribe()},t}(b),ne=function(){return function(e,t){this.notification=e,this.destination=t}}(),ie=function(e){function t(t,r,n){void 0===t&&(t=Number.POSITIVE_INFINITY),void 0===r&&(r=Number.POSITIVE_INFINITY);var i=e.call(this)||this;return i.scheduler=n,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=t<1?1:t,i._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return i(t,e),t.prototype.nextInfiniteTimeWindow=function(t){var r=this._events;r.push(t),r.length>this._bufferSize&&r.shift(),e.prototype.next.call(this,t)},t.prototype.nextTimeWindow=function(t){this._events.push(new oe(this._getNow(),t)),this._trimBufferThenGetEvents(),e.prototype.next.call(this,t)},t.prototype._subscribe=function(e){var t,r=this._infiniteTimeWindow,n=r?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=n.length;if(this.closed)throw new A;if(this.isStopped||this.hasError?t=f.EMPTY:(this.observers.push(e),t=new O(this,e)),i&&e.add(e=new re(e,i)),r)for(var s=0;s<o&&!e.closed;s++)e.next(n[s]);else for(s=0;s<o&&!e.closed;s++)e.next(n[s].value);return this.hasError?e.error(this.thrownError):this.isStopped&&e.complete(),t},t.prototype._getNow=function(){return(this.scheduler||H).now()},t.prototype._trimBufferThenGetEvents=function(){for(var e=this._getNow(),t=this._bufferSize,r=this._windowTime,n=this._events,i=n.length,o=0;o<i&&!(e-n[o].time<r);)o++;return i>t&&(o=Math.max(o,i-t)),o>0&&n.splice(0,o),n},t}(M),oe=function(){return function(e,t){this.time=e,this.value=t}}(),se=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.value=null,t.hasNext=!1,t.hasCompleted=!1,t}return i(t,e),t.prototype._subscribe=function(t){return this.hasError?(t.error(this.thrownError),f.EMPTY):this.hasCompleted&&this.hasNext?(t.next(this.value),t.complete(),f.EMPTY):e.prototype._subscribe.call(this,t)},t.prototype.next=function(e){this.hasCompleted||(this.value=e,this.hasNext=!0)},t.prototype.error=function(t){this.hasCompleted||e.prototype.error.call(this,t)},t.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&e.prototype.next.call(this,this.value),e.prototype.complete.call(this)},t}(M),ae=1,ce={},ue=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return i(t,e),t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t.scheduled||(t.scheduled=(i=t.flush.bind(t,null),o=ae++,ce[o]=i,Promise.resolve().then((function(){return function(e){var t=ce[e];t&&t()}(o)})),o)));var i,o},t.prototype.recycleAsyncId=function(t,r,n){if(void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);0===t.actions.length&&(delete ce[r],t.scheduled=void 0)},t}(D),le=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,r=this.actions,n=-1,i=r.length;e=e||r.shift();do{if(t=e.execute(e.state,e.delay))break}while(++n<i&&(e=r.shift()));if(this.active=!1,t){for(;++n<i&&(e=r.shift());)e.unsubscribe();throw t}},t}(z))(ue),he=new z(D),de=function(e){function t(t,r){var n=e.call(this,t,r)||this;return n.scheduler=t,n.work=r,n}return i(t,e),t.prototype.requestAsyncId=function(t,r,n){return void 0===n&&(n=0),null!==n&&n>0?e.prototype.requestAsyncId.call(this,t,r,n):(t.actions.push(this),t.scheduled||(t.scheduled=requestAnimationFrame((function(){return t.flush(null)}))))},t.prototype.recycleAsyncId=function(t,r,n){if(void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0)return e.prototype.recycleAsyncId.call(this,t,r,n);0===t.actions.length&&(cancelAnimationFrame(r),t.scheduled=void 0)},t}(D),pe=new(function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.flush=function(e){this.active=!0,this.scheduled=void 0;var t,r=this.actions,n=-1,i=r.length;e=e||r.shift();do{if(t=e.execute(e.state,e.delay))break}while(++n<i&&(e=r.shift()));if(this.active=!1,t){for(;++n<i&&(e=r.shift());)e.unsubscribe();throw t}},t}(z))(de),fe=function(e){function t(t,r){void 0===t&&(t=me),void 0===r&&(r=Number.POSITIVE_INFINITY);var n=e.call(this,t,(function(){return n.frame}))||this;return n.maxFrames=r,n.frame=0,n.index=-1,n}return i(t,e),t.prototype.flush=function(){for(var e,t,r=this.actions,n=this.maxFrames;(t=r[0])&&t.delay<=n&&(r.shift(),this.frame=t.delay,!(e=t.execute(t.state,t.delay))););if(e){for(;t=r.shift();)t.unsubscribe();throw e}},t.frameTimeFactor=10,t}(z),me=function(e){function t(t,r,n){void 0===n&&(n=t.index+=1);var i=e.call(this,t,r)||this;return i.scheduler=t,i.work=r,i.index=n,i.active=!0,i.index=t.index=n,i}return i(t,e),t.prototype.schedule=function(r,n){if(void 0===n&&(n=0),!this.id)return e.prototype.schedule.call(this,r,n);this.active=!1;var i=new t(this.scheduler,this.work);return this.add(i),i.schedule(r,n)},t.prototype.requestAsyncId=function(e,r,n){void 0===n&&(n=0),this.delay=e.frame+n;var i=e.actions;return i.push(this),i.sort(t.sortActions),!0},t.prototype.recycleAsyncId=function(e,t,r){void 0===r&&(r=0)},t.prototype._execute=function(t,r){if(!0===this.active)return e.prototype._execute.call(this,t,r)},t.sortActions=function(e,t){return e.delay===t.delay?e.index===t.index?0:e.index>t.index?1:-1:e.delay>t.delay?1:-1},t}(D);function ge(e){return e}function be(e){return!!e&&(e instanceof E||"function"==typeof e.lift&&"function"==typeof e.subscribe)}function ve(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}ve.prototype=Object.create(Error.prototype);var ye=ve;function we(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}we.prototype=Object.create(Error.prototype);var Se=we;function _e(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}_e.prototype=Object.create(Error.prototype);var xe=_e;function Ee(e,t){return function(r){if("function"!=typeof e)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new Ce(e,t))}}var Ce=function(){function e(e,t){this.project=e,this.thisArg=t}return e.prototype.call=function(e,t){return t.subscribe(new Te(e,this.project,this.thisArg))},e}(),Te=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.project=r,i.count=0,i.thisArg=n||i,i}return i(t,e),t.prototype._next=function(e){var t;try{t=this.project.call(this.thisArg,e,this.count++)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(b);function Ae(e,t,r){if(t){if(!q(t))return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return Ae(e,r).apply(void 0,n).pipe(Ee((function(e){return l(e)?t.apply(void 0,e):t(e)})))};r=t}return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i,o=this,s={context:o,subject:i,callbackFunc:e,scheduler:r};return new E((function(n){if(r){var a={args:t,subscriber:n,params:s};return r.schedule(Oe,0,a)}if(!i){i=new se;try{e.apply(o,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];i.next(e.length<=1?e[0]:e),i.complete()}]))}catch(e){y(i)?i.error(e):console.warn(e)}}return i.subscribe(n)}))}}function Oe(e){var t=this,r=e.args,n=e.subscriber,i=e.params,o=i.callbackFunc,s=i.context,a=i.scheduler,c=i.subject;if(!c){c=i.subject=new se;try{o.apply(s,r.concat([function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e.length<=1?e[0]:e;t.add(a.schedule(Pe,0,{value:n,subject:c}))}]))}catch(e){c.error(e)}}this.add(c.subscribe(n))}function Pe(e){var t=e.value,r=e.subject;r.next(t),r.complete()}function Me(e,t,r){if(t){if(!q(t))return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return Me(e,r).apply(void 0,n).pipe(Ee((function(e){return l(e)?t.apply(void 0,e):t(e)})))};r=t}return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var i={subject:void 0,args:t,callbackFunc:e,scheduler:r,context:this};return new E((function(n){var o=i.context,s=i.subject;if(r)return r.schedule(ke,0,{params:i,subscriber:n,context:o});if(!s){s=i.subject=new se;try{e.apply(o,t.concat([function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e.shift();r?s.error(r):(s.next(e.length<=1?e[0]:e),s.complete())}]))}catch(e){y(s)?s.error(e):console.warn(e)}}return s.subscribe(n)}))}}function ke(e){var t=this,r=e.params,n=e.subscriber,i=e.context,o=r.callbackFunc,s=r.args,a=r.scheduler,c=r.subject;if(!c){c=r.subject=new se;try{o.apply(i,s.concat([function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var n=e.shift();if(n)t.add(a.schedule(Re,0,{err:n,subject:c}));else{var i=e.length<=1?e[0]:e;t.add(a.schedule(Ie,0,{value:i,subject:c}))}}]))}catch(e){this.add(a.schedule(Re,0,{err:e,subject:c}))}}this.add(c.subscribe(n))}function Ie(e){var t=e.value,r=e.subject;r.next(t),r.complete()}function Re(e){var t=e.err;e.subject.error(t)}var Ne=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return i(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(t)},t.prototype.notifyError=function(e,t){this.destination.error(e)},t.prototype.notifyComplete=function(e){this.destination.complete()},t}(b),Le=function(e){function t(t,r,n){var i=e.call(this)||this;return i.parent=t,i.outerValue=r,i.outerIndex=n,i.index=0,i}return i(t,e),t.prototype._next=function(e){this.parent.notifyNext(this.outerValue,e,this.outerIndex,this.index++,this)},t.prototype._error=function(e){this.parent.notifyError(e,this),this.unsubscribe()},t.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},t}(b),je=function(e){return function(t){return e.then((function(e){t.closed||(t.next(e),t.complete())}),(function(e){return t.error(e)})).then(null,c),t}};function Fe(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var Ue=Fe(),Ve=function(e){return function(t){for(var r=e[Ue]();;){var n=r.next();if(n.done){t.complete();break}if(t.next(n.value),t.closed)break}return"function"==typeof r.return&&t.add((function(){r.return&&r.return()})),t}},De=function(e){return function(t){var r=e[w]();if("function"!=typeof r.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return r.subscribe(t)}},Be=function(e){return e&&"number"==typeof e.length&&"function"!=typeof e};function We(e){return!!e&&"function"!=typeof e.subscribe&&"function"==typeof e.then}var ze=function(e){if(e instanceof E)return function(t){return e._isScalar?(t.next(e.value),void t.complete()):e.subscribe(t)};if(e&&"function"==typeof e[w])return De(e);if(Be(e))return X(e);if(We(e))return je(e);if(e&&"function"==typeof e[Ue])return Ve(e);var t=h(e)?"an invalid object":"'"+e+"'";throw new TypeError("You provided "+t+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function He(e,t,r,n,i){if(void 0===i&&(i=new Le(e,r,n)),!i.closed)return ze(t)(i)}var $e={};function Ye(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=null,n=null;return q(e[e.length-1])&&(n=e.pop()),"function"==typeof e[e.length-1]&&(r=e.pop()),1===e.length&&l(e[0])&&(e=e[0]),K(e,n).lift(new qe(r))}var qe=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new Ge(e,this.resultSelector))},e}(),Ge=function(e){function t(t,r){var n=e.call(this,t)||this;return n.resultSelector=r,n.active=0,n.values=[],n.observables=[],n}return i(t,e),t.prototype._next=function(e){this.values.push($e),this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{this.active=t,this.toRespond=t;for(var r=0;r<t;r++){var n=e[r];this.add(He(this,n,n,r))}}},t.prototype.notifyComplete=function(e){0==(this.active-=1)&&this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,i){var o=this.values,s=o[r],a=this.toRespond?s===$e?--this.toRespond:this.toRespond:0;o[r]=t,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},t.prototype._tryResultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(Ne);function Xe(e,t){if(!t)return e instanceof E?e:new E(ze(e));if(null!=e){if(function(e){return e&&"function"==typeof e[w]}(e))return function(e,t){return new E(t?function(r){var n=new f;return n.add(t.schedule((function(){var i=e[w]();n.add(i.subscribe({next:function(e){n.add(t.schedule((function(){return r.next(e)})))},error:function(e){n.add(t.schedule((function(){return r.error(e)})))},complete:function(){n.add(t.schedule((function(){return r.complete()})))}}))}))),n}:De(e))}(e,t);if(We(e))return function(e,t){return new E(t?function(r){var n=new f;return n.add(t.schedule((function(){return e.then((function(e){n.add(t.schedule((function(){r.next(e),n.add(t.schedule((function(){return r.complete()})))})))}),(function(e){n.add(t.schedule((function(){return r.error(e)})))}))}))),n}:je(e))}(e,t);if(Be(e))return K(e,t);if(function(e){return e&&"function"==typeof e[Ue]}(e)||"string"==typeof e)return function(e,t){if(!e)throw new Error("Iterable cannot be null");return new E(t?function(r){var n,i=new f;return i.add((function(){n&&"function"==typeof n.return&&n.return()})),i.add(t.schedule((function(){n=e[Ue](),i.add(t.schedule((function(){if(!r.closed){var e,t;try{var i=n.next();e=i.value,t=i.done}catch(e){return void r.error(e)}t?r.complete():(r.next(e),this.schedule())}})))}))),i}:Ve(e))}(e,t)}throw new TypeError((null!==e&&typeof e||e)+" is not observable")}function Ke(e,t,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof t?function(n){return n.pipe(Ke((function(r,n){return Xe(e(r,n)).pipe(Ee((function(e,i){return t(r,e,n,i)})))}),r))}:("number"==typeof t&&(r=t),function(t){return t.lift(new Qe(e,r))})}var Qe=function(){function e(e,t){void 0===t&&(t=Number.POSITIVE_INFINITY),this.project=e,this.concurrent=t}return e.prototype.call=function(e,t){return t.subscribe(new Je(e,this.project,this.concurrent))},e}(),Je=function(e){function t(t,r,n){void 0===n&&(n=Number.POSITIVE_INFINITY);var i=e.call(this,t)||this;return i.project=r,i.concurrent=n,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return i(t,e),t.prototype._next=function(e){this.active<this.concurrent?this._tryNext(e):this.buffer.push(e)},t.prototype._tryNext=function(e){var t,r=this.index++;try{t=this.project(e,r)}catch(e){return void this.destination.error(e)}this.active++,this._innerSub(t,e,r)},t.prototype._innerSub=function(e,t,r){var n=new Le(this,void 0,void 0);this.destination.add(n),He(this,e,t,r,n)},t.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},t.prototype.notifyNext=function(e,t,r,n,i){this.destination.next(t)},t.prototype.notifyComplete=function(e){var t=this.buffer;this.remove(e),this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},t}(Ne);function Ze(e){return void 0===e&&(e=Number.POSITIVE_INFINITY),Ke(ge,e)}function et(){return Ze(1)}function tt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return et()(J.apply(void 0,e))}function rt(e){return new E((function(t){var r;try{r=e()}catch(e){return void t.error(e)}return(r?Xe(r):Y()).subscribe(t)}))}function nt(){for(var e,t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&l(t[0])&&(t=t[0]),0===t.length?$:e?nt(t).pipe(Ee((function(t){return e.apply(void 0,t)}))):new E((function(e){return new it(e,t)}))}var it=function(e){function t(t,r){var n=e.call(this,t)||this;n.sources=r,n.completed=0,n.haveValues=0;var i=r.length;n.values=new Array(i);for(var o=0;o<i;o++){var s=He(n,r[o],null,o);s&&n.add(s)}return n}return i(t,e),t.prototype.notifyNext=function(e,t,r,n,i){this.values[r]=t,i._hasValue||(i._hasValue=!0,this.haveValues++)},t.prototype.notifyComplete=function(e){var t=this,r=t.destination,n=t.haveValues,i=t.values,o=i.length;e._hasValue?(this.completed++,this.completed===o&&(n===o&&r.next(i),r.complete())):r.complete()},t}(Ne);function ot(e,t,r,n){return o(r)&&(n=r,r=void 0),n?ot(e,t,r).pipe(Ee((function(e){return l(e)?n.apply(void 0,e):n(e)}))):new E((function(n){st(e,t,(function(e){arguments.length>1?n.next(Array.prototype.slice.call(arguments)):n.next(e)}),n,r)}))}function st(e,t,r,n,i){var o;if(function(e){return e&&"function"==typeof e.addEventListener&&"function"==typeof e.removeEventListener}(e)){var s=e;e.addEventListener(t,r,i),o=function(){return s.removeEventListener(t,r,i)}}else if(function(e){return e&&"function"==typeof e.on&&"function"==typeof e.off}(e)){var a=e;e.on(t,r),o=function(){return a.off(t,r)}}else if(function(e){return e&&"function"==typeof e.addListener&&"function"==typeof e.removeListener}(e)){var c=e;e.addListener(t,r),o=function(){return c.removeListener(t,r)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var u=0,l=e.length;u<l;u++)st(e[u],t,r,n,i)}n.add(o)}function at(e,t,r){return r?at(e,t).pipe(Ee((function(e){return l(e)?r.apply(void 0,e):r(e)}))):new E((function(r){var n,i=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.next(1===e.length?e[0]:e)};try{n=e(i)}catch(e){return void r.error(e)}if(o(t))return function(){return t(i,n)}}))}function ct(e,t,r,n,i){var o,s;if(1==arguments.length){var a=e;s=a.initialState,t=a.condition,r=a.iterate,o=a.resultSelector||ge,i=a.scheduler}else void 0===n||q(n)?(s=e,o=ge,i=n):(s=e,o=n);return new E((function(e){var n=s;if(i)return i.schedule(ut,0,{subscriber:e,iterate:r,condition:t,resultSelector:o,state:n});for(;;){if(t){var a=void 0;try{a=t(n)}catch(t){return void e.error(t)}if(!a){e.complete();break}}var c=void 0;try{c=o(n)}catch(t){return void e.error(t)}if(e.next(c),e.closed)break;try{n=r(n)}catch(t){return void e.error(t)}}}))}function ut(e){var t=e.subscriber,r=e.condition;if(!t.closed){if(e.needIterate)try{e.state=e.iterate(e.state)}catch(e){return void t.error(e)}else e.needIterate=!0;if(r){var n=void 0;try{n=r(e.state)}catch(e){return void t.error(e)}if(!n)return void t.complete();if(t.closed)return}var i;try{i=e.resultSelector(e.state)}catch(e){return void t.error(e)}if(!t.closed&&(t.next(i),!t.closed))return this.schedule(e)}}function lt(e,t,r){return void 0===t&&(t=$),void 0===r&&(r=$),rt((function(){return e()?t:r}))}function ht(e){return!l(e)&&e-parseFloat(e)+1>=0}function dt(e,t){return void 0===e&&(e=0),void 0===t&&(t=he),(!ht(e)||e<0)&&(e=0),t&&"function"==typeof t.schedule||(t=he),new E((function(r){return r.add(t.schedule(pt,e,{subscriber:r,counter:0,period:e})),r}))}function pt(e){var t=e.subscriber,r=e.counter,n=e.period;t.next(r),this.schedule({subscriber:t,counter:r+1,period:n},n)}function ft(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=Number.POSITIVE_INFINITY,n=null,i=e[e.length-1];return q(i)?(n=e.pop(),e.length>1&&"number"==typeof e[e.length-1]&&(r=e.pop())):"number"==typeof i&&(r=e.pop()),null===n&&1===e.length&&e[0]instanceof E?e[0]:Ze(r)(K(e,n))}Object.prototype.toString;var mt=new E(S);function gt(){return mt}function bt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return $;var r=e[0],n=e.slice(1);return 1===e.length&&l(r)?bt.apply(void 0,r):new E((function(e){var t=function(){return e.add(bt.apply(void 0,n).subscribe(e))};return Xe(r).subscribe({next:function(t){e.next(t)},error:t,complete:t})}))}function vt(e,t){return new E(t?function(r){var n=Object.keys(e),i=new f;return i.add(t.schedule(yt,0,{keys:n,index:0,subscriber:r,subscription:i,obj:e})),i}:function(t){for(var r=Object.keys(e),n=0;n<r.length&&!t.closed;n++){var i=r[n];e.hasOwnProperty(i)&&t.next([i,e[i]])}t.complete()})}function yt(e){var t=e.keys,r=e.index,n=e.subscriber,i=e.subscription,o=e.obj;if(!n.closed)if(r<t.length){var s=t[r];n.next([s,o[s]]),i.add(this.schedule({keys:t,index:r+1,subscriber:n,subscription:i,obj:o}))}else n.complete()}function wt(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){if(!l(e[0]))return e[0];e=e[0]}return K(e,void 0).lift(new St)}var St=function(){function e(){}return e.prototype.call=function(e,t){return t.subscribe(new _t(e))},e}(),_t=function(e){function t(t){var r=e.call(this,t)||this;return r.hasFirst=!1,r.observables=[],r.subscriptions=[],r}return i(t,e),t.prototype._next=function(e){this.observables.push(e)},t.prototype._complete=function(){var e=this.observables,t=e.length;if(0===t)this.destination.complete();else{for(var r=0;r<t&&!this.hasFirst;r++){var n=e[r],i=He(this,n,n,r);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},t.prototype.notifyNext=function(e,t,r,n,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==r){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(t)},t}(Ne);function xt(e,t,r){return void 0===e&&(e=0),new E((function(n){void 0===t&&(t=e,e=0);var i=0,o=e;if(r)return r.schedule(Et,0,{index:i,count:t,start:e,subscriber:n});for(;;){if(i++>=t){n.complete();break}if(n.next(o++),n.closed)break}}))}function Et(e){var t=e.start,r=e.index,n=e.count,i=e.subscriber;r>=n?i.complete():(i.next(t),i.closed||(e.index=r+1,e.start=t+1,this.schedule(e)))}function Ct(e,t,r){void 0===e&&(e=0);var n=-1;return ht(t)?n=Number(t)<1?1:Number(t):q(t)&&(r=t),q(r)||(r=he),new E((function(t){var i=ht(e)?e:+e-r.now();return r.schedule(Tt,i,{index:0,period:n,subscriber:t})}))}function Tt(e){var t=e.index,r=e.period,n=e.subscriber;if(n.next(t),!n.closed){if(-1===r)return n.complete();e.index=t+1,this.schedule(e,r)}}function At(e,t){return new E((function(r){var n,i;try{n=e()}catch(e){return void r.error(e)}try{i=t(n)}catch(e){return void r.error(e)}var o=(i?Xe(i):$).subscribe(r);return function(){o.unsubscribe(),n&&n.unsubscribe()}}))}function Ot(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var r=e[e.length-1];return"function"==typeof r&&e.pop(),K(e,void 0).lift(new Pt(r))}var Pt=function(){function e(e){this.resultSelector=e}return e.prototype.call=function(e,t){return t.subscribe(new Mt(e,this.resultSelector))},e}(),Mt=function(e){function t(t,r,n){void 0===n&&(n=Object.create(null));var i=e.call(this,t)||this;return i.iterators=[],i.active=0,i.resultSelector="function"==typeof r?r:null,i.values=n,i}return i(t,e),t.prototype._next=function(e){var t=this.iterators;l(e)?t.push(new It(e)):"function"==typeof e[Ue]?t.push(new kt(e[Ue]())):t.push(new Rt(this.destination,this,e))},t.prototype._complete=function(){var e=this.iterators,t=e.length;if(this.unsubscribe(),0!==t){this.active=t;for(var r=0;r<t;r++){var n=e[r];n.stillUnsubscribed?this.destination.add(n.subscribe(n,r)):this.active--}}else this.destination.complete()},t.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},t.prototype.checkIterators=function(){for(var e=this.iterators,t=e.length,r=this.destination,n=0;n<t;n++)if("function"==typeof(s=e[n]).hasValue&&!s.hasValue())return;var i=!1,o=[];for(n=0;n<t;n++){var s,a=(s=e[n]).next();if(s.hasCompleted()&&(i=!0),a.done)return void r.complete();o.push(a.value)}this.resultSelector?this._tryresultSelector(o):r.next(o),i&&r.complete()},t.prototype._tryresultSelector=function(e){var t;try{t=this.resultSelector.apply(this,e)}catch(e){return void this.destination.error(e)}this.destination.next(t)},t}(b),kt=function(){function e(e){this.iterator=e,this.nextResult=e.next()}return e.prototype.hasValue=function(){return!0},e.prototype.next=function(){var e=this.nextResult;return this.nextResult=this.iterator.next(),e},e.prototype.hasCompleted=function(){var e=this.nextResult;return e&&e.done},e}(),It=function(){function e(e){this.array=e,this.index=0,this.length=0,this.length=e.length}return e.prototype[Ue]=function(){return this},e.prototype.next=function(e){var t=this.index++,r=this.array;return t<this.length?{value:r[t],done:!1}:{value:null,done:!0}},e.prototype.hasValue=function(){return this.array.length>this.index},e.prototype.hasCompleted=function(){return this.array.length===this.index},e}(),Rt=function(e){function t(t,r,n){var i=e.call(this,t)||this;return i.parent=r,i.observable=n,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return i(t,e),t.prototype[Ue]=function(){return this},t.prototype.next=function(){var e=this.buffer;return 0===e.length&&this.isComplete?{value:null,done:!0}:{value:e.shift(),done:!1}},t.prototype.hasValue=function(){return this.buffer.length>0},t.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},t.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},t.prototype.notifyNext=function(e,t,r,n,i){this.buffer.push(t),this.parent.checkIterators()},t.prototype.subscribe=function(e,t){return He(this,this.observable,this,t)},t}(Ne)},837:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(481),i=r(123),o=r(830),s=r(105),a=r(79),c=function(){function e(e){this._isScalar=!1,e&&(this._subscribe=e)}return e.prototype.lift=function(t){var r=new e;return r.source=this,r.operator=t,r},e.prototype.subscribe=function(e,t,r){var n=this.operator,o=i.toSubscriber(e,t,r);if(n?o.add(n.call(o,this.source)):o.add(this.source||a.config.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),a.config.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},e.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(t){a.config.useDeprecatedSynchronousErrorHandling&&(e.syncErrorThrown=!0,e.syncErrorValue=t),n.canReportError(e)?e.error(t):console.warn(t)}},e.prototype.forEach=function(e,t){var r=this;return new(t=u(t))((function(t,n){var i;i=r.subscribe((function(t){try{e(t)}catch(e){n(e),i&&i.unsubscribe()}}),n,t)}))},e.prototype._subscribe=function(e){var t=this.source;return t&&t.subscribe(e)},e.prototype[o.observable]=function(){return this},e.prototype.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return 0===e.length?this:s.pipeFromArray(e)(this)},e.prototype.toPromise=function(e){var t=this;return new(e=u(e))((function(e,r){var n;t.subscribe((function(e){return n=e}),(function(e){return r(e)}),(function(){return e(n)}))}))},e.create=function(t){return new e(t)},e}();function u(e){if(e||(e=a.config.Promise||Promise),!e)throw new Error("no Promise impl found");return e}t.Observable=c},556:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(79),i=r(219);t.empty={closed:!0,next:function(e){},error:function(e){if(n.config.useDeprecatedSynchronousErrorHandling)throw e;i.hostReportError(e)},complete:function(){}}},454:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(517),s=r(556),a=r(234),c=r(188),u=r(79),l=r(219),h=function(e){function t(r,n,i){var o=e.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=s.empty;break;case 1:if(!r){o.destination=s.empty;break}if("object"==typeof r){r instanceof t?(o.syncErrorThrowable=r.syncErrorThrowable,o.destination=r,r.add(o)):(o.syncErrorThrowable=!0,o.destination=new d(o,r));break}default:o.syncErrorThrowable=!0,o.destination=new d(o,r,n,i)}return o}return i(t,e),t.prototype[c.rxSubscriber]=function(){return this},t.create=function(e,r,n){var i=new t(e,r,n);return i.syncErrorThrowable=!1,i},t.prototype.next=function(e){this.isStopped||this._next(e)},t.prototype.error=function(e){this.isStopped||(this.isStopped=!0,this._error(e))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this))},t.prototype._next=function(e){this.destination.next(e)},t.prototype._error=function(e){this.destination.error(e),this.unsubscribe()},t.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},t.prototype._unsubscribeAndRecycle=function(){var e=this._parent,t=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=e,this._parents=t,this},t}(a.Subscription);t.Subscriber=h;var d=function(e){function t(t,r,n,i){var a,c=e.call(this)||this;c._parentSubscriber=t;var u=c;return o.isFunction(r)?a=r:r&&(a=r.next,n=r.error,i=r.complete,r!==s.empty&&(u=Object.create(r),o.isFunction(u.unsubscribe)&&c.add(u.unsubscribe.bind(u)),u.unsubscribe=c.unsubscribe.bind(c))),c._context=u,c._next=a,c._error=n,c._complete=i,c}return i(t,e),t.prototype.next=function(e){if(!this.isStopped&&this._next){var t=this._parentSubscriber;u.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?this.__tryOrSetError(t,this._next,e)&&this.unsubscribe():this.__tryOrUnsub(this._next,e)}},t.prototype.error=function(e){if(!this.isStopped){var t=this._parentSubscriber,r=u.config.useDeprecatedSynchronousErrorHandling;if(this._error)r&&t.syncErrorThrowable?(this.__tryOrSetError(t,this._error,e),this.unsubscribe()):(this.__tryOrUnsub(this._error,e),this.unsubscribe());else if(t.syncErrorThrowable)r?(t.syncErrorValue=e,t.syncErrorThrown=!0):l.hostReportError(e),this.unsubscribe();else{if(this.unsubscribe(),r)throw e;l.hostReportError(e)}}},t.prototype.complete=function(){var e=this;if(!this.isStopped){var t=this._parentSubscriber;if(this._complete){var r=function(){return e._complete.call(e._context)};u.config.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},t.prototype.__tryOrUnsub=function(e,t){try{e.call(this._context,t)}catch(e){if(this.unsubscribe(),u.config.useDeprecatedSynchronousErrorHandling)throw e;l.hostReportError(e)}},t.prototype.__tryOrSetError=function(e,t,r){if(!u.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{t.call(this._context,r)}catch(t){return u.config.useDeprecatedSynchronousErrorHandling?(e.syncErrorValue=t,e.syncErrorThrown=!0,!0):(l.hostReportError(t),!0)}return!1},t.prototype._unsubscribe=function(){var e=this._parentSubscriber;this._context=null,this._parentSubscriber=null,e.unsubscribe()},t}(h);t.SafeSubscriber=d},234:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(835),i=r(399),o=r(517),s=r(305),a=function(){function e(e){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,e&&(this._unsubscribe=e)}var t;return e.prototype.unsubscribe=function(){var e,t=!1;if(!this.closed){var r=this,a=r._parent,u=r._parents,l=r._unsubscribe,h=r._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var d=-1,p=u?u.length:0;a;)a.remove(this),a=++d<p&&u[d]||null;if(o.isFunction(l))try{l.call(this)}catch(r){t=!0,e=r instanceof s.UnsubscriptionError?c(r.errors):[r]}if(n.isArray(h))for(d=-1,p=h.length;++d<p;){var f=h[d];if(i.isObject(f))try{f.unsubscribe()}catch(r){t=!0,e=e||[],r instanceof s.UnsubscriptionError?e=e.concat(c(r.errors)):e.push(r)}}if(t)throw new s.UnsubscriptionError(e)}},e.prototype.add=function(t){var r=t;switch(typeof t){case"function":r=new e(t);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof e)){var n=r;(r=new e)._subscriptions=[n]}break;default:if(!t)return e.EMPTY;throw new Error("unrecognized teardown "+t+" added to Subscription.")}if(r._addParent(this)){var i=this._subscriptions;i?i.push(r):this._subscriptions=[r]}return r},e.prototype.remove=function(e){var t=this._subscriptions;if(t){var r=t.indexOf(e);-1!==r&&t.splice(r,1)}},e.prototype._addParent=function(e){var t=this._parent,r=this._parents;return t!==e&&(t?r?-1===r.indexOf(e)&&(r.push(e),!0):(this._parents=[e],!0):(this._parent=e,!0))},e.EMPTY=((t=new e).closed=!0,t),e}();function c(e){return e.reduce((function(e,t){return e.concat(t instanceof s.UnsubscriptionError?t.errors:t)}),[])}t.Subscription=a},79:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=!1;t.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(e){if(e){var t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=e},get useDeprecatedSynchronousErrorHandling(){return r}}},684:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(837);function i(e){return new n.Observable((function(t){return e.schedule((function(){return t.complete()}))}))}t.EMPTY=new n.Observable((function(e){return e.complete()})),t.empty=function(e){return e?i(e):t.EMPTY},t.emptyScheduled=i},616:function(e,t,r){"use strict";var n,i=this&&this.__extends||(n=function(e,t){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)},function(e,t){function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)});Object.defineProperty(t,"__esModule",{value:!0});var o=r(454),s=r(874),a=r(684);t.take=function(e){return function(t){return 0===e?a.empty():t.lift(new c(e))}};var c=function(){function e(e){if(this.total=e,this.total<0)throw new s.ArgumentOutOfRangeError}return e.prototype.call=function(e,t){return t.subscribe(new u(e,this.total))},e}(),u=function(e){function t(t,r){var n=e.call(this,t)||this;return n.total=r,n.count=0,n}return i(t,e),t.prototype._next=function(e){var t=this.total,r=++this.count;r<=t&&(this.destination.next(e),r===t&&(this.destination.complete(),this.unsubscribe()))},t}(o.Subscriber)},830:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},188:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),t.$$rxSubscriber=t.rxSubscriber},874:(e,t)=>{"use strict";function r(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}Object.defineProperty(t,"__esModule",{value:!0}),r.prototype=Object.create(Error.prototype),t.ArgumentOutOfRangeError=r},305:(e,t)=>{"use strict";function r(e){return Error.call(this),this.message=e?e.length+" errors occurred during unsubscription:\n"+e.map((function(e,t){return t+1+") "+e.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=e,this}Object.defineProperty(t,"__esModule",{value:!0}),r.prototype=Object.create(Error.prototype),t.UnsubscriptionError=r},481:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(454);t.canReportError=function(e){for(;e;){var t=e,r=t.closed,i=t.destination,o=t.isStopped;if(r||o)return!1;e=i&&i instanceof n.Subscriber?i:null}return!0}},219:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.hostReportError=function(e){setTimeout((function(){throw e}))}},835:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isArray=Array.isArray||function(e){return e&&"number"==typeof e.length}},517:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isFunction=function(e){return"function"==typeof e}},399:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isObject=function(e){return null!==e&&"object"==typeof e}},543:(e,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.noop=function(){}},105:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(543);function i(e){return e?1===e.length?e[0]:function(t){return e.reduce((function(e,t){return t(e)}),t)}:n.noop}t.pipe=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return i(e)},t.pipeFromArray=i},123:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r(454),i=r(188),o=r(556);t.toSubscriber=function(e,t,r){if(e){if(e instanceof n.Subscriber)return e;if(e[i.rxSubscriber])return e[i.rxSubscriber]()}return e||t||r?new n.Subscriber(e,t,r):new n.Subscriber(o.empty)}},607:(e,t,r)=>{"use strict";const n=r(704),i=r(270);class o{init(e){this.mapApi=e,this.panel=this.mapApi.panels.create("rangeSlider"),this.panel.element.css(o.prototype.panelOptions),this.panel.body=n.SLIDER_TEMPLATE;const t=this._RV.getConfig("plugins").rangeSlider;let r={};void 0!==t?(r=Object.assign(Object.assign({},o.prototype.layerOptions),t.params),r.controls=t.controls,r.layers=t.layers,r.open=t.open,r.loop=t.loop,r.autorun=t.autorun):r=o.prototype.layerOptions,r.language=this._RV.getCurrentLang(),r.translations=o.prototype.translations[this._RV.getCurrentLang()],this._button=this.mapApi.mapI.addPluginButton(o.prototype.translations[this._RV.getCurrentLang()].title,this.onMenuItemClick()),r.open&&(this._button.isActive=!0),window.RAMP.GAPI.esriLoadApiClasses([["esri/TimeExtent","timeExtent"]]).then((t=>{new i.SliderManager(e,this.panel,r,t)}))}onMenuItemClick(){return()=>{this._button.isActive=!this._button.isActive,this._button.isActive?this.panel.open():this.panel.close()}}}o.prototype.panelOptions={top:"calc(100% - 245px)",height:"185px","margin-right":"60px","margin-left":"420px"},o.prototype.layerOptions={open:!0,autorun:!1,loop:!1,precision:"0",delay:3e3,lock:!1,export:!1,rangeType:"dual",stepType:"dynamic",interval:0,range:{min:null,max:null},limit:{min:null,max:null},limits:[],type:"date",layers:[],controls:["lock","loop","delay","refresh"]},o.prototype.translations={"en-CA":{title:"Range Slider",minimize:"Minimize the slider interface",maximize:"Maximize the slider interface",bar:{show:"Show slider information",hide:"Hide slider information",lock:"Lock left anchor",unlock:"Unlock left anchor",loop:"Animate in loop",unloop:"Do not animate in loop",forward:"Animate forward",reverse:"Animate backward",previous:"Previous",play:"Play",pause:"Pause",foward:"Next",delay:"Delay",refresh:"Refresh",gif:"GIF",tooltip:{gif:'If enabled, click "Play" to start then "Pause" to finish then disable the control to export GIF'},esriImageNote:"NOTE: Only the last handle will affect the layer visibility. The first handle is use to set the interval for controls."}},"fr-CA":{title:"Curseur de plage",minimize:"Minimiser l'interface du curseur",maximize:"Maximizer l'interface du curseur",bar:{show:"Afficher l'information du curseur de plage",hide:"Cacher l'information du curseur de plage",lock:"Verrouiller la molette gauche",unlock:"Déverrouiller la molette gauche",loop:"Animer en boucle",unloop:"Ne pas animer en boucle",forward:"Animer normalement",reverse:"Animer à rebours",previous:"Précédent",play:"Jouer",pause:"Pause",foward:"Prochain",delay:"Délai",refresh:"Rafraîchir",gif:"GIF",tooltip:{gif:'Si activé, cliquez sur "Jouer" pour démarrer, puis sur "Pause" pour terminer et désactiver le contrôle pour exporter le GIF'},esriImageNote:"REMARQUE: seule la dernière molette affectera la visibilité de la couche. La première molette est utilisée pour définir l'intervalle pour les contrôles."}}},window.rangeSlider=o},148:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderBar=void 0;const n=r(365),i=r(650),o=r(306),s=r(911),a=r(598);class c{constructor(e,t,r){this._range={min:null,max:null},this._limit={min:null,max:null},this._limits=[],this._gifImages=[],this._mapApi=e,this._slider=document.getElementById("nouislider"),this._config=t,this._myBundle=r,this._precision="number"===t.type?t.precision:"date"===t.precision?-1:-2,this._slider.delay=t.delay,this._slider.lock=t.lock,this._slider.dual="dual"===t.rangeType,this._slider.loop=t.loop,this._slider.range=t.range,this._slider.export=t.export,this._slider.reverse=!1,this._stepType=t.stepType,this._rangeType=t.rangeType,this._interval=t.interval,document.getElementsByClassName("slider-units")[0].textContent=t.units}static getPlayState(){return this._playState.asObservable()}static setPlayState(e){this._playState.next(e)}startSlider(e,t){const r=this._mapApi.fgpMapObj.width;n.create(this._slider,{start:"dual"===this._rangeType?[this.range.min,this.range.max]:[this.range.min],connect:!0,behaviour:"drag-tap",tooltips:this.setTooltips(e,t),range:this.setNoUiBarRanges(r,this.limit,this._rangeType,this._stepType,this._interval),step:(this._limit.max-this.limit.min)/100,snap:"static"===this._stepType,pips:{mode:"range",density:"static"===this._stepType?100:r>800?5:10,format:{to:r=>this.formatPips(r,e,t),from:Number}}});const i=$(".noUi-value");let o=0,s=1;for(;s!==i.length;){let e=i[o].getBoundingClientRect(),t=i[s].getBoundingClientRect(),r=Math.abs(e.x-t.x)<(e.x<t.x?t.width:e.width),n=Math.abs(e.y-t.y)<(e.y<t.y?t.height:e.height);r&&n?(i[s].style.display="none",s++):(o=s-o!=1?s:o+1,s++)}document.getElementsByClassName("noUi-handle-lower")[0].setAttribute("tabindex","-2"),"dual"===this._rangeType&&document.getElementsByClassName("noUi-handle-upper")[0].setAttribute("tabindex","-2"),null===this._slider.range.min&&(this._slider.range=this.range),this._slider.range="dual"===this._rangeType?this._slider.range:{min:this._slider.range.min,max:this._slider.range.min},this.setDefinitionQuery(this._slider.range);let a=this;this._slider.noUiSlider.on("set.one",(function(e){const t=e.map(Number);a._slider.range="dual"===a._rangeType?{min:t[0],max:t[1]}:{min:t[0],max:t[0]},a.setDefinitionQuery(a._slider.range),a._slider.lock||(a._step=a._slider.range.max-a._slider.range.min)}))}setNoUiBarRanges(e,t,r,n,i){let o={};const s=Math.abs(this.limit.max-this.limit.min);if("dual"===r&&"dynamic"===n)o.min=t.min,o.max=t.max,o["50%"]=t.min+s/2,e>800&&(o["25%"]=t.min+s/4,o["75%"]=t.min+s/4*3);else if("single"===r&&"dynamic"===n){o.min=[t.min,i],o.max=[t.max,i];const r=i-s/2%i;if(o["50%"]=[t.min+s/2+r,i],e>800){const e=i-(t.min+s/4)%i,r=i-(t.min+s/4*3)%i;o["25%"]=[t.min+s/4+e,i],o["75%"]=[t.min+s/4*3+r,i]}}else if("static"===n){o.min=t.min,o.max=t.max,t.staticItems.length;for(let[e,r]of t.staticItems.entries())o[(r-o.min)/s*100+"%"]=r}return o}formatPips(e,t,r){if("number"===t)e=(Math.round(100*e)/100).toFixed(this._precision);else if("date"===t||"wmst"===t){let t=new Date(e);e="en-FR"===r?`${t.getDate()}/${t.getMonth()+1}/${t.getFullYear()}`:`${t.getMonth()+1}/${t.getDate()}/${t.getFullYear()}`,-2===this._precision&&(e+=` - ${t.getHours()}:${(t.getMinutes()+1).toString().padStart(2,"0")}:${(t.getSeconds()+1).toString().padStart(2,"0")}`,$(".slider-bar")[0].style.paddingLeft="60px")}return e}setTooltips(e,t){const r=[{to:r=>this.formatPips(r,e,t),from:Number}];return"dual"===this._rangeType&&r.push({to:r=>this.formatPips(r,e,t),from:Number}),r}set range(e){this._range=e}get range(){return this._range}set limit(e){this._limit=e}get limit(){return this._limit}set limits(e){this._limits=e}get limits(){return this._limits}set lock(e){this._slider.lock=e}get lock(){return this._slider.lock}get dual(){return this._slider.dual}set loop(e){this._slider.loop=e}get loop(){return this._slider.loop}set reverse(e){this._slider.reverse=e}get reverse(){return this._slider.reverse}set delay(e){this._slider.delay=e}get delay(){return this._slider.delay}set export(e){this._slider.export=e}get export(){return this._slider.export}play(e){e?(c.setPlayState(e),this._gifImages=[],this.setTakeSnapShot(),this._playInterval=setInterval((()=>this.playInstant(this.limit.min,this.limit.max)),this.delay)):this.pause()}playInstant(e,t){if(this.setTakeSnapShot(),this._slider.reverse)if(this._slider.range.min!==e)this.step("down");else if(this._slider.loop){if(this._slider.range.max=this.limit.max,"dynamic"===this._stepType)this._slider.range.min=this._slider.range.max-this._step;else if("static"===this._stepType){const e="dual"===this._rangeType?this._slider.noUiSlider.get().map(Number)[0]:+this._slider.noUiSlider.get(),t=this.limit.staticItems.findIndex((t=>t===e));this._slider.range.min=-1===t&&"dual"!==this._rangeType?this.limit.max:this.limit.staticItems[this.limit.staticItems.length-1]}this._slider.noUiSlider.set([this._slider.range.min,this._slider.range.max])}else this.pause();else if(this._slider.range.max!==t)this.step("up");else if(this._slider.loop){if(this._slider.range.min=this.limit.min,"dynamic"===this._stepType)this._slider.range.max=this._slider.range.min+this._step;else if("static"===this._stepType){const e="dual"===this._rangeType?this._slider.noUiSlider.get().map(Number)[0]:+this._slider.noUiSlider.get(),t=this.limit.staticItems.findIndex((t=>t===e));this._slider.range.max=this.limit.staticItems[this.limit.staticItems.length-1-t]}this._slider.noUiSlider.set([this._slider.range.min,this._slider.range.max])}else this.pause()}setTakeSnapShot(){this.export&&setTimeout((()=>{this.takeSnapShot(!1)}),this.delay-100)}takeSnapShot(e){const t=document.getElementsByClassName("rv-esri-map")[0];o.toSvg(t,{bgcolor:"white",quality:.5}).then((e=>{this._gifImages.push(e)})).catch((e=>{console.error("Not able to save screen shot!",e)}))}exportToGIF(){const e=document.getElementsByClassName("rv-esri-map")[0],t=e.offsetHeight/e.offsetWidth,r=e.offsetWidth<=1500?e.offsetWidth:1500,n=r*t;try{setTimeout((()=>{s.createGIF({images:this._gifImages,frameDuration:10,numFrames:1,gifWidth:r,gifHeight:n},(e=>{this._gifImages=[],e.error||a.saveAs(this.dataURItoBlob(e.image),"fgpv-slider-export.gif")}))}),500)}catch(e){console.error("Not able to convert screen shot to GIF!",e)}}dataURItoBlob(e){const t=atob(e.split(",")[1]),r=e.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(t.length),i=new Uint8Array(n);for(let e=0;e<t.length;e++)i[e]=t.charCodeAt(e);return new Blob([n],{type:r})}pause(){this.export&&this.takeSnapShot(!0),clearInterval(this._playInterval),c.setPlayState(!1)}refresh(){this._slider.noUiSlider.set([this.range.min,this.range.max]),this.setDefinitionQuery(this.range),this.pause()}step(e){let t;if("dual"===this._rangeType){const r=this._slider.noUiSlider.get().map(Number);if("dynamic"===this._stepType){const n="up"===e?this._step:-this._step;t={min:this.lock?r[0]:this.setLeftAnchorDynamic(r,e,n),max:this.setRightAnchorDynamic(r,e,n)}}else if("static"===this._stepType&&"dual"==this._rangeType){const r="up"===e?this._slider.noUiSlider.steps()[0][1]:-this._slider.noUiSlider.steps()[0][0],n="up"===e?this._slider.noUiSlider.steps()[1][1]:-this._slider.noUiSlider.steps()[1][0];t={min:this.lock?this._slider.range.min:null!==n?this._slider.range.min+r:this._slider.range.min,max:-0!==r?this._slider.range.max+n:this._slider.range.max}}this._slider.noUiSlider.set([t.min,t.max])}else if("single"===this._rangeType){const r=+this._slider.noUiSlider.get(),n=this.limit.staticItems.findIndex((e=>e===r));let i;i=(0===n||-1===n&&r===this.limit.min)&&"down"===e?this.limit.min:(n===this.limit.staticItems.length-1||-1===n&&r===this.limit.max)&&"up"===e?this.limit.max:-1===n&&r===this.limit.max&&"down"===e?this.limit.staticItems[this.limit.staticItems.length-1]:"up"===e?this.limit.staticItems[n+1]:this.limit.staticItems[n-1],t={min:i,max:i},this._slider.noUiSlider.set(t.min)}this.setDefinitionQuery(t),this._slider.range=t}setLeftAnchorDynamic(e,t,r){let n=0;const i=this.limit;n="down"===t?Math.floor(e[0]+r)<i.min?i.min:e[0]+r:Math.ceil(e[0]+r)>i.max-r?i.max-r:e[0]+r;const o=this._precision<0?0:this._precision;return parseFloat(n.toFixed(o))}setRightAnchorDynamic(e,t,r){let n=0;const i=this.limit;n="up"===t?Math.ceil(e[1]+r)>i.max?i.max:e[1]+r:Math.floor(e[1]+r)<i.min-r?i.min-r:e[1]+r;const o=this._precision<0?0:this._precision;return parseFloat(n.toFixed(o))}setDefinitionQuery(e){for(let t of this._config.layers){const r=this._mapApi.layers.getLayersById(t.id)[0],n=r.type;if("esriDynamic"===n||"esriFeature"===n){if("number"===this._config.type)r.setFilterSql("rangeSliderNumberFilter",`${t.field} >= ${e.min} AND ${t.field} <= ${e.max}`);else if("date"===this._config.type){const n=this.getDate(e);r.setFilterSql("rangeSliderDateFilter",`${t.field} >= DATE '${n[0]}' AND ${t.field} <= DATE '${n[1]}'`)}}else if("esriImage"===n){const t=this.getDate(e),r=new this._myBundle.timeExtent;r.startTime=new Date(t[0]),r.endTime=new Date(t[1]),this._mapApi.esriMap.setTimeExtent(r)}else if("ogcWms"===n)if("number"===this._config.type)r.esriLayer.setCustomParameters({},{layerDefs:`{'${r._viewerLayer._defaultFC}': '${t.field} >= ${e.min} AND ${t.field} <= ${e.max}'}`});else if("date"===this._config.type){const n=this.getDate(e);r.esriLayer.setCustomParameters({},{layerDefs:`{'${r._viewerLayer._defaultFC}': "${t.field} >= DATE '${n[0]}' AND ${t.field} <= DATE '${n[1]}'"}`})}else if("wmst"===this._config.type){const t=this.getDate(e,"wmst"),n="single"===this._rangeType?`${t[0]}`:`${t[0]}/${t[1]}`;r.esriLayer.setCustomParameters({},{TIME:n})}}}getDate(e,t="esri"){const r=new Date(e.min),n=new Date(e.max);let i="",o="";return"esri"===t?(i=this.getEsriDate(r),o=this.getEsriDate(n)):"wmst"===t&&(i=this.getDateWMTS(r),o=this.getDateWMTS(n)),[i,o]}getEsriDate(e){return`${e.getMonth()+1}/${e.getDate()}/${e.getFullYear()} ${e.getUTCHours().toString().padStart(2,"0")}:${e.getUTCMinutes().toString().padStart(2,"0")}:${e.getSeconds().toString().padStart(2,"0")}`}getDateWMTS(e){return`${e.getFullYear()}-${(e.getMonth()+1).toString().padStart(2,"0")}-${e.getDate().toString().padStart(2,"0")}T${e.getHours().toString().padStart(2,"0")}:${e.getMinutes().toString().padStart(2,"0")}:${e.getSeconds().toString().padStart(2,"0")}Z`}}t.SliderBar=c,c._playState=new i.BehaviorSubject(!1)},825:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderControls=void 0;const n=r(704),i=r(148),{detect:o}=r(701);t.SliderControls=class{constructor(e,t,r,s){this.mapApi=e,e.agControllerRegister("MinMaxSliderCtrl",(function(){this.isMax=!0,this.show=()=>{this.isMax=!this.isMax,document.getElementById("rangeSlider").parentElement.classList.toggle("slider-min-ui"),document.getElementById("rangeSlider").getElementsByClassName("slider-minmax-control")[0].children[0].classList.toggle("slider-max-control-icon")}})),e.agControllerRegister("DescSliderCtrl",(function(){this.isShow=!0,this.show=()=>{this.isShow=!this.isShow;const e=document.getElementById("rangeSlider");e.style.height=this.isShow?"185px":"125px",e.style.top=this.isShow?"calc(100% - 245px)":"calc(100% - 185px)"}})),e.agControllerRegister("LockSliderCtrl",(function(){this.isLocked=s.lock,this.isDual=s.dual,this.lock=()=>{s.lock=!s.lock,this.isLocked=s.lock}})),e.agControllerRegister("LoopSliderCtrl",(function(){this.isLooped=s.loop,this.loop=()=>{s.loop=!s.loop,this.isLooped=s.loop,e.fgpMapObj.esriMap.root.parentElement.parentElement.getElementsByClassName("slider-loop-control")[0].getElementsByTagName("md-icon")[0].classList.toggle("slider-loop-control-active")}})),e.agControllerRegister("ReverseSliderCtrl",(function(){this.isReverse=s.reverse,this.reverse=()=>{s.reverse=!s.reverse,this.isReverse=s.reverse}})),e.agControllerRegister("StepSliderCtrl",(function(){this.step=e=>{s.step(e)}})),e.agControllerRegister("PlaySliderCtrl",(function(){i.SliderBar.getPlayState().subscribe((e=>{this.isPlaying=e})),this.play=()=>{s.play(!this.isPlaying)}})),e.agControllerRegister("RefreshSliderCtrl",(function(){this.refresh=()=>{s.refresh()}})),e.agControllerRegister("DelaySliderCtrl",(function(){this.selectedDelay=s.delay,this.selectDelay=()=>{s.delay=this.selectedDelay}})),e.agControllerRegister("ExportSliderCtrl",(function(){this.export=s.export,this.selectExport=()=>{s.export=this.export,this.export||s.exportToGIF()}}));const a=t.body.find(".slider-controls");for(let e of r)if(e.includes("slider-reverse-control"))a.find(".slider-play-control").append(this.compileTemplate(e));else if(e.includes("slider-delay-control"))a.find(".slider-play-control").append(this.compileTemplate(e));else if(e.includes("slider-loop-control"))a.find(".slider-play-control").prepend(this.compileTemplate(e));else if(e.includes("slider-export-control")){const t=o();"chrome"!==t.name&&"firefox"!==t.name||a.append(this.compileTemplate(e))}else a.append(this.compileTemplate(e));t.body.find(".slider-content").prepend(this.compileTemplate(n.MIN_MAX_TEMPLATE))}compileTemplate(e){let t=$(e);return this.mapApi.$compile(t),t}}},270:(e,t,r)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.SliderManager=void 0;const n=r(704),i=r(825),o=r(148),s=r(616);t.SliderManager=class{constructor(e,t,r,n){this._attRead=0,this._mapApi=e,this._panel=t,this._config=r,this._myBundle=n;let i=this._config.layers.map((e=>e.id));const o=[];let s=0;this._mapApi.layersObj.layerAdded.subscribe((e=>{if(-1!==i.indexOf(e.id)){s+=1;const t=this._config.layers.find((t=>t.id===e.id));if(o.push({layer:e,layerInfo:t}),s===this._config.layers.length){this.initializeSlider(o);const e=o.map((e=>`${e.layer.name} (${e.layerInfo.field})`)).join(", ");document.getElementsByClassName("slider-desc-layers")[0].textContent=e;const t=[];o.findIndex((e=>"esriImage"===e.layer._layerType))>=0&&t.push(this._config.translations.bar.esriImageNote),""!==this._config.description&&t.unshift(this._config.description),document.getElementsByClassName("slider-desc-info")[0].textContent=`${t.join(", ")}`}}else 0===i.length&&new Promise((t=>{$.ajax({url:"esriFeature"===e.type?`${e.esriLayer.url}?f=json`:`${e.esriLayer.url}/${e._layerIndex}?f=json`,cache:!1,dataType:"jsonp",success:e=>t(e)})})).then((t=>{if(void 0!==t.timeInfo){const r={id:e.id,field:t.timeInfo.startTimeField};o.push({layer:e,layerInfo:r}),this._config.layers=[r],this.initializeSlider(o),document.getElementsByClassName("slider-desc-layers")[0].textContent=`${e.name} (${r.field})`,i=["done"]}}))}))}initializeSlider(e){if(this._slider=new o.SliderBar(this._mapApi,this._config,this._myBundle),null!==this._config.limit.min)this._slider.limit=this._config.limit,this._slider.range=null!==this._config.range.min?this._config.range:this._config.limit,this.setSliderBar();else for(let t of e){const r=t.layer.type;"esriDynamic"!==r&&"esriFeature"!==r||0===t.layer.getAttributes().length&&this.startAttributesEvent(t.layerInfo,e.length)}}startAttributesEvent(e,t){this._mapApi.layers.attributesAdded.pipe(s.take(1)).subscribe((r=>{this.setAttributes(r,e,t)}))}setAttributes(e,t,r){if(e.attributes.length>0&&e.layer.id===t.id){this._attRead+=1;const n=[];for(let r of e.attributes)n.push(r[t.field]);const i={min:Math.min.apply(null,n),max:Math.max.apply(null,n)};(null===this._slider.limit.min||this._slider.limit.min>i.min)&&(this._slider.limit.min=i.min),(null===this._slider.limit.max||this._slider.limit.max<i.max)&&(this._slider.limit.max=i.max),this._slider.range=null!==this._config.range.min?this._config.range:this._slider.limit,r===this._attRead&&this.setSliderBar()}else this.startAttributesEvent(t,r)}setSliderBar(){this._slider.startSlider(this._config.type,this._config.language),this.setBarControls(this._config.controls),this._config.open&&this._panel.open(),this._config.autorun&&this._slider.play(!0)}setBarControls(e){const t=[n.PLAY_BAR_TEMPLATE];for(let r of e)"lock"===r?t.unshift(n.LOCK_BAR_TEMPLATE):"reverse"===r?t.push(n.REVERSE_BAR_TEMPLATE):"loop"===r?t.push(n.LOOP_BAR_TEMPLATE):"refresh"===r?t.push(n.REFRESH_BAR_TEMPLATE):"delay"===r?t.push(n.DELAY_BAR_TEMPLATE):"export"===r&&t.push(n.EXPORT_BAR_TEMPLATE);t.unshift(n.DESC_BAR_TEMPLATE),this._panel.controls=new i.SliderControls(this._mapApi,this._panel,t,this._slider)}}},704:(e,t)=>{"use strict";function r(e){return`<svg xmlns="http://www.w3.org/2000/svg" fit="" height="100%" width="100%" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" focusable="false">\n            <g id="slider${e}">${{minimize:'<path d="M0 0h24v24H0V0z" fill="#FFFFFF"></path><path d="M6 19h12v2H6z"></path>',maximize:'<path d="M0 0h24v24H0V0z" fill="#FFFFFF"></path><path d="M3 3h18v2H3z"></path>',lock:'<path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"></path>',lockOpen:'<path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"></path>',loop:'<path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"></path>',reverse:'<path d="M8.5,8.62v6.76L5.12,12L8.5,8.62 M10,5l-7,7l7,7V5L10,5z M14,5v14l7-7L14,5z"/>',forward:'<path d="M15.5,15.38V8.62L18.88,12L15.5,15.38 M14,19l7-7l-7-7V19L14,19z M10,19V5l-7,7L10,19z"/>',unloop:'<g><line id="svg_1" y2="21" x2="21" y1="3" x1="3" stroke-width="1.5" stroke="#607d8b" fill="none"/></g><path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"></path>',next:'<path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"></path>',previous:'<path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"></path>',play:'<path d="M8 5v14l11-7z"></path>',pause:'<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path>',refresh:'<path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"></path>',show:'<path d="M 11.9994,8.99813C 10.3424,8.99813 8.99941,10.3411 8.99941,11.9981C 8.99941,13.6551 10.3424,14.9981 11.9994,14.9981C 13.6564,14.9981 14.9994,13.6551 14.9994,11.9981C 14.9994,10.3411 13.6564,8.99813 11.9994,8.99813 Z M 11.9994,16.9981C 9.23841,16.9981 6.99941,14.7591 6.99941,11.9981C 6.99941,9.23714 9.23841,6.99813 11.9994,6.99813C 14.7604,6.99813 16.9994,9.23714 16.9994,11.9981C 16.9994,14.7591 14.7604,16.9981 11.9994,16.9981 Z M 11.9994,4.49813C 6.99741,4.49813 2.72741,7.60915 0.99941,11.9981C 2.72741,16.3871 6.99741,19.4981 11.9994,19.4981C 17.0024,19.4981 21.2714,16.3871 22.9994,11.9981C 21.2714,7.60915 17.0024,4.49813 11.9994,4.49813 Z "></path>',hide:'<path d="M 11.8344,9.01477L 14.9824,12.1627C 14.9854,12.1068 14.9994,12.0547 14.9994,11.9977C 14.9994,10.3408 13.6564,8.99774 11.9994,8.99774C 11.9424,8.99774 11.8904,9.01172 11.8344,9.01477 Z M 7.52838,9.80072L 9.07538,11.3467C 9.02838,11.5568 8.99939,11.7737 8.99939,11.9977C 8.99939,13.6547 10.3424,14.9977 11.9994,14.9977C 12.2244,14.9977 12.4414,14.9688 12.6504,14.9227L 14.1974,16.4688C 13.5314,16.7968 12.7914,16.9977 11.9994,16.9977C 9.2384,16.9977 6.99939,14.7598 6.99939,11.9977C 6.99939,11.2057 7.20038,10.4667 7.52838,9.80072 Z M 1.99939,4.27075L 4.27838,6.55072L 4.7334,7.00574C 3.0834,8.29773 1.7804,10.0157 0.99939,11.9977C 2.72739,16.3867 6.99738,19.4977 11.9994,19.4977C 13.5494,19.4977 15.0284,19.1978 16.3834,18.6558L 16.8074,19.0787L 19.7264,21.9987L 20.9994,20.7258L 3.2724,2.99872M 11.9994,6.99774C 14.7604,6.99774 16.9994,9.23676 16.9994,11.9977C 16.9994,12.6437 16.8674,13.2568 16.6444,13.8237L 19.5664,16.7457C 21.0744,15.4847 22.2674,13.8577 22.9994,11.9977C 21.2714,7.60876 17.0024,4.49774 11.9994,4.49774C 10.5994,4.49774 9.26038,4.74872 8.01538,5.19574L 10.1734,7.35376C 10.7404,7.13074 11.3534,6.99774 11.9994,6.99774 Z "></path>'}[e]}</g></svg>`}Object.defineProperty(t,"__esModule",{value:!0}),t.EXPORT_BAR_TEMPLATE=t.DELAY_BAR_TEMPLATE=t.REFRESH_BAR_TEMPLATE=t.PLAY_BAR_TEMPLATE=t.REVERSE_BAR_TEMPLATE=t.LOOP_BAR_TEMPLATE=t.LOCK_BAR_TEMPLATE=t.DESC_BAR_TEMPLATE=t.MIN_MAX_TEMPLATE=t.SLIDER_TEMPLATE=void 0,t.SLIDER_TEMPLATE='\n<div rv-focus-member class="rv-rangeslider">\n    <div class="slider-content">\n        <div class="slider-bar">\n            <div class="slider-bar-noui"><div id="nouislider" class="slider-widget"></div><span class="slider-units"></span></div>\n            <div class="slider-controls"></div>\n        </div>\n        <div class="slider-desc">\n            <span class="slider-desc-layers"></span>\n            <span class="slider-desc-info"></span>\n        </div>\n    </div>\n</div>',t.MIN_MAX_TEMPLATE='\n<div class="slider-bar-control slider-minmax-control" ng-controller="MinMaxSliderCtrl as ctrl">\n    <md-button\n        aria-label="{{ !ctrl.isMax ? \'plugins.rangeSlider.maximize\' : \'plugins.rangeSlider.minimize\' | translate }}"\n        class="md-icon-button rv-button-24 slider-max-control-icon"\n        ng-click="ctrl.show()">\n        <md-tooltip>{{ !ctrl.isMax ? \'plugins.rangeSlider.maximize\' : \'plugins.rangeSlider.minimize\' | translate }}</md-tooltip>\n        <md-icon md-svg-src="community:apple-keyboard-control"></md-icon>\n    </md-button>\n</div>',t.DESC_BAR_TEMPLATE=`\n<div class="slider-bar-control slider-desc-control" ng-controller="DescSliderCtrl as ctrl">\n    <md-button\n        aria-label="{{ !ctrl.isShow ? 'plugins.rangeSlider.bar.show' : 'plugins.rangeSlider.bar.hide' | translate }}"\n        class="md-icon-button primary"\n        ng-click="ctrl.show()">\n        <md-tooltip>{{ !ctrl.isShow ? 'plugins.rangeSlider.bar.show' : 'plugins.rangeSlider.bar.hide' | translate }}</md-tooltip>\n        <md-icon ng-if="ctrl.isShow">${r("hide")}</md-icon>\n        <md-icon ng-if="!ctrl.isShow">${r("show")}</md-icon>\n    </md-button>\n</div>`,t.LOCK_BAR_TEMPLATE=`\n<div class="slider-bar-control slider-lock-control" ng-controller="LockSliderCtrl as ctrl">\n    <md-button\n        aria-label="{{ !ctrl.isLocked ? 'plugins.rangeSlider.bar.lock' : 'plugins.rangeSlider.bar.unlock' | translate }}"\n        class="md-icon-button primary"\n        ng-click="ctrl.lock()"\n        ng-if="ctrl.isDual">\n        <md-tooltip>{{ !ctrl.isLocked ? 'plugins.rangeSlider.bar.lock' : 'plugins.rangeSlider.bar.unlock' | translate }}</md-tooltip>\n        <md-icon ng-if="ctrl.isLocked">${r("lock")}</md-icon>\n        <md-icon ng-if="!ctrl.isLocked">${r("lockOpen")}</md-icon>\n    </md-button>\n</div>`,t.LOOP_BAR_TEMPLATE=`\n<div class="slider-bar-control slider-loop-control" ng-controller="LoopSliderCtrl as ctrl">\n    <md-button\n        aria-label="{{ !ctrl.isLooped ? 'plugins.rangeSlider.bar.loop' : 'plugins.rangeSlider.bar.unloop' | translate }}"\n        class="md-icon-button primary"\n        ng-click="ctrl.loop()">\n        <md-tooltip>{{ !ctrl.isLooped ? 'plugins.rangeSlider.bar.loop' : 'plugins.rangeSlider.bar.unloop' | translate }}</md-tooltip>\n        <md-icon ng-if="ctrl.isLooped">${r("loop")}</md-icon>\n        <md-icon ng-if="!ctrl.isLooped">${r("unloop")}</md-icon>\n    </md-button>\n</div>`,t.REVERSE_BAR_TEMPLATE=`\n<div class="slider-bar-control slider-reverse-control" ng-controller="ReverseSliderCtrl as ctrl">\n    <md-button\n        aria-label="{{ ctrl.isReverse ? 'plugins.rangeSlider.bar.forward' : 'plugins.rangeSlider.bar.reverse' | translate }}"\n        class="md-icon-button primary"\n        ng-click="ctrl.reverse()">\n        <md-tooltip>{{ ctrl.isReverse ? 'plugins.rangeSlider.bar.forward' : 'plugins.rangeSlider.bar.reverse' | translate }}</md-tooltip>\n        <md-icon ng-if="ctrl.isReverse">${r("forward")}</md-icon>\n        <md-icon ng-if="!ctrl.isReverse">${r("reverse")}</md-icon>\n    </md-button>\n</div>`,t.PLAY_BAR_TEMPLATE=`\n<div class="slider-bar-control slider-play-control">\n    <md-button\n        ng-controller="StepSliderCtrl as ctrl"\n        aria-label="{{ 'plugins.rangeSlider.bar.previous' | translate }}"\n        class="md-icon-button primary"\n        ng-click="ctrl.step('down')">\n        <md-tooltip>{{ 'plugins.rangeSlider.bar.previous' | translate }}</md-tooltip>\n        <md-icon>${r("previous")}</md-icon>\n    </md-button>\n    <div ng-controller="PlaySliderCtrl as ctrl">\n        <md-button\n            aria-label="{{ ctrl.isPlaying ? 'plugins.rangeSlider.bar.pause' : 'plugins.rangeSlider.bar.play' | translate }}"\n            class="md-icon-button primary"\n            ng-click="ctrl.play()">\n            <md-tooltip>{{ ctrl.isPlaying ? 'plugins.rangeSlider.bar.pause' : 'plugins.rangeSlider.bar.play' | translate }}</md-tooltip>\n            <md-icon ng-if="ctrl.isPlaying">${r("pause")}</md-icon>\n            <md-icon ng-if="!ctrl.isPlaying">${r("play")}</md-icon>\n        </md-button>\n    </div>\n    <md-button\n        ng-controller="StepSliderCtrl as ctrl"\n        aria-label="{{ 'plugins.rangeSlider.bar.foward' | translate }}"\n        class="md-icon-button primary"\n        ng-click="ctrl.step('up')">\n        <md-tooltip>{{ 'plugins.rangeSlider.bar.foward' | translate }}</md-tooltip>\n        <md-icon>${r("next")}</md-icon>\n    </md-button>\n</div>`,t.REFRESH_BAR_TEMPLATE=`\n<div class="slider-bar-control slider-refresh-control">\n    <md-button\n        ng-controller="RefreshSliderCtrl as ctrl"\n        aria-label="{{ 'plugins.rangeSlider.bar.refresh' | translate }}"\n        class="md-icon-button primary rv-slider-refresh"\n        ng-click="ctrl.refresh()">\n        <md-tooltip>{{ 'plugins.rangeSlider.bar.refresh' | translate }}</md-tooltip>\n        <md-icon>${r("refresh")}</md-icon>\n    </md-button>\n</div>`,t.DELAY_BAR_TEMPLATE="\n<div ng-controller=\"DelaySliderCtrl as ctrl\" class=\"slider-bar-control slider-delay-control\">\n    <md-input-container class=\"md-block\" md-no-float flex>\n        <label>{{ 'plugins.rangeSlider.bar.delay' | translate }}</label>\n        <md-select\n            aria-label=\"{{ 'plugins.rangeSlider.bar.delay' | translate }}\"\n            ng-model=\"ctrl.selectedDelay\"\n            ng-change=\"ctrl.selectDelay()\">\n            <md-option ng-repeat=\"(key, value) in { 1000: '1 sec', 2000: '2 sec', 3000: '3 sec', 4000: '4 sec', 5000: '5 sec', 6000: '6 sec', 7000: '7 sec' }\" ng-value=\"{{ key }}\">\n                {{ value }}\n            </md-option>\n        </md-select>\n    </md-input-container>\n</div>",t.EXPORT_BAR_TEMPLATE='\n<div class="slider-bar-control slider-export-control">\n    <span>\n        <md-switch\n            ng-controller="ExportSliderCtrl as ctrl"\n            aria-label="{{ \'plugins.rangeSlider.bar.tooltip.gif\' | translate }}"\n            class="rv-slider-switch"\n            ng-class="md-primary"\n            ng-model="ctrl.export"\n            ng-change="ctrl.selectExport()">\n            <label>{{ \'plugins.rangeSlider.bar.gif\' | translate }}</label>\n        </md-switch>\n        <md-tooltip>{{ \'plugins.rangeSlider.bar.tooltip.gif\' | translate }}</md-tooltip>\n    </span>\n</div>'}},t={};function r(n){if(t[n])return t[n].exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,r),i.exports}r.amdD=function(){throw new Error("define cannot be used indirect")},r.amdO={},r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{"use strict";r(607),r(204)})()})();