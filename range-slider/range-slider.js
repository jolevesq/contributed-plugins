!function(t){var e={};function r(n){if(e[n])return e[n].exports;var i=e[n]={i:n,l:!1,exports:{}};return t[n].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=t,r.c=e,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(t,e){if(1&e&&(t=r(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)r.d(n,i,function(e){return t[e]}.bind(null,i));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s=8)}([function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(4),s=r(5),a=r(22),c=r(7),u=r(1),l=r(6),h=function(t){function e(r,n,i){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=s.empty;break;case 1:if(!r){o.destination=s.empty;break}if("object"==typeof r){r instanceof e?(o.syncErrorThrowable=r.syncErrorThrowable,o.destination=r,r.add(o)):(o.syncErrorThrowable=!0,o.destination=new d(o,r));break}default:o.syncErrorThrowable=!0,o.destination=new d(o,r,n,i)}return o}return i(e,t),e.prototype[c.rxSubscriber]=function(){return this},e.create=function(t,r,n){var i=new e(t,r,n);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(a.Subscription);e.Subscriber=h;var d=function(t){function e(e,r,n,i){var a,c=t.call(this)||this;c._parentSubscriber=e;var u=c;return o.isFunction(r)?a=r:r&&(a=r.next,n=r.error,i=r.complete,r!==s.empty&&(u=Object.create(r),o.isFunction(u.unsubscribe)&&c.add(u.unsubscribe.bind(u)),u.unsubscribe=c.unsubscribe.bind(c))),c._context=u,c._next=a,c._error=n,c._complete=i,c}return i(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;u.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,r=u.config.useDeprecatedSynchronousErrorHandling;if(this._error)r&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)r?(e.syncErrorValue=t,e.syncErrorThrown=!0):l.hostReportError(t),this.unsubscribe();else{if(this.unsubscribe(),r)throw t;l.hostReportError(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};u.config.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),u.config.useDeprecatedSynchronousErrorHandling)throw t;l.hostReportError(t)}},e.prototype.__tryOrSetError=function(t,e,r){if(!u.config.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,r)}catch(e){return u.config.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(l.hostReportError(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(h);e.SafeSubscriber=d},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=!1;e.config={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){var e=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+e.stack)}else n&&console.log("RxJS: Back to a better error behavior. Thank you. <3");n=t},get useDeprecatedSynchronousErrorHandling(){return n}}},function(t,e,r){"use strict";function n(t){return`<svg xmlns="http://www.w3.org/2000/svg" fit="" height="100%" width="100%" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" focusable="false">\n            <g id="slider${t}">${{histo:'<path d="M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zM9 17H7v-7h2v7zm4 0h-2V7h2v10zm4 0h-2v-4h2v4z"></path>',lock:'<path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"></path>',lockOpen:'<path d="M12 17c1.1 0 2-.9 2-2s-.9-2-2-2-2 .9-2 2 .9 2 2 2zm6-9h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6h1.9c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm0 12H6V10h12v10z"></path>',loop:'<path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"></path>',unloop:'<g><line id="svg_1" y2="21" x2="21" y1="3" x1="3" stroke-width="1.5" stroke="#607d8b" fill="none"/></g><path d="M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46C19.54 15.03 20 13.57 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74C4.46 8.97 4 10.43 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"></path>',next:'<path d="M6 18l8.5-6L6 6v12zM16 6v12h2V6h-2z"></path>',previous:'<path d="M6 6h2v12H6zm3.5 6l8.5 6V6z"></path>',play:'<path d="M8 5v14l11-7z"></path>',pause:'<path d="M6 19h4V5H6v14zm8-14v14h4V5h-4z"></path>',refresh:'<path d="M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4l-2.35 2.35z"></path>',show:'<path d="M 11.9994,8.99813C 10.3424,8.99813 8.99941,10.3411 8.99941,11.9981C 8.99941,13.6551 10.3424,14.9981 11.9994,14.9981C 13.6564,14.9981 14.9994,13.6551 14.9994,11.9981C 14.9994,10.3411 13.6564,8.99813 11.9994,8.99813 Z M 11.9994,16.9981C 9.23841,16.9981 6.99941,14.7591 6.99941,11.9981C 6.99941,9.23714 9.23841,6.99813 11.9994,6.99813C 14.7604,6.99813 16.9994,9.23714 16.9994,11.9981C 16.9994,14.7591 14.7604,16.9981 11.9994,16.9981 Z M 11.9994,4.49813C 6.99741,4.49813 2.72741,7.60915 0.99941,11.9981C 2.72741,16.3871 6.99741,19.4981 11.9994,19.4981C 17.0024,19.4981 21.2714,16.3871 22.9994,11.9981C 21.2714,7.60915 17.0024,4.49813 11.9994,4.49813 Z "></path>',hide:'<path d="M 11.8344,9.01477L 14.9824,12.1627C 14.9854,12.1068 14.9994,12.0547 14.9994,11.9977C 14.9994,10.3408 13.6564,8.99774 11.9994,8.99774C 11.9424,8.99774 11.8904,9.01172 11.8344,9.01477 Z M 7.52838,9.80072L 9.07538,11.3467C 9.02838,11.5568 8.99939,11.7737 8.99939,11.9977C 8.99939,13.6547 10.3424,14.9977 11.9994,14.9977C 12.2244,14.9977 12.4414,14.9688 12.6504,14.9227L 14.1974,16.4688C 13.5314,16.7968 12.7914,16.9977 11.9994,16.9977C 9.2384,16.9977 6.99939,14.7598 6.99939,11.9977C 6.99939,11.2057 7.20038,10.4667 7.52838,9.80072 Z M 1.99939,4.27075L 4.27838,6.55072L 4.7334,7.00574C 3.0834,8.29773 1.7804,10.0157 0.99939,11.9977C 2.72739,16.3867 6.99738,19.4977 11.9994,19.4977C 13.5494,19.4977 15.0284,19.1978 16.3834,18.6558L 16.8074,19.0787L 19.7264,21.9987L 20.9994,20.7258L 3.2724,2.99872M 11.9994,6.99774C 14.7604,6.99774 16.9994,9.23676 16.9994,11.9977C 16.9994,12.6437 16.8674,13.2568 16.6444,13.8237L 19.5664,16.7457C 21.0744,15.4847 22.2674,13.8577 22.9994,11.9977C 21.2714,7.60876 17.0024,4.49774 11.9994,4.49774C 10.5994,4.49774 9.26038,4.74872 8.01538,5.19574L 10.1734,7.35376C 10.7404,7.13074 11.3534,6.99774 11.9994,6.99774 Z "></path>'}[t]}</g></svg>`}Object.defineProperty(e,"__esModule",{value:!0}),e.SLIDER_TEMPLATE='\n<div rv-focus-member class="rv-rangeslider">\n    <div class="slider-content">\n        <div class="slider-bar">\n            <div><div id="nouislider" class="slider-widget"></div><span class="slider-units"></span></div>\n            <div class="slider-controls"></div>\n        </div>\n        <div class="slider-desc">\n            <span class="slider-desc-layers"></span>\n            <span class="slider-desc-info"></span>\n        </div>\n    </div>\n</div>',e.DESC_BAR_TEMPLATE=`\n<div class="slider-bar-control slider-desc-control" ng-controller="DescSliderCtrl as ctrl">\n    <md-button\n        aria-label="{{ !ctrl.isShow ? 'plugins.rangeSlider.bar.show' : 'plugins.rangeSlider.bar.hide' | translate }}"\n        class="md-icon-button primary"\n        ng-click="ctrl.show()">\n        <md-tooltip>{{ !ctrl.isShow ? 'plugins.rangeSlider.bar.show' : 'plugins.rangeSlider.bar.hide' | translate }}</md-tooltip>\n        <md-icon ng-if="ctrl.isShow">${n("hide")}</md-icon>\n        <md-icon ng-if="!ctrl.isShow">${n("show")}</md-icon>\n    </md-button>\n</div>`,e.LOCK_BAR_TEMPLATE=`\n<div class="slider-bar-control slider-lock-control" ng-controller="LockSliderCtrl as ctrl">\n    <md-button\n        aria-label="{{ !ctrl.isLocked ? 'plugins.rangeSlider.bar.lock' : 'plugins.rangeSlider.bar.unlock' | translate }}"\n        class="md-icon-button primary"\n        ng-click="ctrl.lock()"\n        ng-if="ctrl.isDual">\n        <md-tooltip>{{ !ctrl.isLocked ? 'plugins.rangeSlider.bar.lock' : 'plugins.rangeSlider.bar.unlock' | translate }}</md-tooltip>\n        <md-icon ng-if="ctrl.isLocked">${n("lock")}</md-icon>\n        <md-icon ng-if="!ctrl.isLocked">${n("lockOpen")}</md-icon>\n    </md-button>\n</div>`,e.LOOP_BAR_TEMPLATE=`\n<div class="slider-bar-control slider-loop-control" ng-controller="LoopSliderCtrl as ctrl">\n    <md-button\n        aria-label="{{ !ctrl.isLooped ? 'plugins.rangeSlider.bar.loop' : 'plugins.rangeSlider.bar.unloop' | translate }}"\n        class="md-icon-button primary"\n        ng-click="ctrl.loop()">\n        <md-tooltip>{{ !ctrl.isLooped ? 'plugins.rangeSlider.bar.loop' : 'plugins.rangeSlider.bar.unloop' | translate }}</md-tooltip>\n        <md-icon ng-if="ctrl.isLooped">${n("loop")}</md-icon>\n        <md-icon ng-if="!ctrl.isLooped">${n("unloop")}</md-icon>\n    </md-button>\n</div>`,e.PLAY_BAR_TEMPLATE=`\n<div class="slider-bar-control slider-play-control">\n    <md-button\n        ng-controller="StepSliderCtrl as ctrl"\n        aria-label="{{ 'plugins.rangeSlider.bar.previous' | translate }}"\n        class="md-icon-button primary"\n        ng-click="ctrl.step('down')">\n        <md-tooltip>{{ 'plugins.rangeSlider.bar.previous' | translate }}</md-tooltip>\n        <md-icon>${n("previous")}</md-icon>\n    </md-button>\n    <div ng-controller="PlaySliderCtrl as ctrl">\n        <md-button\n            aria-label="{{ ctrl.isPlaying ? 'plugins.rangeSlider.bar.pause' : 'plugins.rangeSlider.bar.play' | translate }}"\n            class="md-icon-button primary"\n            ng-click="ctrl.play()">\n            <md-tooltip>{{ ctrl.isPlaying ? 'plugins.rangeSlider.bar.pause' : 'plugins.rangeSlider.bar.play' | translate }}</md-tooltip>\n            <md-icon ng-if="ctrl.isPlaying">${n("pause")}</md-icon>\n            <md-icon ng-if="!ctrl.isPlaying">${n("play")}</md-icon>\n        </md-button>\n    </div>\n    <md-button\n        ng-controller="StepSliderCtrl as ctrl"\n        aria-label="{{ 'plugins.rangeSlider.bar.foward' | translate }}"\n        class="md-icon-button primary"\n        ng-click="ctrl.step('up')">\n        <md-tooltip>{{ 'plugins.rangeSlider.bar.foward' | translate }}</md-tooltip>\n        <md-icon>${n("next")}</md-icon>\n    </md-button>\n</div>`,e.REFRESH_BAR_TEMPLATE=`\n<div class="slider-bar-control slider-refresh-control">\n    <md-button\n        ng-controller="RefreshSliderCtrl as ctrl"\n        aria-label="{{ 'plugins.rangeSlider.bar.refresh' | translate }}"\n        class="md-icon-button primary rv-slider-refresh"\n        ng-click="ctrl.refresh()">\n        <md-tooltip>{{ 'plugins.rangeSlider.bar.refresh' | translate }}</md-tooltip>\n        <md-icon>${n("refresh")}</md-icon>\n    </md-button>\n</div>`,e.DELAY_BAR_TEMPLATE="\n<div ng-controller=\"DelaySliderCtrl as ctrl\" class=\"slider-bar-control slider-delay-control\">\n    <md-input-container class=\"md-block\" md-no-float flex>\n        <label>{{ 'plugins.rangeSlider.bar.delay' | translate }}</label>\n        <md-select\n            aria-label=\"{{ 'plugins.rangeSlider.bar.delay' | translate }}\"\n            ng-model=\"ctrl.selectedDelay\"\n            ng-change=\"ctrl.selectDelay()\">\n            <md-option ng-repeat=\"(key, value) in { 1000: '1 sec', 2000: '2 sec', 3000: '3 sec', 4000: '4 sec', 5000: '5 sec', 6000: '6 sec', 7000: '7 sec' }\" ng-value=\"{{ key }}\">\n                {{ value }}\n            </md-option>\n        </md-select>\n    </md-input-container>\n</div>",e.EXPORT_BAR_TEMPLATE='\n<div class="slider-bar-control slider-export-control">\n    <span>\n        <md-switch\n            ng-controller="ExportSliderCtrl as ctrl"\n            aria-label="{{ \'plugins.rangeSlider.bar.tooltip.gif\' | translate }}"\n            class="rv-slider-switch"\n            ng-class="md-primary"\n            ng-model="ctrl.export"\n            ng-change="ctrl.selectExport()">\n            <label>{{ \'plugins.rangeSlider.bar.gif\' | translate }}</label>\n        </md-switch>\n        <md-tooltip>{{ \'plugins.rangeSlider.bar.tooltip.gif\' | translate }}</md-tooltip>\n    </span>\n</div>'},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(13),i=r(35),o=r(14),s=r(15),a=r(16);class c{constructor(t,e,r){this._range={min:null,max:null},this._limit={min:null,max:null},this._limits=[],this._gifImages=[],this._mapApi=t,this._slider=document.getElementById("nouislider"),this._config=e,this._myBundle=r,this._precision="number"===e.type?e.precision:"date"===e.precision?-1:-2,this._slider.delay=e.delay,this._slider.lock=e.lock,this._slider.dual="dual"===e.rangeType,this._slider.loop=e.loop,this._slider.range=e.range,this._slider.export=e.export,this._stepType=e.stepType,this._rangeType=e.rangeType,this._interval=e.interval,this._intervalUnit=e.intervalUnit,document.getElementsByClassName("slider-units")[0].textContent=e.units}static getPlayState(){return this._playState.asObservable()}static setPlayState(t){this._playState.next(t)}startSlider(t,e){const r=this._mapApi.fgpMapObj.width;n.create(this._slider,{start:"dual"===this._rangeType?[this.range.min,this.range.max]:[this.range.min],connect:!0,behaviour:"drag-tap",tooltips:this.setTooltips(t,e),range:this.setNoUiBarRanges(r,this.limit,this._rangeType,this._stepType,this._interval),step:1,snap:"static"===this._stepType,pips:{mode:"range",density:"static"===this._stepType?100:r>800?5:10,format:{to:r=>this.formatPips(r,t,e),from:Number}}});const i=$(".noUi-value");let o=0,s=1;for(;s!==i.length;){let t=i[o].getBoundingClientRect(),e=i[s].getBoundingClientRect(),r=Math.abs(t.x-e.x)<(t.x<e.x?e.width:t.width),n=Math.abs(t.y-e.y)<(t.y<e.y?e.height:t.height);r&&n?(i[s].style.display="none",s++):(o=s-o!=1?s:o+1,s++)}document.getElementsByClassName("noUi-handle-lower")[0].setAttribute("tabindex","-2"),"dual"===this._rangeType&&document.getElementsByClassName("noUi-handle-upper")[0].setAttribute("tabindex","-2"),null===this._slider.range.min&&(this._slider.range=this.range),this._slider.range="dual"===this._rangeType?this._slider.range:{min:this._slider.range.min,max:this._slider.range.min},this.setDefinitionQuery(this._slider.range);let a=this;this._slider.noUiSlider.on("set.one",(function(t){const e=t.map(Number);a._slider.range="dual"===a._rangeType?{min:e[0],max:e[1]}:{min:e[0],max:e[0]},a.setDefinitionQuery(a._slider.range),a._slider.lock||(a._step=a._slider.range.max-a._slider.range.min)}))}setNoUiBarRanges(t,e,r,n,i){let o={};const s=Math.abs(this.limit.max-this.limit.min);if("dual"===r&&"dynamic"===n)o.min=e.min,o.max=e.max,o["50%"]=e.min+s/2,t>800&&(o["25%"]=e.min+s/4,o["75%"]=e.min+s/4*3);else if("single"===r&&"dynamic"===n){o.min=[e.min,i],o.max=[e.max,i];const r=i-s/2%i;if(o["50%"]=[e.min+s/2+r,i],t>800){const t=i-(e.min+s/4)%i,r=i-(e.min+s/4*3)%i;o["25%"]=[e.min+s/4+t,i],o["75%"]=[e.min+s/4*3+r,i]}}else if("static"===n){o.min=e.min,o.max=e.max;e.staticItems.length;for(let[t,r]of e.staticItems.entries())o[(r-o.min)/s*100+"%"]=r}return o}formatPips(t,e,r){if("number"===e)t=(Math.round(100*t)/100).toFixed(this._precision);else if("date"===e||"wmst"===e){let e=new Date(t);t="en-FR"===r?`${e.getDate()}/${e.getMonth()+1}/${e.getFullYear()}`:`${e.getMonth()+1}/${e.getDate()}/${e.getFullYear()}`,-2===this._precision&&(t+=` - ${e.getHours()}:${(e.getMinutes()+1).toString().padStart(2,"0")}:${(e.getSeconds()+1).toString().padStart(2,"0")}`,$(".slider-bar")[0].style.paddingLeft="60px")}return t}setTooltips(t,e){const r=[{to:r=>this.formatPips(r,t,e),from:Number}];return"dual"===this._rangeType&&r.push({to:r=>this.formatPips(r,t,e),from:Number}),r}set range(t){this._range=t}get range(){return this._range}set limit(t){this._limit=t}get limit(){return this._limit}set limits(t){this._limits=t}get limits(){return this._limits}set lock(t){this._slider.lock=t}get lock(){return this._slider.lock}get dual(){return this._slider.dual}set loop(t){this._slider.loop=t}get loop(){return this._slider.loop}set delay(t){this._slider.delay=t}get delay(){return this._slider.delay}set export(t){this._slider.export=t}get export(){return this._slider.export}play(t){t?(c.setPlayState(t),this._gifImages=[],this.setTakeSnapShot(),this._playInterval=setInterval(()=>this.playInstant(this.limit.max),this.delay)):this.pause()}playInstant(t){if(this.setTakeSnapShot(),this._slider.range.max!==t)this.step("up");else if(this._slider.loop){if(this._slider.range.min=this.limit.min,"dynamic"===this._stepType)this._slider.range.max=this._slider.range.min+this._step;else if("static"===this._stepType){const t="dual"===this._rangeType?this._slider.noUiSlider.get().map(Number)[0]:+this._slider.noUiSlider.get(),e=this.limit.staticItems.findIndex(e=>e===t);this._slider.range.max=this.limit.staticItems[this.limit.staticItems.length-1-e]}this._slider.noUiSlider.set([this._slider.range.min,this._slider.range.max])}else this.pause()}setTakeSnapShot(){this.export&&setTimeout(()=>{this.takeSnapShot(!1)},this.delay-100)}takeSnapShot(t){const e=document.getElementsByClassName("rv-esri-map")[0];o.toSvg(e,{bgcolor:"white",quality:.5}).then(t=>{this._gifImages.push(t)}).catch(t=>{console.error("Not able to save screen shot!",t)})}exportToGIF(){const t=document.getElementsByClassName("rv-esri-map")[0],e=t.offsetHeight/t.offsetWidth,r=t.offsetWidth<=1500?t.offsetWidth:1500,n=r*e;try{setTimeout(()=>{s.createGIF({images:this._gifImages,frameDuration:10,numFrames:1,gifWidth:r,gifHeight:n},t=>{this._gifImages=[],t.error||a.saveAs(this.dataURItoBlob(t.image),"fgpv-slider-export.gif")})},500)}catch(t){console.error("Not able to convert screen shot to GIF!",t)}}dataURItoBlob(t){const e=atob(t.split(",")[1]),r=t.split(",")[0].split(":")[1].split(";")[0],n=new ArrayBuffer(e.length),i=new Uint8Array(n);for(let t=0;t<e.length;t++)i[t]=e.charCodeAt(t);return new Blob([n],{type:r})}pause(){this.export&&this.takeSnapShot(!0),clearInterval(this._playInterval),c.setPlayState(!1)}refresh(){this._slider.noUiSlider.set([this.range.min,this.range.max]),this.setDefinitionQuery(this.range),this.pause()}step(t){let e;if("dual"===this._rangeType){const r=this._slider.noUiSlider.get().map(Number);if("dynamic"===this._stepType){const n="up"===t?this._step:-this._step;e={min:this.lock?r[0]:this.setLeftAnchorDynamic(r,t,n),max:this.setRightAnchorDynamic(r,t,n)}}else if("static"===this._stepType&&"dual"==this._rangeType){const r="up"===t?this._slider.noUiSlider.steps()[0][1]:-this._slider.noUiSlider.steps()[0][0],n="up"===t?this._slider.noUiSlider.steps()[1][1]:-this._slider.noUiSlider.steps()[1][0];e={min:this.lock?this._slider.range.min:null!==n?this._slider.range.min+r:this._slider.range.min,max:-0!==r?this._slider.range.max+n:this._slider.range.max}}this._slider.noUiSlider.set([e.min,e.max])}else if("single"===this._rangeType){const r=+this._slider.noUiSlider.get(),n=this.limit.staticItems.findIndex(t=>t===r);let i;i=(0===n||-1===n&&r===this.limit.min)&&"down"===t?this.limit.min:(n===this.limit.staticItems.length-1||-1===n&&r===this.limit.max)&&"up"===t?this.limit.max:-1===n&&r===this.limit.max&&"down"===t?this.limit.staticItems[this.limit.staticItems.length-1]:"up"===t?this.limit.staticItems[n+1]:this.limit.staticItems[n-1],e={min:i,max:i},this._slider.noUiSlider.set(e.min)}this.setDefinitionQuery(e),this._slider.range=e}setLeftAnchorDynamic(t,e,r){let n=0;const i=this.limit;return n="down"===e?Math.floor(t[0]+r)<i.min?i.min:t[0]+r:Math.ceil(t[0]+r)>i.max-r?i.max-r:t[0]+r,parseFloat(n.toFixed(this._precision))}setRightAnchorDynamic(t,e,r){let n=0;const i=this.limit;return n="up"===e?Math.ceil(t[1]+r)>i.max?i.max:t[1]+r:Math.floor(t[1]+r)<i.min-r?i.min-r:t[1]+r,parseFloat(n.toFixed(this._precision))}setLeftAnchorStatic(t,e,r){let n=0;const i=this.limit;return n="up"===e?Math.ceil(t[1]+r)>i.max?i.max:t[1]+r:Math.floor(t[1]+r)<i.min-r?i.min-r:t[1]+r,parseFloat(n.toFixed(this._precision))}setRightAnchorStatic(t,e,r){let n=0;const i=this.limit;return n="up"===e?Math.ceil(t[1]+r)>i.max?i.max:t[1]+r:Math.floor(t[1]+r)<i.min-r?i.min-r:t[1]+r,parseFloat(n.toFixed(this._precision))}setDefinitionQuery(t){for(let e of this._config.layers){const r=this._mapApi.layers.getLayersById(e.id)[0],n=r.type;if("esriDynamic"===n||"esriFeature"===n){if("number"===this._config.type)r.setFilterSql("rangeSliderNumberFilter",`${e.field} >= ${t.min} AND ${e.field} <= ${t.max}`);else if("date"===this._config.type){const n=this.getDate(t);r.setFilterSql("rangeSliderDateFilter",`${e.field} >= DATE '${n[0]}' AND ${e.field} <= DATE '${n[1]}'`)}}else if("esriImage"===n){const e=this.getDate(t),r=new this._myBundle.timeExtent;r.startTime=new Date(e[0]),r.endTime=new Date(e[1]),this._mapApi.esriMap.setTimeExtent(r)}else if("ogcWms"===n)if("number"===this._config.type)r.esriLayer.setCustomParameters({},{layerDefs:`{'${r._viewerLayer._defaultFC}': '${e.field} >= ${t.min} AND ${e.field} <= ${t.max}'}`});else if("date"===this._config.type){const n=this.getDate(t);r.esriLayer.setCustomParameters({},{layerDefs:`{'${r._viewerLayer._defaultFC}': "${e.field} >= DATE '${n[0]}' AND ${e.field} <= DATE '${n[1]}'"}`})}else if("wmst"===this._config.type){const e=this.getDate(t,"wmst"),n="single"===this._rangeType?""+e[0]:`${e[0]}/${e[1]}`;r.esriLayer.setCustomParameters({},{TIME:n})}}}getDate(t,e="esri"){const r=new Date(t.min),n=new Date(t.max);let i="",o="";return"esri"===e?(i=this.getEsriDate(r),o=this.getEsriDate(n)):"wmst"===e&&(i=this.getDateWMTS(r),o=this.getDateWMTS(n)),[i,o]}getEsriDate(t){return`${t.getMonth()+1}/${t.getDate()}/${t.getFullYear()} ${t.getUTCHours().toString().padStart(2,"0")}:${t.getUTCMinutes().toString().padStart(2,"0")}:${t.getSeconds().toString().padStart(2,"0")}`}getDateWMTS(t){return`${t.getFullYear()}-${(t.getMonth()+1).toString().padStart(2,"0")}-${t.getDate().toString().padStart(2,"0")}T${t.getHours().toString().padStart(2,"0")}:${t.getMinutes().toString().padStart(2,"0")}:${t.getSeconds().toString().padStart(2,"0")}Z`}}e.SliderBar=c,c._playState=new i.BehaviorSubject(!1)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isFunction=function(t){return"function"==typeof t}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),i=r(6);e.empty={closed:!0,next:function(t){},error:function(t){if(n.config.useDeprecatedSynchronousErrorHandling)throw t;i.hostReportError(t)},complete:function(){}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hostReportError=function(t){setTimeout((function(){throw t}))}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.rxSubscriber="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),e.$$rxSubscriber=e.rxSubscriber},function(t,e,r){t.exports=r(9)},function(t,e,r){"use strict";r.r(e);r(10),r(34)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(2),i=r(11);class o{init(t){this.mapApi=t,this.panel=this.mapApi.panels.create("rangeSlider"),this.panel.element.css(o.prototype.panelOptions),this.panel.body=n.SLIDER_TEMPLATE;const e=this._RV.getConfig("plugins").rangeSlider;let r={};void 0!==e?(r=Object.assign(Object.assign({},o.prototype.layerOptions),e.params),r.controls=e.controls,r.layers=e.layers,r.open=e.open,r.loop=e.loop,r.autorun=e.autorun):r=o.prototype.layerOptions,r.language=this._RV.getCurrentLang(),r.translations=o.prototype.translations[this._RV.getCurrentLang()],this._button=this.mapApi.mapI.addPluginButton(o.prototype.translations[this._RV.getCurrentLang()].title,this.onMenuItemClick()),r.open&&(this._button.isActive=!0),window.RAMP.GAPI.esriLoadApiClasses([["esri/TimeExtent","timeExtent"]]).then(e=>{new i.SliderManager(t,this.panel,r,e)})}onMenuItemClick(){return()=>{this._button.isActive=!this._button.isActive,this._button.isActive?this.panel.open():this.panel.close()}}}e.default=o,o.prototype.panelOptions={top:"calc(100% - 235px)",height:"185px","margin-right":"60px","margin-left":"420px"},o.prototype.layerOptions={open:!0,autorun:!1,loop:!1,precision:"0",delay:3e3,lock:!1,export:!1,rangeType:"dual",stepType:"dynamic",interval:0,intervalUnit:"year",range:{min:null,max:null},limit:{min:null,max:null},limits:[],type:"date",layers:[],controls:["lock","loop","delay","refresh"]},o.prototype.translations={"en-CA":{title:"Range Slider",bar:{show:"Show slider information",hide:"Hide slider information",lock:"Lock left anchor",unlock:"Unlock left anchor",loop:"Animate in loop",unloop:"Do not animate in loop",previous:"Previous",play:"Play",pause:"Pause",foward:"Next",delay:"Delay",refresh:"Refresh",gif:"GIF",tooltip:{gif:'If enabled, click "Play" to start then "Pause" to finish then disable the control to export GIF'},esriImageNote:"NOTE: Only the last handle will affect the layer visibility. The first handle is use to set the interval for controls."}},"fr-CA":{title:"Curseur de plage",bar:{show:"Afficher l'information du curseur de plage",hide:"Cacher l'information du curseur de plage",lock:"Verrouiller la molette gauche",unlock:"Déverrouiller la molette gauche",loop:"Animer en boucle",unloop:"Ne pas animer en boucle",previous:"Précédent",play:"Jouer",pause:"Pause",foward:"Prochain",delay:"Délai",refresh:"Rafraîchir",gif:"GIF",tooltip:{gif:'Si activé, cliquez sur "Jouer" pour démarrer, puis sur "Pause" pour terminer et désactiver le contrôle pour exporter le GIF'},esriImageNote:"REMARQUE: seule la dernière molette affectera la visibilité de la couche. La première molette est utilisée pour définir l'intervalle pour les contrôles."}}},window.rangeSlider=o},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(2),i=r(12),o=r(3),s=r(21);e.SliderManager=class{constructor(t,e,r,n){this._attRead=0,this._mapApi=t,this._panel=e,this._config=r,this._myBundle=n;let i=this._config.layers.map(t=>t.id);const o=[];let s=0;this._mapApi.layersObj.layerAdded.subscribe(t=>{if(-1!==i.indexOf(t.id)){s+=1;const e=this._config.layers.find(e=>e.id===t.id);if(o.push({layer:t,layerInfo:e}),s===this._config.layers.length){this.initializeSlider(o);const t=o.map(t=>`${t.layer.name} (${t.layerInfo.field})`).join(", ");document.getElementsByClassName("slider-desc-layers")[0].textContent=t;const e=[];o.findIndex(t=>"esriImage"===t.layer._layerType)>=0&&e.push(this._config.translations.bar.esriImageNote),""!==this._config.description&&e.unshift(this._config.description),document.getElementsByClassName("slider-desc-info")[0].textContent=""+e.join(", ")}}else 0===i.length&&new Promise(e=>{$.ajax({url:"esriFeature"===t.type?t.esriLayer.url+"?f=json":`${t.esriLayer.url}/${t._layerIndex}?f=json`,cache:!1,dataType:"jsonp",success:t=>e(t)})}).then(e=>{if(void 0!==e.timeInfo){const r={id:t.id,field:e.timeInfo.startTimeField};o.push({layer:t,layerInfo:r}),this._config.layers=[r],this.initializeSlider(o),document.getElementsByClassName("slider-desc-layers")[0].textContent=`${t.name} (${r.field})`,i=["done"]}})})}initializeSlider(t){if(this._slider=new o.SliderBar(this._mapApi,this._config,this._myBundle),null!==this._config.limit.min)this._slider.limit=this._config.limit,this._slider.range=null!==this._config.range.min?this._config.range:this._config.limit,this.setSliderBar();else for(let e of t){const r=e.layer.type;if("esriDynamic"===r||"esriFeature"===r){0===e.layer.getAttributes().length&&this.startAttributesEvent(e.layerInfo,t.length)}}}startAttributesEvent(t,e){this._mapApi.layers.attributesAdded.pipe(s.take(1)).subscribe(r=>{this.setAttributes(r,t,e)})}setAttributes(t,e,r){if(t.attributes.length>0&&t.layer.id===e.id){this._attRead+=1;const n=[];for(let r of t.attributes)n.push(r[e.field]);const i={min:Math.min.apply(null,n),max:Math.max.apply(null,n)};(null===this._slider.limit.min||this._slider.limit.min>i.min)&&(this._slider.limit.min=i.min),(null===this._slider.limit.max||this._slider.limit.max<i.max)&&(this._slider.limit.max=i.max),this._slider.range=null!==this._config.range.min?this._config.range:this._slider.limit,r===this._attRead&&this.setSliderBar()}else this.startAttributesEvent(e,r)}setSliderBar(){this._slider.startSlider(this._config.type,this._config.language),this.setBarControls(this._config.controls),this._config.open&&this._panel.open(),this._config.autorun&&this._slider.play(!0)}setBarControls(t){const e=[n.PLAY_BAR_TEMPLATE];for(let r of t)"lock"===r?e.unshift(n.LOCK_BAR_TEMPLATE):"loop"===r?e.push(n.LOOP_BAR_TEMPLATE):"refresh"===r?e.push(n.REFRESH_BAR_TEMPLATE):"delay"===r?e.push(n.DELAY_BAR_TEMPLATE):"export"===r&&e.push(n.EXPORT_BAR_TEMPLATE);e.unshift(n.DESC_BAR_TEMPLATE),this._panel.controls=new i.SliderControls(this._mapApi,this._panel,e,this._slider)}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});const n=r(3),{detect:i}=r(19);e.SliderControls=class{constructor(t,e,r,o){this.mapApi=t,t.agControllerRegister("DescSliderCtrl",(function(){this.isShow=!0,this.show=()=>{this.isShow=!this.isShow;const t=document.getElementById("rangeSlider");t.style.height=this.isShow?"185px":"125px",t.style.top=this.isShow?"calc(100% - 235px)":"calc(100% - 175px)"}})),t.agControllerRegister("LockSliderCtrl",(function(){this.isLocked=o.lock,this.isDual=o.dual,this.lock=()=>{o.lock=!o.lock,this.isLocked=o.lock}})),t.agControllerRegister("LoopSliderCtrl",(function(){this.isLooped=o.loop,this.loop=()=>{o.loop=!o.loop,this.isLooped=o.loop;t.fgpMapObj.esriMap.root.parentElement.parentElement.getElementsByClassName("slider-loop-control")[0].getElementsByTagName("md-icon")[0].classList.toggle("slider-loop-control-active")}})),t.agControllerRegister("StepSliderCtrl",(function(){this.step=t=>{o.step(t)}})),t.agControllerRegister("PlaySliderCtrl",(function(){n.SliderBar.getPlayState().subscribe(t=>{this.isPlaying=t}),this.play=()=>{o.play(!this.isPlaying)}})),t.agControllerRegister("RefreshSliderCtrl",(function(){this.refresh=()=>{o.refresh()}})),t.agControllerRegister("DelaySliderCtrl",(function(){this.selectedDelay=o.delay,this.selectDelay=()=>{o.delay=this.selectedDelay}})),t.agControllerRegister("ExportSliderCtrl",(function(){this.export=o.export,this.selectExport=()=>{o.export=this.export,this.export||o.exportToGIF()}}));const s=e.body.find(".slider-controls");for(let t of r)if(t.includes("slider-delay-control"))s.find(".slider-play-control").append(this.compileTemplate(t));else if(t.includes("slider-loop-control"))s.find(".slider-play-control").prepend(this.compileTemplate(t));else if(t.includes("slider-export-control")){const e=i();"chrome"!==e.name&&"firefox"!==e.name||s.append(this.compileTemplate(t))}else s.append(this.compileTemplate(t))}compileTemplate(t){let e=$(t);return this.mapApi.$compile(e),e}}},function(t,e,r){var n,i,o;/*! nouislider - 13.1.5 - 4/24/2019 */i=[],void 0===(o="function"==typeof(n=function(){"use strict";var t="13.1.5";function e(t){t.parentElement.removeChild(t)}function r(t){return null!=t}function n(t){t.preventDefault()}function i(t){return"number"==typeof t&&!isNaN(t)&&isFinite(t)}function o(t,e,r){r>0&&(u(t,e),setTimeout((function(){l(t,e)}),r))}function s(t){return Math.max(Math.min(t,100),0)}function a(t){return Array.isArray(t)?t:[t]}function c(t){var e=(t=String(t)).split(".");return e.length>1?e[1].length:0}function u(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function l(t,e){t.classList?t.classList.remove(e):t.className=t.className.replace(new RegExp("(^|\\b)"+e.split(" ").join("|")+"(\\b|$)","gi")," ")}function h(t){var e=void 0!==window.pageXOffset,r="CSS1Compat"===(t.compatMode||"");return{x:e?window.pageXOffset:r?t.documentElement.scrollLeft:t.body.scrollLeft,y:e?window.pageYOffset:r?t.documentElement.scrollTop:t.body.scrollTop}}function d(t,e){return 100/(e-t)}function f(t,e){return 100*e/(t[1]-t[0])}function p(t,e){for(var r=1;t>=e[r];)r+=1;return r}function m(t,e,r){if(r>=t.slice(-1)[0])return 100;var n=p(r,t),i=t[n-1],o=t[n],s=e[n-1],a=e[n];return s+function(t,e){return f(t,t[0]<0?e+Math.abs(t[0]):e-t[0])}([i,o],r)/d(s,a)}function g(t,e,r,n){if(100===n)return n;var i=p(n,t),o=t[i-1],s=t[i];return r?n-o>(s-o)/2?s:o:e[i-1]?t[i-1]+function(t,e){return Math.round(t/e)*e}(n-t[i-1],e[i-1]):n}function v(t,e,r){var n;if("number"==typeof e&&(e=[e]),!Array.isArray(e))throw new Error("noUiSlider (13.1.5): 'range' contains invalid value.");if(!i(n="min"===t?0:"max"===t?100:parseFloat(t))||!i(e[0]))throw new Error("noUiSlider (13.1.5): 'range' value isn't numeric.");r.xPct.push(n),r.xVal.push(e[0]),n?r.xSteps.push(!isNaN(e[1])&&e[1]):isNaN(e[1])||(r.xSteps[0]=e[1]),r.xHighestCompleteStep.push(0)}function b(t,e,r){if(e)if(r.xVal[t]!==r.xVal[t+1]){r.xSteps[t]=f([r.xVal[t],r.xVal[t+1]],e)/d(r.xPct[t],r.xPct[t+1]);var n=(r.xVal[t+1]-r.xVal[t])/r.xNumSteps[t],i=Math.ceil(Number(n.toFixed(3))-1),o=r.xVal[t]+r.xNumSteps[t]*i;r.xHighestCompleteStep[t]=o}else r.xSteps[t]=r.xHighestCompleteStep[t]=r.xVal[t]}function y(t,e,r){var n;this.xPct=[],this.xVal=[],this.xSteps=[r||!1],this.xNumSteps=[!1],this.xHighestCompleteStep=[],this.snap=e;var i=[];for(n in t)t.hasOwnProperty(n)&&i.push([t[n],n]);for(i.length&&"object"==typeof i[0][0]?i.sort((function(t,e){return t[0][0]-e[0][0]})):i.sort((function(t,e){return t[0]-e[0]})),n=0;n<i.length;n++)v(i[n][1],i[n][0],this);for(this.xNumSteps=this.xSteps.slice(0),n=0;n<this.xNumSteps.length;n++)b(n,this.xNumSteps[n],this)}y.prototype.getMargin=function(t){var e=this.xNumSteps[0];if(e&&t/e%1!=0)throw new Error("noUiSlider (13.1.5): 'limit', 'margin' and 'padding' must be divisible by step.");return 2===this.xPct.length&&f(this.xVal,t)},y.prototype.toStepping=function(t){return t=m(this.xVal,this.xPct,t)},y.prototype.fromStepping=function(t){return function(t,e,r){if(r>=100)return t.slice(-1)[0];var n=p(r,e),i=t[n-1],o=t[n],s=e[n-1];return function(t,e){return e*(t[1]-t[0])/100+t[0]}([i,o],(r-s)*d(s,e[n]))}(this.xVal,this.xPct,t)},y.prototype.getStep=function(t){return t=g(this.xPct,this.xSteps,this.snap,t)},y.prototype.getDefaultStep=function(t,e,r){var n=p(t,this.xPct);return(100===t||e&&t===this.xPct[n-1])&&(n=Math.max(n-1,1)),(this.xVal[n]-this.xVal[n-1])/r},y.prototype.getNearbySteps=function(t){var e=p(t,this.xPct);return{stepBefore:{startValue:this.xVal[e-2],step:this.xNumSteps[e-2],highestStep:this.xHighestCompleteStep[e-2]},thisStep:{startValue:this.xVal[e-1],step:this.xNumSteps[e-1],highestStep:this.xHighestCompleteStep[e-1]},stepAfter:{startValue:this.xVal[e],step:this.xNumSteps[e],highestStep:this.xHighestCompleteStep[e]}}},y.prototype.countStepDecimals=function(){var t=this.xNumSteps.map(c);return Math.max.apply(null,t)},y.prototype.convert=function(t){return this.getStep(this.toStepping(t))};var w={to:function(t){return void 0!==t&&t.toFixed(2)},from:Number};function S(t){if(function(t){return"object"==typeof t&&"function"==typeof t.to&&"function"==typeof t.from}(t))return!0;throw new Error("noUiSlider (13.1.5): 'format' requires 'to' and 'from' methods.")}function _(t,e){if(!i(e))throw new Error("noUiSlider (13.1.5): 'step' is not numeric.");t.singleStep=e}function x(t,e){if("object"!=typeof e||Array.isArray(e))throw new Error("noUiSlider (13.1.5): 'range' is not an object.");if(void 0===e.min||void 0===e.max)throw new Error("noUiSlider (13.1.5): Missing 'min' or 'max' in 'range'.");if(e.min===e.max)throw new Error("noUiSlider (13.1.5): 'range' 'min' and 'max' cannot be equal.");t.spectrum=new y(e,t.snap,t.singleStep)}function E(t,e){if(e=a(e),!Array.isArray(e)||!e.length)throw new Error("noUiSlider (13.1.5): 'start' option is incorrect.");t.handles=e.length,t.start=e}function C(t,e){if(t.snap=e,"boolean"!=typeof e)throw new Error("noUiSlider (13.1.5): 'snap' option must be a boolean.")}function T(t,e){if(t.animate=e,"boolean"!=typeof e)throw new Error("noUiSlider (13.1.5): 'animate' option must be a boolean.")}function A(t,e){if(t.animationDuration=e,"number"!=typeof e)throw new Error("noUiSlider (13.1.5): 'animationDuration' option must be a number.")}function O(t,e){var r,n=[!1];if("lower"===e?e=[!0,!1]:"upper"===e&&(e=[!1,!0]),!0===e||!1===e){for(r=1;r<t.handles;r++)n.push(e);n.push(!1)}else{if(!Array.isArray(e)||!e.length||e.length!==t.handles+1)throw new Error("noUiSlider (13.1.5): 'connect' option doesn't match handle count.");n=e}t.connect=n}function k(t,e){switch(e){case"horizontal":t.ort=0;break;case"vertical":t.ort=1;break;default:throw new Error("noUiSlider (13.1.5): 'orientation' option is invalid.")}}function P(t,e){if(!i(e))throw new Error("noUiSlider (13.1.5): 'margin' option must be numeric.");if(0!==e&&(t.margin=t.spectrum.getMargin(e),!t.margin))throw new Error("noUiSlider (13.1.5): 'margin' option is only supported on linear sliders.")}function M(t,e){if(!i(e))throw new Error("noUiSlider (13.1.5): 'limit' option must be numeric.");if(t.limit=t.spectrum.getMargin(e),!t.limit||t.handles<2)throw new Error("noUiSlider (13.1.5): 'limit' option is only supported on linear sliders with 2 or more handles.")}function I(t,e){if(!i(e)&&!Array.isArray(e))throw new Error("noUiSlider (13.1.5): 'padding' option must be numeric or array of exactly 2 numbers.");if(Array.isArray(e)&&2!==e.length&&!i(e[0])&&!i(e[1]))throw new Error("noUiSlider (13.1.5): 'padding' option must be numeric or array of exactly 2 numbers.");if(0!==e){if(Array.isArray(e)||(e=[e,e]),t.padding=[t.spectrum.getMargin(e[0]),t.spectrum.getMargin(e[1])],!1===t.padding[0]||!1===t.padding[1])throw new Error("noUiSlider (13.1.5): 'padding' option is only supported on linear sliders.");if(t.padding[0]<0||t.padding[1]<0)throw new Error("noUiSlider (13.1.5): 'padding' option must be a positive number(s).");if(t.padding[0]+t.padding[1]>100)throw new Error("noUiSlider (13.1.5): 'padding' option must not exceed 100% of the range.")}}function N(t,e){switch(e){case"ltr":t.dir=0;break;case"rtl":t.dir=1;break;default:throw new Error("noUiSlider (13.1.5): 'direction' option was not recognized.")}}function j(t,e){if("string"!=typeof e)throw new Error("noUiSlider (13.1.5): 'behaviour' must be a string containing options.");var r=e.indexOf("tap")>=0,n=e.indexOf("drag")>=0,i=e.indexOf("fixed")>=0,o=e.indexOf("snap")>=0,s=e.indexOf("hover")>=0,a=e.indexOf("unconstrained")>=0;if(i){if(2!==t.handles)throw new Error("noUiSlider (13.1.5): 'fixed' behaviour must be used with 2 handles");P(t,t.start[1]-t.start[0])}if(a&&(t.margin||t.limit))throw new Error("noUiSlider (13.1.5): 'unconstrained' behaviour cannot be used with margin or limit");t.events={tap:r||o,drag:n,fixed:i,snap:o,hover:s,unconstrained:a}}function R(t,e){if(!1!==e)if(!0===e){t.tooltips=[];for(var r=0;r<t.handles;r++)t.tooltips.push(!0)}else{if(t.tooltips=a(e),t.tooltips.length!==t.handles)throw new Error("noUiSlider (13.1.5): must pass a formatter for all handles.");t.tooltips.forEach((function(t){if("boolean"!=typeof t&&("object"!=typeof t||"function"!=typeof t.to))throw new Error("noUiSlider (13.1.5): 'tooltips' must be passed a formatter or 'false'.")}))}}function L(t,e){t.ariaFormat=e,S(e)}function F(t,e){t.format=e,S(e)}function U(t,e){if(t.keyboardSupport=e,"boolean"!=typeof e)throw new Error("noUiSlider (13.1.5): 'keyboardSupport' option must be a boolean.")}function V(t,e){t.documentElement=e}function D(t,e){if("string"!=typeof e&&!1!==e)throw new Error("noUiSlider (13.1.5): 'cssPrefix' must be a string or `false`.");t.cssPrefix=e}function B(t,e){if("object"!=typeof e)throw new Error("noUiSlider (13.1.5): 'cssClasses' must be an object.");if("string"==typeof t.cssPrefix)for(var r in t.cssClasses={},e)e.hasOwnProperty(r)&&(t.cssClasses[r]=t.cssPrefix+e[r]);else t.cssClasses=e}function W(t){var e={margin:0,limit:0,padding:0,animate:!0,animationDuration:300,ariaFormat:w,format:w},n={step:{r:!1,t:_},start:{r:!0,t:E},connect:{r:!0,t:O},direction:{r:!0,t:N},snap:{r:!1,t:C},animate:{r:!1,t:T},animationDuration:{r:!1,t:A},range:{r:!0,t:x},orientation:{r:!1,t:k},margin:{r:!1,t:P},limit:{r:!1,t:M},padding:{r:!1,t:I},behaviour:{r:!0,t:j},ariaFormat:{r:!1,t:L},format:{r:!1,t:F},tooltips:{r:!1,t:R},keyboardSupport:{r:!0,t:U},documentElement:{r:!1,t:V},cssPrefix:{r:!0,t:D},cssClasses:{r:!0,t:B}},i={connect:!1,direction:"ltr",behaviour:"tap",orientation:"horizontal",keyboardSupport:!0,cssPrefix:"noUi-",cssClasses:{target:"target",base:"base",origin:"origin",handle:"handle",handleLower:"handle-lower",handleUpper:"handle-upper",touchArea:"touch-area",horizontal:"horizontal",vertical:"vertical",background:"background",connect:"connect",connects:"connects",ltr:"ltr",rtl:"rtl",draggable:"draggable",drag:"state-drag",tap:"state-tap",active:"active",tooltip:"tooltip",pips:"pips",pipsHorizontal:"pips-horizontal",pipsVertical:"pips-vertical",marker:"marker",markerHorizontal:"marker-horizontal",markerVertical:"marker-vertical",markerNormal:"marker-normal",markerLarge:"marker-large",markerSub:"marker-sub",value:"value",valueHorizontal:"value-horizontal",valueVertical:"value-vertical",valueNormal:"value-normal",valueLarge:"value-large",valueSub:"value-sub"}};t.format&&!t.ariaFormat&&(t.ariaFormat=t.format),Object.keys(n).forEach((function(o){if(!r(t[o])&&void 0===i[o]){if(n[o].r)throw new Error("noUiSlider (13.1.5): '"+o+"' is required.");return!0}n[o].t(e,r(t[o])?t[o]:i[o])})),e.pips=t.pips;var o=document.createElement("div"),s=void 0!==o.style.msTransform,a=void 0!==o.style.transform;return e.transformRule=a?"transform":s?"msTransform":"webkitTransform",e.style=[["left","top"],["right","bottom"]][e.dir][e.ort],e}function H(t,r,i){var c,d,f,p,m,g,v,b,y=window.navigator.pointerEnabled?{start:"pointerdown",move:"pointermove",end:"pointerup"}:window.navigator.msPointerEnabled?{start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:{start:"mousedown touchstart",move:"mousemove touchmove",end:"mouseup touchend"},w=window.CSS&&CSS.supports&&CSS.supports("touch-action","none")&&function(){var t=!1;try{var e=Object.defineProperty({},"passive",{get:function(){t=!0}});window.addEventListener("test",null,e)}catch(t){}return t}(),S=t,_=r.spectrum,x=[],E=[],C=[],T=0,A={},O=t.ownerDocument,k=r.documentElement||O.documentElement,P=O.body,M="rtl"===O.dir||1===r.ort?0:100;function I(t,e){var r=O.createElement("div");return e&&u(r,e),t.appendChild(r),r}function N(t,e){var n=I(t,r.cssClasses.origin),i=I(n,r.cssClasses.handle);return I(i,r.cssClasses.touchArea),i.setAttribute("data-handle",e),r.keyboardSupport&&(i.setAttribute("tabindex","0"),i.addEventListener("keydown",(function(t){return function(t,e){if(L()||F(e))return!1;var n=["Left","Right"],i=["Down","Up"];r.dir&&!r.ort?n.reverse():r.ort&&!r.dir&&i.reverse();var o=t.key.replace("Arrow",""),s=o===i[0]||o===n[0],a=o===i[1]||o===n[1];if(!s&&!a)return!0;t.preventDefault();var c=s?0:1,u=ft(e)[c];return null===u||(!1===u&&(u=_.getDefaultStep(E[e],s,10)),u=Math.max(u,1e-7),u*=s?-1:1,ht(e,x[e]+u,!0)),!1}(t,e)}))),i.setAttribute("role","slider"),i.setAttribute("aria-orientation",r.ort?"vertical":"horizontal"),0===e?u(i,r.cssClasses.handleLower):e===r.handles-1&&u(i,r.cssClasses.handleUpper),n}function j(t,e){return!!e&&I(t,r.cssClasses.connect)}function R(t,e){return!!r.tooltips[e]&&I(t.firstChild,r.cssClasses.tooltip)}function L(){return S.hasAttribute("disabled")}function F(t){return d[t].hasAttribute("disabled")}function U(){m&&(tt("update.tooltips"),m.forEach((function(t){t&&e(t)})),m=null)}function V(){U(),m=d.map(R),Z("update.tooltips",(function(t,e,n){if(m[e]){var i=t[e];!0!==r.tooltips[e]&&(i=r.tooltips[e].to(n[e])),m[e].innerHTML=i}}))}function D(t,e,n){var i=O.createElement("div"),o=[];o[0]=r.cssClasses.valueNormal,o[1]=r.cssClasses.valueLarge,o[2]=r.cssClasses.valueSub;var s=[];s[0]=r.cssClasses.markerNormal,s[1]=r.cssClasses.markerLarge,s[2]=r.cssClasses.markerSub;var a=[r.cssClasses.valueHorizontal,r.cssClasses.valueVertical],c=[r.cssClasses.markerHorizontal,r.cssClasses.markerVertical];function l(t,e){var n=e===r.cssClasses.value,i=n?o:s;return e+" "+(n?a:c)[r.ort]+" "+i[t]}return u(i,r.cssClasses.pips),u(i,0===r.ort?r.cssClasses.pipsHorizontal:r.cssClasses.pipsVertical),Object.keys(t).forEach((function(o){!function(t,o,s){if(-1!==(s=e?e(o,s):s)){var a=I(i,!1);a.className=l(s,r.cssClasses.marker),a.style[r.style]=t+"%",s>0&&((a=I(i,!1)).className=l(s,r.cssClasses.value),a.setAttribute("data-value",o),a.style[r.style]=t+"%",a.innerHTML=n.to(o))}}(o,t[o][0],t[o][1])})),i}function B(){p&&(e(p),p=null)}function H(t){B();var e=t.mode,r=t.density||1,n=t.filter||!1,i=function(t,e,r){if("range"===t||"steps"===t)return _.xVal;if("count"===t){if(e<2)throw new Error("noUiSlider (13.1.5): 'values' (>= 2) required for mode 'count'.");var n=e-1,i=100/n;for(e=[];n--;)e[n]=n*i;e.push(100),t="positions"}return"positions"===t?e.map((function(t){return _.fromStepping(r?_.getStep(t):t)})):"values"===t?r?e.map((function(t){return _.fromStepping(_.getStep(_.toStepping(t)))})):e:void 0}(e,t.values||!1,t.stepped||!1),o=function(t,e,r){var n,i={},o=_.xVal[0],s=_.xVal[_.xVal.length-1],a=!1,c=!1,u=0;return n=r.slice().sort((function(t,e){return t-e})),(r=n.filter((function(t){return!this[t]&&(this[t]=!0)}),{}))[0]!==o&&(r.unshift(o),a=!0),r[r.length-1]!==s&&(r.push(s),c=!0),r.forEach((function(n,o){var s,l,h,d,f,p,m,g,v,b,y=n,w=r[o+1],S="steps"===e;if(S&&(s=_.xNumSteps[o]),s||(s=w-y),!1!==y&&void 0!==w)for(s=Math.max(s,1e-7),l=y;l<=w;l=(l+s).toFixed(7)/1){for(g=(f=(d=_.toStepping(l))-u)/t,b=f/(v=Math.round(g)),h=1;h<=v;h+=1)i[(p=u+h*b).toFixed(5)]=[_.fromStepping(p),0];m=r.indexOf(l)>-1?1:S?2:0,!o&&a&&(m=0),l===w&&c||(i[d.toFixed(5)]=[l,m]),u=d}})),i}(r,e,i),s=t.format||{to:Math.round};return p=S.appendChild(D(o,n,s))}function z(){var t=c.getBoundingClientRect(),e="offset"+["Width","Height"][r.ort];return 0===r.ort?t.width||c[e]:t.height||c[e]}function $(t,e,n,i){var o=function(o){return!!(o=function(t,e,r){var n,i,o=0===t.type.indexOf("touch"),s=0===t.type.indexOf("mouse"),a=0===t.type.indexOf("pointer");if(0===t.type.indexOf("MSPointer")&&(a=!0),o){var c=function(t){return t.target===r||r.contains(t.target)};if("touchstart"===t.type){var u=Array.prototype.filter.call(t.touches,c);if(u.length>1)return!1;n=u[0].pageX,i=u[0].pageY}else{var l=Array.prototype.find.call(t.changedTouches,c);if(!l)return!1;n=l.pageX,i=l.pageY}}return e=e||h(O),(s||a)&&(n=t.clientX+e.x,i=t.clientY+e.y),t.pageOffset=e,t.points=[n,i],t.cursor=s||a,t}(o,i.pageOffset,i.target||e))&&!(L()&&!i.doNotReject)&&(s=S,a=r.cssClasses.tap,!((s.classList?s.classList.contains(a):new RegExp("\\b"+a+"\\b").test(s.className))&&!i.doNotReject)&&!(t===y.start&&void 0!==o.buttons&&o.buttons>1)&&(!i.hover||!o.buttons)&&(w||o.preventDefault(),o.calcPoint=o.points[r.ort],void n(o,i)));var s,a},s=[];return t.split(" ").forEach((function(t){e.addEventListener(t,o,!!w&&{passive:!0}),s.push([t,o])})),s}function Y(t){var e,n,i,o,a,u,l=100*(t-(e=c,n=r.ort,i=e.getBoundingClientRect(),o=e.ownerDocument,a=o.documentElement,u=h(o),/webkit.*Chrome.*Mobile/i.test(navigator.userAgent)&&(u.x=0),n?i.top+u.y-a.clientTop:i.left+u.x-a.clientLeft))/z();return l=s(l),r.dir?100-l:l}function q(t,e){"mouseout"===t.type&&"HTML"===t.target.nodeName&&null===t.relatedTarget&&X(t,e)}function G(t,e){if(-1===navigator.appVersion.indexOf("MSIE 9")&&0===t.buttons&&0!==e.buttonsProperty)return X(t,e);var n=(r.dir?-1:1)*(t.calcPoint-e.startCalcPoint);it(n>0,100*n/e.baseSize,e.locations,e.handleNumbers)}function X(t,e){e.handle&&(l(e.handle,r.cssClasses.active),T-=1),e.listeners.forEach((function(t){k.removeEventListener(t[0],t[1])})),0===T&&(l(S,r.cssClasses.drag),st(),t.cursor&&(P.style.cursor="",P.removeEventListener("selectstart",n))),e.handleNumbers.forEach((function(t){et("change",t),et("set",t),et("end",t)}))}function Q(t,e){if(e.handleNumbers.some(F))return!1;var i;1===e.handleNumbers.length&&(i=d[e.handleNumbers[0]].children[0],T+=1,u(i,r.cssClasses.active)),t.stopPropagation();var o=[],s=$(y.move,k,G,{target:t.target,handle:i,listeners:o,startCalcPoint:t.calcPoint,baseSize:z(),pageOffset:t.pageOffset,handleNumbers:e.handleNumbers,buttonsProperty:t.buttons,locations:E.slice()}),a=$(y.end,k,X,{target:t.target,handle:i,listeners:o,doNotReject:!0,handleNumbers:e.handleNumbers}),c=$("mouseout",k,q,{target:t.target,handle:i,listeners:o,doNotReject:!0,handleNumbers:e.handleNumbers});o.push.apply(o,s.concat(a,c)),t.cursor&&(P.style.cursor=getComputedStyle(t.target).cursor,d.length>1&&u(S,r.cssClasses.drag),P.addEventListener("selectstart",n,!1)),e.handleNumbers.forEach((function(t){et("start",t)}))}function K(t){t.stopPropagation();var e=Y(t.calcPoint),n=function(t){var e=100,r=!1;return d.forEach((function(n,i){if(!F(i)){var o=Math.abs(E[i]-t);(o<e||100===o&&100===e)&&(r=i,e=o)}})),r}(e);if(!1===n)return!1;r.events.snap||o(S,r.cssClasses.tap,r.animationDuration),at(n,e,!0,!0),st(),et("slide",n,!0),et("update",n,!0),et("change",n,!0),et("set",n,!0),r.events.snap&&Q(t,{handleNumbers:[n]})}function J(t){var e=Y(t.calcPoint),r=_.getStep(e),n=_.fromStepping(r);Object.keys(A).forEach((function(t){"hover"===t.split(".")[0]&&A[t].forEach((function(t){t.call(g,n)}))}))}function Z(t,e){A[t]=A[t]||[],A[t].push(e),"update"===t.split(".")[0]&&d.forEach((function(t,e){et("update",e)}))}function tt(t){var e=t&&t.split(".")[0],r=e&&t.substring(e.length);Object.keys(A).forEach((function(t){var n=t.split(".")[0],i=t.substring(n.length);e&&e!==n||r&&r!==i||delete A[t]}))}function et(t,e,n){Object.keys(A).forEach((function(i){var o=i.split(".")[0];t===o&&A[i].forEach((function(t){t.call(g,x.map(r.format.to),e,x.slice(),n||!1,E.slice())}))}))}function rt(t,e,n,i,o,a){return d.length>1&&!r.events.unconstrained&&(i&&e>0&&(n=Math.max(n,t[e-1]+r.margin)),o&&e<d.length-1&&(n=Math.min(n,t[e+1]-r.margin))),d.length>1&&r.limit&&(i&&e>0&&(n=Math.min(n,t[e-1]+r.limit)),o&&e<d.length-1&&(n=Math.max(n,t[e+1]-r.limit))),r.padding&&(0===e&&(n=Math.max(n,r.padding[0])),e===d.length-1&&(n=Math.min(n,100-r.padding[1]))),!((n=s(n=_.getStep(n)))===t[e]&&!a)&&n}function nt(t,e){var n=r.ort;return(n?e:t)+", "+(n?t:e)}function it(t,e,r,n){var i=r.slice(),o=[!t,t],s=[t,!t];n=n.slice(),t&&n.reverse(),n.length>1?n.forEach((function(t,r){var n=rt(i,t,i[t]+e,o[r],s[r],!1);!1===n?e=0:(e=n-i[t],i[t]=n)})):o=s=[!0];var a=!1;n.forEach((function(t,n){a=at(t,r[t]+e,o[n],s[n])||a})),a&&n.forEach((function(t){et("update",t),et("slide",t)}))}function ot(t,e){return r.dir?100-t-e:t}function st(){C.forEach((function(t){var e=E[t]>50?-1:1,r=3+(d.length+e*t);d[t].style.zIndex=r}))}function at(t,e,n,i){return!1!==(e=rt(E,t,e,n,i,!1))&&(function(t,e){E[t]=e,x[t]=_.fromStepping(e);var n="translate("+nt(ot(e,0)-M+"%","0")+")";d[t].style[r.transformRule]=n,ct(t),ct(t+1)}(t,e),!0)}function ct(t){if(f[t]){var e=0,n=100;0!==t&&(e=E[t-1]),t!==f.length-1&&(n=E[t]);var i=n-e,o="translate("+nt(ot(e,i)+"%","0")+")",s="scale("+nt(i/100,"1")+")";f[t].style[r.transformRule]=o+" "+s}}function ut(t,e){return null===t||!1===t||void 0===t?E[e]:("number"==typeof t&&(t=String(t)),t=r.format.from(t),!1===(t=_.toStepping(t))||isNaN(t)?E[e]:t)}function lt(t,e){var n=a(t),i=void 0===E[0];e=void 0===e||!!e,r.animate&&!i&&o(S,r.cssClasses.tap,r.animationDuration),C.forEach((function(t){at(t,ut(n[t],t),!0,!1)})),C.forEach((function(t){at(t,E[t],!0,!0)})),st(),C.forEach((function(t){et("update",t),null!==n[t]&&e&&et("set",t)}))}function ht(t,e,r){if(!((t=Number(t))>=0&&t<C.length))throw new Error("noUiSlider (13.1.5): invalid handle number, got: "+t);at(t,ut(e,t),!0,!0),et("update",t),r&&et("set",t)}function dt(){var t=x.map(r.format.to);return 1===t.length?t[0]:t}function ft(t){var e=E[t],n=_.getNearbySteps(e),i=x[t],o=n.thisStep.step,s=null;if(r.snap)return[i-n.stepBefore.startValue||null,n.stepAfter.startValue-i||null];!1!==o&&i+o>n.stepAfter.startValue&&(o=n.stepAfter.startValue-i),s=i>n.thisStep.startValue?n.thisStep.step:!1!==n.stepBefore.step&&i-n.stepBefore.highestStep,100===e?o=null:0===e&&(s=null);var a=_.countStepDecimals();return null!==o&&!1!==o&&(o=Number(o.toFixed(a))),null!==s&&!1!==s&&(s=Number(s.toFixed(a))),[s,o]}return u(v=S,r.cssClasses.target),0===r.dir?u(v,r.cssClasses.ltr):u(v,r.cssClasses.rtl),0===r.ort?u(v,r.cssClasses.horizontal):u(v,r.cssClasses.vertical),c=I(v,r.cssClasses.base),function(t,e){var n=I(e,r.cssClasses.connects);d=[],(f=[]).push(j(n,t[0]));for(var i=0;i<r.handles;i++)d.push(N(e,i)),C[i]=i,f.push(j(n,t[i+1]))}(r.connect,c),(b=r.events).fixed||d.forEach((function(t,e){$(y.start,t.children[0],Q,{handleNumbers:[e]})})),b.tap&&$(y.start,c,K,{}),b.hover&&$(y.move,c,J,{hover:!0}),b.drag&&f.forEach((function(t,e){if(!1!==t&&0!==e&&e!==f.length-1){var n=d[e-1],i=d[e],o=[t];u(t,r.cssClasses.draggable),b.fixed&&(o.push(n.children[0]),o.push(i.children[0])),o.forEach((function(t){$(y.start,t,Q,{handles:[n,i],handleNumbers:[e-1,e]})}))}})),lt(r.start),r.pips&&H(r.pips),r.tooltips&&V(),Z("update",(function(t,e,n,i,o){C.forEach((function(t){var e=d[t],i=rt(E,t,0,!0,!0,!0),s=rt(E,t,100,!0,!0,!0),a=o[t],c=r.ariaFormat.to(n[t]);i=_.fromStepping(i).toFixed(1),s=_.fromStepping(s).toFixed(1),a=_.fromStepping(a).toFixed(1),e.children[0].setAttribute("aria-valuemin",i),e.children[0].setAttribute("aria-valuemax",s),e.children[0].setAttribute("aria-valuenow",a),e.children[0].setAttribute("aria-valuetext",c)}))})),g={destroy:function(){for(var t in r.cssClasses)r.cssClasses.hasOwnProperty(t)&&l(S,r.cssClasses[t]);for(;S.firstChild;)S.removeChild(S.firstChild);delete S.noUiSlider},steps:function(){return C.map(ft)},on:Z,off:tt,get:dt,set:lt,setHandle:ht,reset:function(t){lt(r.start,t)},__moveHandles:function(t,e,r){it(t,e,E,r)},options:i,updateOptions:function(t,e){var n=dt(),o=["margin","limit","padding","range","animate","snap","step","format","pips","tooltips"];o.forEach((function(e){void 0!==t[e]&&(i[e]=t[e])}));var s=W(i);o.forEach((function(e){void 0!==t[e]&&(r[e]=s[e])})),_=s.spectrum,r.margin=s.margin,r.limit=s.limit,r.padding=s.padding,r.pips?H(r.pips):B(),r.tooltips?V():U(),E=[],lt(t.start||n,e)},target:S,removePips:B,removeTooltips:U,pips:H}}return{__spectrum:y,version:t,create:function(t,e){if(!t||!t.nodeName)throw new Error("noUiSlider (13.1.5): create requires a single element, got: "+t);if(t.noUiSlider)throw new Error("noUiSlider (13.1.5): Slider was already initialized.");var r=H(t,W(e),e);return t.noUiSlider=r,r}}})?n.apply(e,i):n)||(t.exports=o)},function(t,e,r){!function(e){"use strict";var r=function(){return{escape:function(t){return t.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1")},parseExtension:e,mimeType:function(t){var r=e(t).toLowerCase();return(n="application/font-woff",{woff:n,woff2:n,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml"})[r]||"";var n},dataAsUrl:function(t,e){return"data:"+e+";base64,"+t},isDataUrl:function(t){return-1!==t.search(/^(data:)/)},canvasToBlob:function(t){return t.toBlob?new Promise((function(e){t.toBlob(e)})):function(t){return new Promise((function(e){for(var r=window.atob(t.toDataURL().split(",")[1]),n=r.length,i=new Uint8Array(n),o=0;o<n;o++)i[o]=r.charCodeAt(o);e(new Blob([i],{type:"image/png"}))}))}(t)},resolveUrl:function(t,e){var r=document.implementation.createHTMLDocument(),n=r.createElement("base");r.head.appendChild(n);var i=r.createElement("a");return r.body.appendChild(i),n.href=e,i.href=t,i.href},getAndEncode:function(t){a.impl.options.cacheBust&&(t+=(/\?/.test(t)?"&":"?")+(new Date).getTime());return new Promise((function(e){var r,n=new XMLHttpRequest;if(n.onreadystatechange=function(){if(4!==n.readyState)return;if(200!==n.status)return void(r?e(r):o("cannot fetch resource: "+t+", status: "+n.status));var i=new FileReader;i.onloadend=function(){var t=i.result.split(/,/)[1];e(t)},i.readAsDataURL(n.response)},n.ontimeout=function(){r?e(r):o("timeout of 30000ms occured while fetching resource: "+t)},n.responseType="blob",n.timeout=3e4,n.open("GET",t,!0),n.send(),a.impl.options.imagePlaceholder){var i=a.impl.options.imagePlaceholder.split(/,/);i&&i[1]&&(r=i[1])}function o(t){console.error(t),e("")}}))},uid:(t=0,function(){return"u"+("0000"+(Math.random()*Math.pow(36,4)<<0).toString(36)).slice(-4)+t++}),delay:function(t){return function(e){return new Promise((function(r){setTimeout((function(){r(e)}),t)}))}},asArray:function(t){for(var e=[],r=t.length,n=0;n<r;n++)e.push(t[n]);return e},escapeXhtml:function(t){return t.replace(/#/g,"%23").replace(/\n/g,"%0A")},makeImage:function(t){return new Promise((function(e,r){var n=new Image;n.onload=function(){e(n)},n.onerror=r,n.src=t}))},width:function(t){var e=r(t,"border-left-width"),n=r(t,"border-right-width");return t.scrollWidth+e+n},height:function(t){var e=r(t,"border-top-width"),n=r(t,"border-bottom-width");return t.scrollHeight+e+n}};var t;function e(t){var e=/\.([^\.\/]*?)$/g.exec(t);return e?e[1]:""}function r(t,e){var r=window.getComputedStyle(t).getPropertyValue(e);return parseFloat(r.replace("px",""))}}(),n=function(){var t=/url\(['"]?([^'"]+?)['"]?\)/g;return{inlineAll:function(t,r,o){return function(){return!e(t)}()?Promise.resolve(t):Promise.resolve(t).then(n).then((function(e){var n=Promise.resolve(t);return e.forEach((function(t){n=n.then((function(e){return i(e,t,r,o)}))})),n}))},shouldProcess:e,impl:{readUrls:n,inline:i}};function e(e){return-1!==e.search(t)}function n(e){for(var n,i=[];null!==(n=t.exec(e));)i.push(n[1]);return i.filter((function(t){return!r.isDataUrl(t)}))}function i(t,e,n,i){return Promise.resolve(e).then((function(t){return n?r.resolveUrl(t,n):t})).then(i||r.getAndEncode).then((function(t){return r.dataAsUrl(t,r.mimeType(e))})).then((function(n){return t.replace(function(t){return new RegExp("(url\\(['\"]?)("+r.escape(t)+")(['\"]?\\))","g")}(e),"$1"+n+"$3")}))}}(),i=function(){return{resolveAll:function(){return t(document).then((function(t){return Promise.all(t.map((function(t){return t.resolve()})))})).then((function(t){return t.join("\n")}))},impl:{readAll:t}};function t(){return Promise.resolve(r.asArray(document.styleSheets)).then((function(t){var e=[];return t.forEach((function(t){try{r.asArray(t.cssRules||[]).forEach(e.push.bind(e))}catch(e){console.log("Error while reading CSS rules from "+t.href,e.toString())}})),e})).then((function(t){return t.filter((function(t){return t.type===CSSRule.FONT_FACE_RULE})).filter((function(t){return n.shouldProcess(t.style.getPropertyValue("src"))}))})).then((function(e){return e.map(t)}));function t(t){return{resolve:function(){var e=(t.parentStyleSheet||{}).href;return n.inlineAll(t.cssText,e)},src:function(){return t.style.getPropertyValue("src")}}}}}(),o=function(){return{inlineAll:function e(i){return i instanceof Element?function(t){var e=t.style.getPropertyValue("background");return e?n.inlineAll(e).then((function(e){t.style.setProperty("background",e,t.style.getPropertyPriority("background"))})).then((function(){return t})):Promise.resolve(t)}(i).then((function(){return i instanceof HTMLImageElement?t(i).inline():Promise.all(r.asArray(i.childNodes).map((function(t){return e(t)})))})):Promise.resolve(i)},impl:{newImage:t}};function t(t){return{inline:function(e){return r.isDataUrl(t.src)?Promise.resolve():Promise.resolve(t.src).then(e||r.getAndEncode).then((function(e){return r.dataAsUrl(e,r.mimeType(t.src))})).then((function(e){return new Promise((function(r,n){t.onload=r,t.onerror=n,t.src=e}))}))}}}}(),s={imagePlaceholder:void 0,cacheBust:!1},a={toSvg:c,toPng:function(t,e){return u(t,e||{}).then((function(t){return t.toDataURL()}))},toJpeg:function(t,e){return u(t,e=e||{}).then((function(t){return t.toDataURL("image/jpeg",e.quality||1)}))},toBlob:function(t,e){return u(t,e||{}).then(r.canvasToBlob)},toPixelData:function(t,e){return u(t,e||{}).then((function(e){return e.getContext("2d").getImageData(0,0,r.width(t),r.height(t)).data}))},impl:{fontFaces:i,images:o,util:r,inliner:n,options:{}}};function c(t,e){return function(t){void 0===t.imagePlaceholder?a.impl.options.imagePlaceholder=s.imagePlaceholder:a.impl.options.imagePlaceholder=t.imagePlaceholder;void 0===t.cacheBust?a.impl.options.cacheBust=s.cacheBust:a.impl.options.cacheBust=t.cacheBust}(e=e||{}),Promise.resolve(t).then((function(t){return function t(e,n,i){return i||!n||n(e)?Promise.resolve(e).then((function(t){return t instanceof HTMLCanvasElement?r.makeImage(t.toDataURL()):t.cloneNode(!1)})).then((function(t){return o(e,t,n)})).then((function(t){return function(t,e){return e instanceof Element?Promise.resolve().then(n).then(i).then(o).then(s).then((function(){return e})):e;function n(){var n,i;n=window.getComputedStyle(t),i=e.style,n.cssText?i.cssText=n.cssText:function(t,e){r.asArray(t).forEach((function(r){e.setProperty(r,t.getPropertyValue(r),t.getPropertyPriority(r))}))}(n,i)}function i(){[":before",":after"].forEach((function(n){!function(n){var i=window.getComputedStyle(t,n),o=i.getPropertyValue("content");if(""===o||"none"===o)return;var s=r.uid();e.className=e.className+" "+s;var a=document.createElement("style");a.appendChild(function(t,e,n){var i="."+t+":"+e,o=n.cssText?function(t){var e=t.getPropertyValue("content");return t.cssText+" content: "+e+";"}(n):function(t){return r.asArray(t).map((function(e){return e+": "+t.getPropertyValue(e)+(t.getPropertyPriority(e)?" !important":"")})).join("; ")+";"}(n);return document.createTextNode(i+"{"+o+"}")}(s,n,i)),e.appendChild(a)}(n)}))}function o(){t instanceof HTMLTextAreaElement&&(e.innerHTML=t.value),t instanceof HTMLInputElement&&e.setAttribute("value",t.value)}function s(){e instanceof SVGElement&&(e.setAttribute("xmlns","http://www.w3.org/2000/svg"),e instanceof SVGRectElement&&["width","height"].forEach((function(t){var r=e.getAttribute(t);r&&e.style.setProperty(t,r)})))}}(e,t)})):Promise.resolve();function o(e,n,i){var o=e.childNodes;return 0===o.length?Promise.resolve(n):s(n,r.asArray(o),i).then((function(){return n}));function s(e,r,n){var i=Promise.resolve();return r.forEach((function(r){i=i.then((function(){return t(r,n)})).then((function(t){t&&e.appendChild(t)}))})),i}}}(t,e.filter,!0)})).then(l).then(h).then((function(t){e.bgcolor&&(t.style.backgroundColor=e.bgcolor);e.width&&(t.style.width=e.width+"px");e.height&&(t.style.height=e.height+"px");e.style&&Object.keys(e.style).forEach((function(r){t.style[r]=e.style[r]}));return t})).then((function(n){return function(t,e,n){return Promise.resolve(t).then((function(t){return t.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),(new XMLSerializer).serializeToString(t)})).then(r.escapeXhtml).then((function(t){return'<foreignObject x="0" y="0" width="100%" height="100%">'+t+"</foreignObject>"})).then((function(t){return'<svg xmlns="http://www.w3.org/2000/svg" width="'+e+'" height="'+n+'">'+t+"</svg>"})).then((function(t){return"data:image/svg+xml;charset=utf-8,"+t}))}(n,e.width||r.width(t),e.height||r.height(t))}))}function u(t,e){return c(t,e).then(r.makeImage).then(r.delay(100)).then((function(n){var i=function(t){var n=document.createElement("canvas");if(n.width=e.width||r.width(t),n.height=e.height||r.height(t),e.bgcolor){var i=n.getContext("2d");i.fillStyle=e.bgcolor,i.fillRect(0,0,n.width,n.height)}return n}(t);return i.getContext("2d").drawImage(n,0,0),i}))}function l(t){return i.resolveAll().then((function(e){var r=document.createElement("style");return t.appendChild(r),r.appendChild(document.createTextNode(e)),t}))}function h(t){return o.inlineAll(t).then((function(){return t}))}t.exports=a}()},function(t,e,r){var n;!function(r,i,o,s){"use strict";var a,c,u={URL:r.URL||r.webkitURL||r.mozURL||r.msURL,getUserMedia:(c=o.getUserMedia||o.webkitGetUserMedia||o.mozGetUserMedia||o.msGetUserMedia,c?c.bind(o):c),requestAnimFrame:r.requestAnimationFrame||r.webkitRequestAnimationFrame||r.mozRequestAnimationFrame||r.oRequestAnimationFrame||r.msRequestAnimationFrame,requestTimeout:function(t,e){if(t=t||u.noop,e=e||0,!u.requestAnimFrame)return setTimeout(t,e);var r=(new Date).getTime(),n=new Object,i=u.requestAnimFrame;return n.value=i((function o(){(new Date).getTime()-r>=e?t.call():n.value=i(o)})),n},Blob:r.Blob||r.BlobBuilder||r.WebKitBlobBuilder||r.MozBlobBuilder||r.MSBlobBuilder,btoa:(a=r.btoa||function(t){for(var e="",r=0,n=t.length,i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",o=void 0,s=void 0,a=void 0,c=void 0,u=void 0,l=void 0,h=void 0;r<n;)c=(o=t.charCodeAt(r++))>>2,u=(3&o)<<4|(s=t.charCodeAt(r++))>>4,l=(15&s)<<2|(a=t.charCodeAt(r++))>>6,h=63&a,isNaN(s)?l=h=64:isNaN(a)&&(h=64),e=e+i.charAt(c)+i.charAt(u)+i.charAt(l)+i.charAt(h);return e},a?a.bind(r):u.noop),isObject:function(t){return t&&"[object Object]"===Object.prototype.toString.call(t)},isEmptyObject:function(t){return u.isObject(t)&&!Object.keys(t).length},isArray:function(t){return t&&Array.isArray(t)},isFunction:function(t){return t&&"function"==typeof t},isElement:function(t){return t&&1===t.nodeType},isString:function(t){return"string"==typeof t||"[object String]"===Object.prototype.toString.call(t)},isSupported:{canvas:function(){var t=i.createElement("canvas");return t&&t.getContext&&t.getContext("2d")},webworkers:function(){return r.Worker},blob:function(){return u.Blob},Uint8Array:function(){return r.Uint8Array},Uint32Array:function(){return r.Uint32Array},videoCodecs:function(){var t=i.createElement("video"),e={mp4:!1,h264:!1,ogv:!1,ogg:!1,webm:!1};try{t&&t.canPlayType&&(e.mp4=""!==t.canPlayType('video/mp4; codecs="mp4v.20.8"'),e.h264=""!==(t.canPlayType('video/mp4; codecs="avc1.42E01E"')||t.canPlayType('video/mp4; codecs="avc1.42E01E, mp4a.40.2"')),e.ogv=""!==t.canPlayType('video/ogg; codecs="theora"'),e.ogg=""!==t.canPlayType('video/ogg; codecs="theora"'),e.webm=-1!==t.canPlayType('video/webm; codecs="vp8, vorbis"'))}catch(t){}return e}()},noop:function(){},each:function(t,e){var r=void 0,n=void 0;if(u.isArray(t))for(r=-1,n=t.length;++r<n&&!1!==e(r,t[r]););else if(u.isObject(t))for(r in t)if(t.hasOwnProperty(r)&&!1===e(r,t[r]))break},mergeOptions:function(t,e){if(u.isObject(t)&&u.isObject(e)&&Object.keys){var r={};return u.each(t,(function(e,n){r[e]=t[e]})),u.each(e,(function(n,i){var o=e[n];u.isObject(o)&&t[n]?r[n]=u.mergeOptions(t[n],o):r[n]=o})),r}},setCSSAttr:function(t,e,r){u.isElement(t)&&(u.isString(e)&&u.isString(r)?t.style[e]=r:u.isObject(e)&&u.each(e,(function(e,r){t.style[e]=r})))},removeElement:function(t){u.isElement(t)&&t.parentNode&&t.parentNode.removeChild(t)},createWebWorker:function(t){if(!u.isString(t))return{};try{var e=new u.Blob([t],{type:"text/javascript"}),r=u.URL.createObjectURL(e);return{objectUrl:r,worker:new Worker(r)}}catch(t){return""+t}},getExtension:function(t){return t.substr(t.lastIndexOf(".")+1,t.length)},getFontSize:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!i.body||!1===t.resizeFont)return t.fontSize;var e=t.text,r=t.gifWidth,n=parseInt(t.fontSize,10),o=parseInt(t.minFontSize,10),s=i.createElement("div"),a=i.createElement("span");for(s.setAttribute("width",r),s.appendChild(a),a.innerHTML=e,a.style.fontSize=n+"px",a.style.textIndent="-9999px",a.style.visibility="hidden",i.body.appendChild(a);a.offsetWidth>r&&n>=o;)a.style.fontSize=--n+"px";return i.body.removeChild(a),n+"px"},webWorkerError:!1},l=Object.freeze({default:u}),h={validate:function(t){t=u.isObject(t)?t:{};var e={};return u.each(h.validators,(function(r,n){var i=n.errorCode;if(!t[i]&&!n.condition)return(e=n).error=!0,!1})),delete e.condition,e},isValid:function(t){var e=!0!==h.validate(t).error;return e},validators:[{condition:u.isFunction(u.getUserMedia),errorCode:"getUserMedia",errorMsg:"The getUserMedia API is not supported in your browser"},{condition:u.isSupported.canvas(),errorCode:"canvas",errorMsg:"Canvas elements are not supported in your browser"},{condition:u.isSupported.webworkers(),errorCode:"webworkers",errorMsg:"The Web Workers API is not supported in your browser"},{condition:u.isFunction(u.URL),errorCode:"window.URL",errorMsg:"The window.URL API is not supported in your browser"},{condition:u.isSupported.blob(),errorCode:"window.Blob",errorMsg:"The window.Blob File API is not supported in your browser"},{condition:u.isSupported.Uint8Array(),errorCode:"window.Uint8Array",errorMsg:"The window.Uint8Array function constructor is not supported in your browser"},{condition:u.isSupported.Uint32Array(),errorCode:"window.Uint32Array",errorMsg:"The window.Uint32Array function constructor is not supported in your browser"}],messages:{videoCodecs:{errorCode:"videocodec",errorMsg:"The video codec you are trying to use is not supported in your browser"}}},d=Object.freeze({default:h}),f=function(){},p={sampleInterval:10,numWorkers:2,filter:"",gifWidth:200,gifHeight:200,interval:.1,numFrames:10,frameDuration:1,keepCameraOn:!1,images:[],video:null,webcamVideoElement:null,cameraStream:null,text:"",fontWeight:"normal",fontSize:"16px",minFontSize:"10px",resizeFont:!1,fontFamily:"sans-serif",fontColor:"#ffffff",textAlign:"center",textBaseline:"bottom",textXCoordinate:null,textYCoordinate:null,progressCallback:f,completeCallback:f,saveRenderingContexts:!1,savedRenderingContexts:[],crossOrigin:"Anonymous"},m=Object.freeze({default:p});function g(){return h.isValid()}function v(){var t,e,r,n,i,o=256,s=499,a=491,c=487,u=503,l=3*u,h=o-1,d=4,f=100,p=16,m=1<<p,g=10,v=10,b=m>>v,y=m<<g-v,w=o>>3,S=6,_=1<<S,x=w*_,E=30,C=10,T=1<<C,A=8,O=1<<A,k=C+A,P=1<<k,M=[],I=[],N=[],j=[];function R(t,s,a){var c,u;for(e=t,r=s,n=a,i=new Array(o),c=0;c<o;c++)i[c]=new Array(4),(u=i[c])[0]=u[1]=u[2]=(c<<d+8)/o|0,N[c]=m/o|0,I[c]=0}function L(){for(var t=[],e=new Array(o),r=0;r<o;r++)e[i[r][3]]=r;for(var n=0,s=0;s<o;s++){var a=e[s];t[n++]=i[a][0],t[n++]=i[a][1],t[n++]=i[a][2]}return t}function F(){var t,e,r,n,s,a,c,u;for(c=0,u=0,t=0;t<o;t++){for(r=t,n=(s=i[t])[1],e=t+1;e<o;e++)(a=i[e])[1]<n&&(r=e,n=a[1]);if(a=i[r],t!=r&&(e=a[0],a[0]=s[0],s[0]=e,e=a[1],a[1]=s[1],s[1]=e,e=a[2],a[2]=s[2],s[2]=e,e=a[3],a[3]=s[3],s[3]=e),n!=c){for(M[c]=u+t>>1,e=c+1;e<n;e++)M[e]=t;c=n,u=t}}for(M[c]=u+h>>1,e=c+1;e<256;e++)M[e]=h}function U(){var i,o,h,p,m,g,v,b,y,w,_,C,A,k;for(r<l&&(n=1),t=30+(n-1)/3,C=e,A=0,k=r,w=(_=r/(3*n))/f|0,b=T,(v=(g=x)>>S)<=1&&(v=0),i=0;i<v;i++)j[i]=b*((v*v-i*i)*O/(v*v));for(y=r<l?3:r%s!=0?3*s:r%a!=0?3*a:r%c!=0?3*c:3*u,i=0;i<_;)if(H(b,o=z(h=(255&C[A+0])<<d,p=(255&C[A+1])<<d,m=(255&C[A+2])<<d),h,p,m),0!==v&&W(v,o,h,p,m),(A+=y)>=k&&(A-=r),0===w&&(w=1),++i%w==0)for(b-=b/t,(v=(g-=g/E)>>S)<=1&&(v=0),o=0;o<v;o++)j[o]=b*((v*v-o*o)*O/(v*v))}function V(t,e,r){var n,s,a,c,u,l,h;for(u=1e3,h=-1,s=(n=M[e])-1;n<o||s>=0;)n<o&&((a=(l=i[n])[1]-e)>=u?n=o:(n++,a<0&&(a=-a),(c=l[0]-t)<0&&(c=-c),(a+=c)<u&&((c=l[2]-r)<0&&(c=-c),(a+=c)<u&&(u=a,h=l[3])))),s>=0&&((a=e-(l=i[s])[1])>=u?s=-1:(s--,a<0&&(a=-a),(c=l[0]-t)<0&&(c=-c),(a+=c)<u&&((c=l[2]-r)<0&&(c=-c),(a+=c)<u&&(u=a,h=l[3]))));return h}function D(){return U(),B(),F(),L()}function B(){var t;for(t=0;t<o;t++)i[t][0]>>=d,i[t][1]>>=d,i[t][2]>>=d,i[t][3]=t}function W(t,e,r,n,s){var a,c,u,l,h,d,f;for((u=e-t)<-1&&(u=-1),(l=e+t)>o&&(l=o),a=e+1,c=e-1,d=1;a<l||c>u;){if(h=j[d++],a<l){f=i[a++];try{f[0]-=h*(f[0]-r)/P|0,f[1]-=h*(f[1]-n)/P|0,f[2]-=h*(f[2]-s)/P|0}catch(t){}}if(c>u){f=i[c--];try{f[0]-=h*(f[0]-r)/P|0,f[1]-=h*(f[1]-n)/P|0,f[2]-=h*(f[2]-s)/P|0}catch(t){}}}}function H(t,e,r,n,o){var s=i[e],a=t/T;s[0]-=a*(s[0]-r)|0,s[1]-=a*(s[1]-n)|0,s[2]-=a*(s[2]-o)|0}function z(t,e,r){var n,s,a,c,u,l,h,f,m,w;for(m=f=~(1<<31),h=l=-1,n=0;n<o;n++)(s=(w=i[n])[0]-t)<0&&(s=-s),(a=w[1]-e)<0&&(a=-a),s+=a,(a=w[2]-r)<0&&(a=-a),(s+=a)<f&&(f=s,l=n),(c=s-(I[n]>>p-d))<m&&(m=c,h=n),u=N[n]>>v,N[n]-=u,I[n]+=u<<g;return N[l]+=b,I[l]-=y,h}R.apply(this,arguments);var $={};return $.map=V,$.process=D,$}function b(){try{this.onmessage=function(e){var r,n=e.data||{};n.gifshot&&(r=t.run(n),postMessage(r))}}catch(t){}var t={dataToRGB:function(t,e,r){for(var n=e*r*4,i=0,o=[];i<n;)o.push(t[i++]),o.push(t[i++]),o.push(t[i++]),i++;return o},componentizedPaletteToArray:function(t){t=t||[];for(var e=[],r=0;r<t.length;r+=3){var n=t[r],i=t[r+1],o=t[r+2];e.push(n<<16|i<<8|o)}return e},processFrameWithQuantizer:function(t,e,r,n){for(var i=this.dataToRGB(t,e,r),o=new v(i,i.length,n),s=o.process(),a=new Uint32Array(this.componentizedPaletteToArray(s)),c=e*r,u=new Uint8Array(c),l=0,h=0;h<c;h++){var d=i[l++],f=i[l++],p=i[l++];u[h]=o.map(d,f,p)}return{pixels:u,palette:a}},run:function(t){var e=t=t||{},r=e.height,n=(e.palette,e.sampleInterval),i=e.width,o=t.data;return this.processFrameWithQuantizer(o,i,r,n)}};return t}function y(t,e,r,n){var i=0,o=void 0===(n=void 0===n?{}:n).loop?null:n.loop,s=void 0===n.palette?null:n.palette;if(e<=0||r<=0||e>65535||r>65535)throw"Width/Height invalid.";t[i++]=71,t[i++]=73,t[i++]=70,t[i++]=56,t[i++]=57,t[i++]=97;if(t[i++]=255&e,t[i++]=e>>8&255,t[i++]=255&r,t[i++]=r>>8&255,t[i++]=0|(null!==s?128:0),t[i++]=0,t[i++]=0,null!==o){if(o<0||o>65535)throw"Loop count invalid.";t[i++]=33,t[i++]=255,t[i++]=11,t[i++]=78,t[i++]=69,t[i++]=84,t[i++]=83,t[i++]=67,t[i++]=65,t[i++]=80,t[i++]=69,t[i++]=50,t[i++]=46,t[i++]=48,t[i++]=3,t[i++]=1,t[i++]=255&o,t[i++]=o>>8&255,t[i++]=0}var a=!1;this.addFrame=function(e,r,n,o,c,u){if(!0===a&&(--i,a=!1),u=void 0===u?{}:u,e<0||r<0||e>65535||r>65535)throw"x/y invalid.";if(n<=0||o<=0||n>65535||o>65535)throw"Width/Height invalid.";if(c.length<n*o)throw"Not enough pixels for the frame size.";var l=!0,h=u.palette;if(null==h&&(l=!1,h=s),null==h)throw"Must supply either a local or global palette.";for(var d=function(t){var e=t.length;if(e<2||e>256||e&e-1)throw"Invalid code/color length, must be power of 2 and 2 .. 256.";return e}(h),f=0;d>>=1;)++f;d=1<<f;var p=void 0===u.delay?0:u.delay,m=void 0===u.disposal?0:u.disposal;if(m<0||m>3)throw"Disposal out of range.";var g=!1,v=0;if(void 0!==u.transparent&&null!==u.transparent&&(g=!0,(v=u.transparent)<0||v>=d))throw"Transparent color index.";if((0!==m||g||0!==p)&&(t[i++]=33,t[i++]=249,t[i++]=4,t[i++]=m<<2|(!0===g?1:0),t[i++]=255&p,t[i++]=p>>8&255,t[i++]=v,t[i++]=0),t[i++]=44,t[i++]=255&e,t[i++]=e>>8&255,t[i++]=255&r,t[i++]=r>>8&255,t[i++]=255&n,t[i++]=n>>8&255,t[i++]=255&o,t[i++]=o>>8&255,t[i++]=!0===l?128|f-1:0,!0===l)for(var b=0,y=h.length;b<y;++b){var w=h[b];t[i++]=w>>16&255,t[i++]=w>>8&255,t[i++]=255&w}i=function(t,e,r,n){t[e++]=r;var i=e++,o=1<<r,s=o-1,a=o+1,c=a+1,u=r+1,l=0,h=0;function d(r){for(;l>=r;)t[e++]=255&h,h>>=8,l-=8,e===i+256&&(t[i]=255,i=e++)}function f(t){h|=t<<l,l+=u,d(8)}var p=n[0]&s,m={};f(o);for(var g=1,v=n.length;g<v;++g){var b=n[g]&s,y=p<<8|b,w=m[y];if(void 0===w){for(h|=p<<l,l+=u;l>=8;)t[e++]=255&h,h>>=8,l-=8,e===i+256&&(t[i]=255,i=e++);4096===c?(f(o),c=a+1,u=r+1,m={}):(c>=1<<u&&++u,m[y]=c++),p=b}else p=w}f(p),f(a),d(1),i+1===e?t[i]=0:(t[i]=e-i-1,t[e++]=0);return e}(t,i,f<2?2:f,c)},this.end=function(){return!1===a&&(t[i++]=59,a=!0),i}}var w=function(){},S=function(t){this.canvas=null,this.ctx=null,this.repeat=0,this.frames=[],this.numRenderedFrames=0,this.onRenderCompleteCallback=w,this.onRenderProgressCallback=w,this.workers=[],this.availableWorkers=[],this.generatingGIF=!1,this.options=t,this.initializeWebWorkers(t)};function _(t,e){t.getBase64GIF((function(t){e({error:!1,errorCode:"",errorMsg:"",image:t})}))}S.prototype={workerMethods:b(),initializeWebWorkers:function(t){var e,r=v.toString()+"("+b.toString()+"());",n=void 0,o=void 0,s=void 0,a=-1,c="";for(e=t.numWorkers;++a<e;)n=u.createWebWorker(r),u.isObject(n)?(o=n.objectUrl,s=n.worker,this.workers.push({worker:s,objectUrl:o}),this.availableWorkers.push(s)):(c=n,u.webWorkerError=!!n);this.workerError=c,this.canvas=i.createElement("canvas"),this.canvas.width=t.gifWidth,this.canvas.height=t.gifHeight,this.ctx=this.canvas.getContext("2d"),this.frames=[]},getWorker:function(){return this.availableWorkers.pop()},freeWorker:function(t){this.availableWorkers.push(t)},byteMap:function(){for(var t=[],e=0;e<256;e++)t[e]=String.fromCharCode(e);return t}(),bufferToString:function(t){for(var e=t.length,r="",n=-1;++n<e;)r+=this.byteMap[t[n]];return r},onFrameFinished:function(t){var e=this,r=e.frames,n=!!(e.options.images||[]).length,i=r.every((function(t){return!t.beingProcessed&&t.done}));e.numRenderedFrames++,n&&t(e.numRenderedFrames/r.length),e.onRenderProgressCallback(.75*e.numRenderedFrames/r.length),i?e.generatingGIF||e.generateGIF(r,e.onRenderCompleteCallback):u.requestTimeout((function(){e.processNextFrame()}),1)},processFrame:function(t){var e=this,r=(this.options,this.options),n=r.progressCallback,i=r.sampleInterval,o=this.frames,s=void 0,a=void 0,c=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.data;delete s.data,s.pixels=Array.prototype.slice.call(r.pixels),s.palette=Array.prototype.slice.call(r.palette),s.done=!0,s.beingProcessed=!1,e.freeWorker(a),e.onFrameFinished(n)};(s=o[t]).beingProcessed||s.done?this.onFrameFinished():(s.sampleInterval=i,s.beingProcessed=!0,s.gifshot=!0,(a=this.getWorker())?(a.onmessage=c,a.postMessage(s)):c({data:e.workerMethods.run(s)}))},startRendering:function(t){this.onRenderCompleteCallback=t;for(var e=0;e<this.options.numWorkers&&e<this.frames.length;e++)this.processFrame(e)},processNextFrame:function(){for(var t=-1,e=0;e<this.frames.length;e++){var r=this.frames[e];if(!r.done&&!r.beingProcessed){t=e;break}}t>=0&&this.processFrame(t)},generateGIF:function(t,e){var r=[],n={loop:this.repeat},i=this.options,o=i.interval,s=i.frameDuration,a=!!i.images.length,c=i.gifHeight,l=i.gifWidth,h=new y(r,l,c,n),d=this.onRenderProgressCallback,f=a?100*o:0,p=void 0;this.generatingGIF=!0,u.each(t,(function(e,r){var n=r.palette;d(.75+.25*r.position*1/t.length);for(var i=0;i<s;i++)h.addFrame(0,0,l,c,r.pixels,{palette:n,delay:f})})),h.end(),d(1),this.frames=[],this.generatingGIF=!1,u.isFunction(e)&&(p=this.bufferToString(r),e("data:image/gif;base64,"+u.btoa(p)))},setRepeat:function(t){this.repeat=t},addFrame:function(t,e){e=u.isObject(e)?e:{};var r=this.ctx,n=this.options,i=n.gifWidth,o=n.gifHeight,s=u.getFontSize(e),a=e,c=a.filter,l=a.fontColor,h=a.fontFamily,d=a.fontWeight,f=(a.gifHeight,a.gifWidth,a.text),p=a.textAlign,m=a.textBaseline,g=e.textXCoordinate?e.textXCoordinate:"left"===p?1:"right"===p?i:i/2,v=e.textYCoordinate?e.textYCoordinate:"top"===m?1:"center"===m?o/2:o,b=d+" "+s+" "+h,y=void 0;try{r.filter=c,r.drawImage(t,0,0,i,o),f&&(r.font=b,r.fillStyle=l,r.textAlign=p,r.textBaseline=m,r.fillText(f,g,v)),y=r.getImageData(0,0,i,o),this.addFrameImageData(y)}catch(t){return""+t}},addFrameImageData:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=this.frames,r=t.data;this.frames.push({data:r,width:t.width,height:t.height,palette:null,dithering:null,done:!1,beingProcessed:!1,position:e.length})},onRenderProgress:function(t){this.onRenderProgressCallback=t},isRendering:function(){return this.generatingGIF},getBase64GIF:function(t){var e=this;e.startRendering((function(r){e.destroyWorkers(),u.requestTimeout((function(){t(r)}),0)}))},destroyWorkers:function(){if(!this.workerError){var t=this.workers;u.each(t,(function(t,e){var r=e.worker,n=e.objectUrl;r.terminate(),u.URL.revokeObjectURL(n)}))}}};var x=function(){},E=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments[1];e=u.isFunction(e)?e:x;var r=i.createElement("canvas"),n=void 0,o=t.images,s=!!o.length,a=t.cameraStream,c=t.crop,l=t.filter,h=t.fontColor,d=t.fontFamily,f=t.fontWeight,p=t.keepCameraOn,m=(t.numWorkers,t.progressCallback),g=t.saveRenderingContexts,v=t.savedRenderingContexts,b=t.text,y=t.textAlign,w=t.textBaseline,_=t.videoElement,E=t.videoHeight,C=t.videoWidth,T=t.webcamVideoElement,A=Number(t.gifWidth),O=Number(t.gifHeight),k=Number(t.interval),P=(Number(t.sampleInterval),s?0:1e3*k),M=[],I=v.length?v.length:t.numFrames,N=I,j=new S(t),R=u.getFontSize(t),L=t.textXCoordinate?t.textXCoordinate:"left"===y?1:"right"===y?A:A/2,F=t.textYCoordinate?t.textYCoordinate:"top"===w?1:"center"===w?O/2:O,U=f+" "+R+" "+d,V=c?Math.floor(c.scaledWidth/2):0,D=c?C-c.scaledWidth:0,B=c?Math.floor(c.scaledHeight/2):0,W=c?E-c.scaledHeight:0,H=function t(){var r=N-1;function i(){var i;g&&M.push(n.getImageData(0,0,A,O)),b&&(n.font=U,n.fillStyle=h,n.textAlign=y,n.textBaseline=w,n.fillText(b,L,F)),i=n.getImageData(0,0,A,O),j.addFrameImageData(i),m((I-(N=r))/I),r>0&&u.requestTimeout(t,P),N||j.getBase64GIF((function(t){e({error:!1,errorCode:"",errorMsg:"",image:t,cameraStream:a,videoElement:_,webcamVideoElement:T,savedRenderingContexts:M,keepCameraOn:p})}))}v.length?(n.putImageData(v[I-N],0,0),i()):function t(){try{D>C&&(D=C),W>E&&(W=E),V<0&&(V=0),B<0&&(B=0),n.filter=l,n.drawImage(_,V,B,D,W,0,0,A,O),i()}catch(e){if("NS_ERROR_NOT_AVAILABLE"!==e.name)throw e;u.requestTimeout(t,100)}}()};I=void 0!==I?I:10,k=void 0!==k?k:.1,r.width=A,r.height=O,n=r.getContext("2d"),function t(){v.length||0!==_.currentTime?H():u.requestTimeout(t,100)}()},C=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.videoWidth,r=t.videoHeight,n=t.gifWidth,i=t.gifHeight,o={width:0,height:0,scaledWidth:0,scaledHeight:0};return e>r?(o.width=Math.round(e*(i/r))-n,o.scaledWidth=Math.round(o.width*(r/i))):(o.height=Math.round(r*(n/e))-i,o.scaledHeight=Math.round(o.height*(e/n))),o},T={loadedData:!1,defaultVideoDimensions:{width:640,height:480},findVideoSize:function t(e){t.attempts=t.attempts||0;var r=e.cameraStream,n=e.completedCallback,i=e.videoElement;i&&(i.videoWidth>0&&i.videoHeight>0?(i.removeEventListener("loadeddata",T.findVideoSize),n({videoElement:i,cameraStream:r,videoWidth:i.videoWidth,videoHeight:i.videoHeight})):t.attempts<10?(t.attempts+=1,u.requestTimeout((function(){T.findVideoSize(e)}),400)):n({videoElement:i,cameraStream:r,videoWidth:T.defaultVideoDimensions.width,videoHeight:T.defaultVideoDimensions.height}))},onStreamingTimeout:function(t){u.isFunction(t)&&t({error:!0,errorCode:"getUserMedia",errorMsg:"There was an issue with the getUserMedia API - Timed out while trying to start streaming",image:null,cameraStream:{}})},stream:function(t){var e=u.isArray(t.existingVideo)?t.existingVideo[0]:t.existingVideo,r=t.cameraStream,n=t.completedCallback,i=t.streamedCallback,o=t.videoElement;if(u.isFunction(i)&&i(),e){if(u.isString(e))o.src=e,o.innerHTML='<source src="'+e+'" type="video/'+u.getExtension(e)+'" />';else if(e instanceof Blob){try{o.src=u.URL.createObjectURL(e)}catch(t){}o.innerHTML='<source src="'+e+'" type="'+e.type+'" />'}}else if(o.mozSrcObject)o.mozSrcObject=r;else if(u.URL)try{o.srcObject=r,o.src=u.URL.createObjectURL(r)}catch(t){o.srcObject=r}o.play(),u.requestTimeout((function t(){t.count=t.count||0,!0===T.loadedData?(T.findVideoSize({videoElement:o,cameraStream:r,completedCallback:n}),T.loadedData=!1):(t.count+=1)>10?T.findVideoSize({videoElement:o,cameraStream:r,completedCallback:n}):t()}),0)},startStreaming:function(t){var e=u.isFunction(t.error)?t.error:u.noop,r=u.isFunction(t.streamed)?t.streamed:u.noop,n=u.isFunction(t.completed)?t.completed:u.noop,o=t.crossOrigin,s=t.existingVideo,a=t.lastCameraStream,c=t.options,l=t.webcamVideoElement,h=u.isElement(s)?s:l||i.createElement("video");o&&(h.crossOrigin=c.crossOrigin),h.autoplay=!0,h.loop=!0,h.muted=!0,h.addEventListener("loadeddata",(function(t){T.loadedData=!0,c.offset&&(h.currentTime=c.offset)})),s?T.stream({videoElement:h,existingVideo:s,completedCallback:n}):a?T.stream({videoElement:h,cameraStream:a,streamedCallback:r,completedCallback:n}):u.getUserMedia({video:!0},(function(t){T.stream({videoElement:h,cameraStream:t,streamedCallback:r,completedCallback:n})}),e)},startVideoStreaming:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=void 0!==e.timeout?e.timeout:0,n=e.callback,i=e.webcamVideoElement,o=void 0;r>0&&(o=u.requestTimeout((function(){T.onStreamingTimeout(n)}),1e4)),T.startStreaming({error:function(){n({error:!0,errorCode:"getUserMedia",errorMsg:"There was an issue with the getUserMedia API - the user probably denied permission",image:null,cameraStream:{}})},streamed:function(){clearTimeout(o)},completed:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=e.cameraStream,n=e.videoElement,i=e.videoHeight,o=e.videoWidth;t({cameraStream:r,videoElement:n,videoHeight:i,videoWidth:o})},lastCameraStream:e.lastCameraStream,webcamVideoElement:i,crossOrigin:e.crossOrigin,options:e})},stopVideoStreaming:function(t){var e=t=u.isObject(t)?t:{},r=e.keepCameraOn,n=e.videoElement,i=e.webcamVideoElement,o=t.cameraStream||{},s=o.getTracks&&o.getTracks()||[],a=!!s.length,c=s[0];!r&&a&&u.isFunction(c.stop)&&c.stop(),u.isElement(n)&&!i&&(n.pause(),u.isFunction(u.URL.revokeObjectURL)&&!u.webWorkerError&&n.src&&u.URL.revokeObjectURL(n.src),u.removeElement(n))}};function A(t){t=u.isObject(t)?t:{},T.stopVideoStreaming(t)}function O(t,e){var r=t.options||{},n=r.images,o=r.video,s=Number(r.gifWidth),a=Number(r.gifHeight),c=(Number(r.numFrames),t.cameraStream),l=t.videoElement,h=t.videoWidth,d=t.videoHeight,f=C({videoWidth:h,videoHeight:d,gifHeight:a,gifWidth:s}),p=e;r.crop=f,r.videoElement=l,r.videoWidth=h,r.videoHeight=d,r.cameraStream=c,u.isElement(l)&&(l.width=s+f.width,l.height=a+f.height,r.webcamVideoElement||(u.setCSSAttr(l,{position:"fixed",opacity:"0"}),i.body.appendChild(l)),l.play(),E(r,(function(t){n&&n.length||o&&o.length||A(t),p(t)})))}function k(t,e){if(e=u.isFunction(t)?t:e,t=u.isObject(t)?t:{},u.isFunction(e)){var r=u.mergeOptions(p,t)||{},n=t.cameraStream,o=r.images,s=o?o.length:0,a=r.video,c=r.webcamVideoElement;r=u.mergeOptions(r,{gifWidth:Math.floor(r.gifWidth),gifHeight:Math.floor(r.gifHeight)}),s?function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.callback,r=t.images,n=t.options,o=t.imagesLength,s={getUserMedia:!0,"window.URL":!0},a=h.validate(s),c=[],l=0,d=void 0,f=void 0;if(a.error)return e(a);function p(){u.each(c,(function(t,e){e&&(e.text?f.addFrame(e.img,n,e.text):f.addFrame(e,n))})),_(f,e)}f=new S(n),u.each(r,(function(t,r){var s=r;r.src&&(s=s.src),u.isElement(s)?(n.crossOrigin&&(s.crossOrigin=n.crossOrigin),c[t]=s,(l+=1)===o&&p()):u.isString(s)&&(d=new Image,n.crossOrigin&&(d.crossOrigin=n.crossOrigin),function(n){r.text&&(n.text=r.text),n.onerror=function(t){var r=void 0;if(0===--o)return(r={}).error="None of the requested images was capable of being retrieved",e(r)},n.onload=function(e){r.text?c[t]={img:n,text:n.text}:c[t]=n,(l+=1)===o&&p(),u.removeElement(n)},n.src=s}(d),u.setCSSAttr(d,{position:"fixed",opacity:"0"}),i.body.appendChild(d))}))}({images:o,imagesLength:s,callback:e,options:r}):a?function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.callback,r=t.existingVideo,n=t.options,i={getUserMedia:!0,"window.URL":!0},o=h.validate(i),s=void 0,a=void 0;if(o.error)return e(o);if(u.isElement(r)&&r.src){if(a=r.src,s=u.getExtension(a),!u.isSupported.videoCodecs[s])return e(h.messages.videoCodecs)}else u.isArray(r)&&u.each(r,(function(t,e){if(s=e instanceof Blob?e.type.substr(e.type.lastIndexOf("/")+1,e.length):e.substr(e.lastIndexOf(".")+1,e.length),u.isSupported.videoCodecs[s])return r=e,!1}));T.startStreaming({completed:function(t){t.options=n||{},O(t,e)},existingVideo:r,crossOrigin:n.crossOrigin,options:n})}({existingVideo:a,callback:e,options:r}):function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=t.callback,r=t.lastCameraStream,n=t.options,i=t.webcamVideoElement;if(!g())return e(h.validate());n.savedRenderingContexts.length?E(n,(function(t){e(t)})):T.startVideoStreaming((function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};t.options=n||{},O(t,e)}),{lastCameraStream:r,callback:e,webcamVideoElement:i,crossOrigin:n.crossOrigin})}({lastCameraStream:n,callback:e,webcamVideoElement:c,options:r})}}var P={utils:l,error:d,defaultOptions:m,createGIF:k,takeSnapShot:function(t,e){if(e=u.isFunction(t)?t:e,t=u.isObject(t)?t:{},u.isFunction(e)){var r=u.mergeOptions(p,t);k(u.mergeOptions(r,{interval:.1,numFrames:1,gifWidth:Math.floor(r.gifWidth),gifHeight:Math.floor(r.gifHeight)}),e)}},stopVideoStreaming:A,isSupported:function(){return h.isValid()},isWebCamGIFSupported:g,isExistingVideoGIFSupported:function(t){var e=!1;if(u.isArray(t)&&t.length){if(u.each(t,(function(t,r){u.isSupported.videoCodecs[r]&&(e=!0)})),!e)return!1}else if(u.isString(t)&&t.length&&!u.isSupported.videoCodecs[t])return!1;return h.isValid({getUserMedia:!0})},isExistingImagesGIFSupported:function(){return h.isValid({getUserMedia:!0})},VERSION:"0.4.5"};void 0===(n=function(){return P}.apply(e,[]))||(t.exports=n)}("undefined"!=typeof window?window:{},"undefined"!=typeof document?document:{createElement:function(){}},"undefined"!=typeof window?window.navigator:{})},function(t,e,r){var n,i=i||function(t){"use strict";if(!(void 0===t||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var e=t.document,r=function(){return t.URL||t.webkitURL||t},n=e.createElementNS("http://www.w3.org/1999/xhtml","a"),i="download"in n,o=/constructor/i.test(t.HTMLElement)||t.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),a=function(e){(t.setImmediate||t.setTimeout)((function(){throw e}),0)},c=function(t){setTimeout((function(){"string"==typeof t?r().revokeObjectURL(t):t.remove()}),4e4)},u=function(t){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob([String.fromCharCode(65279),t],{type:t.type}):t},l=function(e,l,h){h||(e=u(e));var d,f=this,p="application/octet-stream"===e.type,m=function(){!function(t,e,r){for(var n=(e=[].concat(e)).length;n--;){var i=t["on"+e[n]];if("function"==typeof i)try{i.call(t,r||t)}catch(t){a(t)}}}(f,"writestart progress write writeend".split(" "))};if(f.readyState=f.INIT,i)return d=r().createObjectURL(e),void setTimeout((function(){var t,e;n.href=d,n.download=l,t=n,e=new MouseEvent("click"),t.dispatchEvent(e),m(),c(d),f.readyState=f.DONE}));!function(){if((s||p&&o)&&t.FileReader){var n=new FileReader;return n.onloadend=function(){var e=s?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");t.open(e,"_blank")||(t.location.href=e),e=void 0,f.readyState=f.DONE,m()},n.readAsDataURL(e),void(f.readyState=f.INIT)}(d||(d=r().createObjectURL(e)),p)?t.location.href=d:t.open(d,"_blank")||(t.location.href=d);f.readyState=f.DONE,m(),c(d)}()},h=l.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(t,e,r){return e=e||t.name||"download",r||(t=u(t)),navigator.msSaveOrOpenBlob(t,e)}:(h.abort=function(){},h.readyState=h.INIT=0,h.WRITING=1,h.DONE=2,h.error=h.onwritestart=h.onprogress=h.onwrite=h.onabort=h.onerror=h.onwriteend=null,function(t,e,r){return new l(t,e||t.name||"download",r)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */t.exports?t.exports.saveAs=i:null!==r(17)&&null!==r(18)&&(void 0===(n=function(){return i}.call(e,r,e,t))||(t.exports=n))},function(t,e){t.exports=function(){throw new Error("define cannot be used indirect")}},function(t,e){(function(e){t.exports=e}).call(this,{})},function(t,e,r){"use strict";(function(t){var r=this&&this.__spreadArrays||function(){for(var t=0,e=0,r=arguments.length;e<r;e++)t+=arguments[e].length;var n=Array(t),i=0;for(e=0;e<r;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)n[i]=o[s];return n};Object.defineProperty(e,"__esModule",{value:!0});var n=function(t,e,r){this.name=t,this.version=e,this.os=r,this.type="browser"};e.BrowserInfo=n;var i=function(e){this.version=e,this.type="node",this.name="node",this.os=t.platform};e.NodeInfo=i;var o=function(t,e,r,n){this.name=t,this.version=e,this.os=r,this.bot=n,this.type="bot-device"};e.SearchBotDeviceInfo=o;var s=function(){this.type="bot",this.bot=!0,this.name="bot",this.version=null,this.os=null};e.BotInfo=s;var a=function(){this.type="react-native",this.name="react-native",this.version=null,this.os=null};e.ReactNativeInfo=a;var c=/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask\ Jeeves\/Teoma|ia_archiver)/,u=[["aol",/AOLShield\/([0-9\._]+)/],["edge",/Edge\/([0-9\._]+)/],["edge-ios",/EdgiOS\/([0-9\._]+)/],["yandexbrowser",/YaBrowser\/([0-9\._]+)/],["kakaotalk",/KAKAOTALK\s([0-9\.]+)/],["samsung",/SamsungBrowser\/([0-9\.]+)/],["silk",/\bSilk\/([0-9._-]+)\b/],["miui",/MiuiBrowser\/([0-9\.]+)$/],["beaker",/BeakerBrowser\/([0-9\.]+)/],["edge-chromium",/Edg\/([0-9\.]+)/],["chromium-webview",/(?!Chrom.*OPR)wv\).*Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["chrome",/(?!Chrom.*OPR)Chrom(?:e|ium)\/([0-9\.]+)(:?\s|$)/],["phantomjs",/PhantomJS\/([0-9\.]+)(:?\s|$)/],["crios",/CriOS\/([0-9\.]+)(:?\s|$)/],["firefox",/Firefox\/([0-9\.]+)(?:\s|$)/],["fxios",/FxiOS\/([0-9\.]+)/],["opera-mini",/Opera Mini.*Version\/([0-9\.]+)/],["opera",/Opera\/([0-9\.]+)(?:\s|$)/],["opera",/OPR\/([0-9\.]+)(:?\s|$)/],["ie",/Trident\/7\.0.*rv\:([0-9\.]+).*\).*Gecko$/],["ie",/MSIE\s([0-9\.]+);.*Trident\/[4-7].0/],["ie",/MSIE\s(7\.0)/],["bb10",/BB10;\sTouch.*Version\/([0-9\.]+)/],["android",/Android\s([0-9\.]+)/],["ios",/Version\/([0-9\._]+).*Mobile.*Safari.*/],["safari",/Version\/([0-9\._]+).*Safari/],["facebook",/FBAV\/([0-9\.]+)/],["instagram",/Instagram\s([0-9\.]+)/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Mobile/],["ios-webview",/AppleWebKit\/([0-9\.]+).*Gecko\)$/],["searchbot",/alexa|bot|crawl(er|ing)|facebookexternalhit|feedburner|google web preview|nagios|postrank|pingdom|slurp|spider|yahoo!|yandex/]],l=[["iOS",/iP(hone|od|ad)/],["Android OS",/Android/],["BlackBerry OS",/BlackBerry|BB10/],["Windows Mobile",/IEMobile/],["Amazon OS",/Kindle/],["Windows 3.11",/Win16/],["Windows 95",/(Windows 95)|(Win95)|(Windows_95)/],["Windows 98",/(Windows 98)|(Win98)/],["Windows 2000",/(Windows NT 5.0)|(Windows 2000)/],["Windows XP",/(Windows NT 5.1)|(Windows XP)/],["Windows Server 2003",/(Windows NT 5.2)/],["Windows Vista",/(Windows NT 6.0)/],["Windows 7",/(Windows NT 6.1)/],["Windows 8",/(Windows NT 6.2)/],["Windows 8.1",/(Windows NT 6.3)/],["Windows 10",/(Windows NT 10.0)/],["Windows ME",/Windows ME/],["Open BSD",/OpenBSD/],["Sun OS",/SunOS/],["Chrome OS",/CrOS/],["Linux",/(Linux)|(X11)/],["Mac OS",/(Mac_PowerPC)|(Macintosh)/],["QNX",/QNX/],["BeOS",/BeOS/],["OS/2",/OS\/2/]];function h(t){return""!==t&&u.reduce((function(e,r){var n=r[0],i=r[1];if(e)return e;var o=i.exec(t);return!!o&&[n,o]}),!1)}function d(t){var e=h(t);if(!e)return null;var i=e[0],a=e[1];if("searchbot"===i)return new s;var u=a[1]&&a[1].split(/[._]/).slice(0,3);u?u.length<3&&(u=r(u,function(t){for(var e=[],r=0;r<t;r++)e.push("0");return e}(3-u.length))):u=[];var l=u.join("."),d=f(t),p=c.exec(t);return p&&p[1]?new o(i,l,d,p[1]):new n(i,u.join("."),d)}function f(t){for(var e=0,r=l.length;e<r;e++){var n=l[e],i=n[0];if(n[1].exec(t))return i}return null}function p(){return void 0!==t&&t.version?new i(t.version.slice(1)):null}e.detect=function(t){return t?d(t):"undefined"==typeof document&&"undefined"!=typeof navigator&&"ReactNative"===navigator.product?new a:"undefined"!=typeof navigator?d(navigator.userAgent):p()},e.browserName=function(t){var e=h(t);return e?e[0]:null},e.parseUserAgent=d,e.detectOS=f,e.getNodeVersion=p}).call(this,r(20))},function(t,e){var r,n,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(r===setTimeout)return setTimeout(t,0);if((r===o||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:o}catch(t){r=o}try{n="function"==typeof clearTimeout?clearTimeout:s}catch(t){n=s}}();var c,u=[],l=!1,h=-1;function d(){l&&c&&(l=!1,c.length?u=c.concat(u):h=-1,u.length&&f())}function f(){if(!l){var t=a(d);l=!0;for(var e=u.length;e;){for(c=u,u=[];++h<e;)c&&c[h].run();h=-1,e=u.length}c=null,l=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===s||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function p(t,e){this.fun=t,this.array=e}function m(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var r=1;r<arguments.length;r++)e[r-1]=arguments[r];u.push(new p(t,e)),1!==u.length||l||a(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=m,i.addListener=m,i.once=m,i.off=m,i.removeListener=m,i.removeAllListeners=m,i.emit=m,i.prependListener=m,i.prependOnceListener=m,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,r){"use strict";var n,i=this&&this.__extends||(n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)},function(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});Object.defineProperty(e,"__esModule",{value:!0});var o=r(0),s=r(26),a=r(27);e.take=function(t){return function(e){return 0===t?a.empty():e.lift(new c(t))}};var c=function(){function t(t){if(this.total=t,this.total<0)throw new s.ArgumentOutOfRangeError}return t.prototype.call=function(t,e){return e.subscribe(new u(t,this.total))},t}(),u=function(t){function e(e,r){var n=t.call(this,e)||this;return n.total=r,n.count=0,n}return i(e,t),e.prototype._next=function(t){var e=this.total,r=++this.count;r<=e&&(this.destination.next(t),r===e&&(this.destination.complete(),this.unsubscribe()))},e}(o.Subscriber)},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(23),i=r(24),o=r(4),s=r(25),a=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}var e;return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var r=this._parent,a=this._parents,u=this._unsubscribe,l=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var h=-1,d=a?a.length:0;r;)r.remove(this),r=++h<d&&a[h]||null;if(o.isFunction(u))try{u.call(this)}catch(r){e=!0,t=r instanceof s.UnsubscriptionError?c(r.errors):[r]}if(n.isArray(l))for(h=-1,d=l.length;++h<d;){var f=l[h];if(i.isObject(f))try{f.unsubscribe()}catch(r){e=!0,t=t||[],r instanceof s.UnsubscriptionError?t=t.concat(c(r.errors)):t.push(r)}}if(e)throw new s.UnsubscriptionError(t)}},t.prototype.add=function(e){var r=e;switch(typeof e){case"function":r=new t(e);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof t)){var n=r;(r=new t)._subscriptions=[n]}break;default:if(!e)return t.EMPTY;throw new Error("unrecognized teardown "+e+" added to Subscription.")}if(r._addParent(this)){var i=this._subscriptions;i?i.push(r):this._subscriptions=[r]}return r},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},t.prototype._addParent=function(t){var e=this._parent,r=this._parents;return e!==t&&(e?r?-1===r.indexOf(t)&&(r.push(t),!0):(this._parents=[t],!0):(this._parent=t,!0))},t.EMPTY=((e=new t).closed=!0,e),t}();function c(t){return t.reduce((function(t,e){return t.concat(e instanceof s.UnsubscriptionError?e.errors:e)}),[])}e.Subscription=a},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isArray=Array.isArray||function(t){return t&&"number"==typeof t.length}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.isObject=function(t){return null!==t&&"object"==typeof t}},function(t,e,r){"use strict";function n(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}Object.defineProperty(e,"__esModule",{value:!0}),n.prototype=Object.create(Error.prototype),e.UnsubscriptionError=n},function(t,e,r){"use strict";function n(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}Object.defineProperty(e,"__esModule",{value:!0}),n.prototype=Object.create(Error.prototype),e.ArgumentOutOfRangeError=n},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(28);function i(t){return new n.Observable((function(e){return t.schedule((function(){return e.complete()}))}))}e.EMPTY=new n.Observable((function(t){return t.complete()})),e.empty=function(t){return t?i(t):e.EMPTY},e.emptyScheduled=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(29),i=r(30),o=r(31),s=r(32),a=r(1),c=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n=this.operator,o=i.toSubscriber(t,e,r);if(n?o.add(n.call(o,this.source)):o.add(this.source||a.config.useDeprecatedSynchronousErrorHandling&&!o.syncErrorThrowable?this._subscribe(o):this._trySubscribe(o)),a.config.useDeprecatedSynchronousErrorHandling&&o.syncErrorThrowable&&(o.syncErrorThrowable=!1,o.syncErrorThrown))throw o.syncErrorValue;return o},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){a.config.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),n.canReportError(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var r=this;return new(e=u(e))((function(e,n){var i;i=r.subscribe((function(e){try{t(e)}catch(t){n(t),i&&i.unsubscribe()}}),n,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[o.observable]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:s.pipeFromArray(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=u(t))((function(t,r){var n;e.subscribe((function(t){return n=t}),(function(t){return r(t)}),(function(){return t(n)}))}))},t.create=function(e){return new t(e)},t}();function u(t){if(t||(t=a.config.Promise||Promise),!t)throw new Error("no Promise impl found");return t}e.Observable=c},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0);e.canReportError=function(t){for(;t;){var e=t,r=e.closed,i=e.destination,o=e.isStopped;if(r||o)return!1;t=i&&i instanceof n.Subscriber?i:null}return!0}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(0),i=r(7),o=r(5);e.toSubscriber=function(t,e,r){if(t){if(t instanceof n.Subscriber)return t;if(t[i.rxSubscriber])return t[i.rxSubscriber]()}return t||e||r?new n.Subscriber(t,e,r):new n.Subscriber(o.empty)}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.observable="function"==typeof Symbol&&Symbol.observable||"@@observable"},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(33);function i(t){return t?1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}:n.noop}e.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return i(t)},e.pipeFromArray=i},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.noop=function(){}},function(t,e,r){},function(t,e,r){"use strict";r.r(e),r.d(e,"Observable",(function(){return E})),r.d(e,"ConnectableObservable",(function(){return j})),r.d(e,"GroupedObservable",(function(){return F})),r.d(e,"observable",(function(){return w})),r.d(e,"Subject",(function(){return P})),r.d(e,"BehaviorSubject",(function(){return V})),r.d(e,"ReplaySubject",(function(){return it})),r.d(e,"AsyncSubject",(function(){return st})),r.d(e,"asapScheduler",(function(){return dt})),r.d(e,"asyncScheduler",(function(){return ft})),r.d(e,"queueScheduler",(function(){return z})),r.d(e,"animationFrameScheduler",(function(){return mt})),r.d(e,"VirtualTimeScheduler",(function(){return gt})),r.d(e,"VirtualAction",(function(){return vt})),r.d(e,"Scheduler",(function(){return W})),r.d(e,"Subscription",(function(){return p})),r.d(e,"Subscriber",(function(){return v})),r.d(e,"Notification",(function(){return et})),r.d(e,"pipe",(function(){return _})),r.d(e,"noop",(function(){return S})),r.d(e,"identity",(function(){return bt})),r.d(e,"isObservable",(function(){return yt})),r.d(e,"ArgumentOutOfRangeError",(function(){return St})),r.d(e,"EmptyError",(function(){return xt})),r.d(e,"ObjectUnsubscribedError",(function(){return A})),r.d(e,"UnsubscriptionError",(function(){return f})),r.d(e,"TimeoutError",(function(){return Ct})),r.d(e,"bindCallback",(function(){return kt})),r.d(e,"bindNodeCallback",(function(){return It})),r.d(e,"combineLatest",(function(){return Gt})),r.d(e,"concat",(function(){return re})),r.d(e,"defer",(function(){return ne})),r.d(e,"empty",(function(){return Y})),r.d(e,"forkJoin",(function(){return ie})),r.d(e,"from",(function(){return Kt})),r.d(e,"fromEvent",(function(){return se})),r.d(e,"fromEventPattern",(function(){return ae})),r.d(e,"generate",(function(){return ce})),r.d(e,"iif",(function(){return le})),r.d(e,"interval",(function(){return de})),r.d(e,"merge",(function(){return pe})),r.d(e,"never",(function(){return ge})),r.d(e,"of",(function(){return J})),r.d(e,"onErrorResumeNext",(function(){return ve})),r.d(e,"pairs",(function(){return be})),r.d(e,"race",(function(){return we})),r.d(e,"range",(function(){return xe})),r.d(e,"throwError",(function(){return Z})),r.d(e,"timer",(function(){return Ce})),r.d(e,"using",(function(){return Ae})),r.d(e,"zip",(function(){return Oe})),r.d(e,"EMPTY",(function(){return $})),r.d(e,"NEVER",(function(){return me})),r.d(e,"config",(function(){return a}));
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var n=function(t,e){return(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var r in e)e.hasOwnProperty(r)&&(t[r]=e[r])})(t,e)};function i(t,e){function r(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)}function o(t){return"function"==typeof t}var s=!1,a={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;s=t},get useDeprecatedSynchronousErrorHandling(){return s}};function c(t){setTimeout((function(){throw t}))}var u={closed:!0,next:function(t){},error:function(t){if(a.useDeprecatedSynchronousErrorHandling)throw t;c(t)},complete:function(){}},l=Array.isArray||function(t){return t&&"number"==typeof t.length};function h(t){return null!==t&&"object"==typeof t}function d(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}d.prototype=Object.create(Error.prototype);var f=d,p=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var r=this._parent,n=this._parents,i=this._unsubscribe,s=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var a=-1,c=n?n.length:0;r;)r.remove(this),r=++a<c&&n[a]||null;if(o(i))try{i.call(this)}catch(r){e=!0,t=r instanceof f?m(r.errors):[r]}if(l(s))for(a=-1,c=s.length;++a<c;){var u=s[a];if(h(u))try{u.unsubscribe()}catch(r){e=!0,t=t||[],r instanceof f?t=t.concat(m(r.errors)):t.push(r)}}if(e)throw new f(t)}},t.prototype.add=function(e){var r=e;switch(typeof e){case"function":r=new t(e);case"object":if(r===this||r.closed||"function"!=typeof r.unsubscribe)return r;if(this.closed)return r.unsubscribe(),r;if(!(r instanceof t)){var n=r;(r=new t)._subscriptions=[n]}break;default:if(!e)return t.EMPTY;throw new Error("unrecognized teardown "+e+" added to Subscription.")}if(r._addParent(this)){var i=this._subscriptions;i?i.push(r):this._subscriptions=[r]}return r},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var r=e.indexOf(t);-1!==r&&e.splice(r,1)}},t.prototype._addParent=function(t){var e=this._parent,r=this._parents;return e!==t&&(e?r?-1===r.indexOf(t)&&(r.push(t),!0):(this._parents=[t],!0):(this._parent=t,!0))},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function m(t){return t.reduce((function(t,e){return t.concat(e instanceof f?e.errors:e)}),[])}var g="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),v=function(t){function e(r,n,i){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=u;break;case 1:if(!r){o.destination=u;break}if("object"==typeof r){r instanceof e?(o.syncErrorThrowable=r.syncErrorThrowable,o.destination=r,r.add(o)):(o.syncErrorThrowable=!0,o.destination=new b(o,r));break}default:o.syncErrorThrowable=!0,o.destination=new b(o,r,n,i)}return o}return i(e,t),e.prototype[g]=function(){return this},e.create=function(t,r,n){var i=new e(t,r,n);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(p),b=function(t){function e(e,r,n,i){var s,a=t.call(this)||this;a._parentSubscriber=e;var c=a;return o(r)?s=r:r&&(s=r.next,n=r.error,i=r.complete,r!==u&&(o((c=Object.create(r)).unsubscribe)&&a.add(c.unsubscribe.bind(c)),c.unsubscribe=a.unsubscribe.bind(a))),a._context=c,a._next=s,a._error=n,a._complete=i,a}return i(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,r=a.useDeprecatedSynchronousErrorHandling;if(this._error)r&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)r?(e.syncErrorValue=t,e.syncErrorThrown=!0):c(t),this.unsubscribe();else{if(this.unsubscribe(),r)throw t;c(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var r=function(){return t._complete.call(t._context)};a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,r),this.unsubscribe()):(this.__tryOrUnsub(r),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),a.useDeprecatedSynchronousErrorHandling)throw t;c(t)}},e.prototype.__tryOrSetError=function(t,e,r){if(!a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,r)}catch(e){return a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(c(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(v);function y(t){for(;t;){var e=t,r=e.closed,n=e.destination,i=e.isStopped;if(r||i)return!1;t=n&&n instanceof v?n:null}return!0}var w="function"==typeof Symbol&&Symbol.observable||"@@observable";function S(){}function _(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return x(t)}function x(t){return t?1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}:S}var E=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var r=new t;return r.source=this,r.operator=e,r},t.prototype.subscribe=function(t,e,r){var n=this.operator,i=function(t,e,r){if(t){if(t instanceof v)return t;if(t[g])return t[g]()}return t||e||r?new v(t,e,r):new v(u)}(t,e,r);if(n?i.add(n.call(i,this.source)):i.add(this.source||a.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),a.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),y(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var r=this;return new(e=C(e))((function(e,n){var i;i=r.subscribe((function(e){try{t(e)}catch(t){n(t),i&&i.unsubscribe()}}),n,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[w]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:x(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=C(t))((function(t,r){var n;e.subscribe((function(t){return n=t}),(function(t){return r(t)}),(function(){return t(n)}))}))},t.create=function(e){return new t(e)},t}();function C(t){if(t||(t=a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function T(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}T.prototype=Object.create(Error.prototype);var A=T,O=function(t){function e(e,r){var n=t.call(this)||this;return n.subject=e,n.subscriber=r,n.closed=!1,n}return i(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var r=e.indexOf(this.subscriber);-1!==r&&e.splice(r,1)}}},e}(p),k=function(t){function e(e){var r=t.call(this,e)||this;return r.destination=e,r}return i(e,t),e}(v),P=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return i(e,t),e.prototype[g]=function(){return new k(this)},e.prototype.lift=function(t){var e=new M(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new A;if(!this.isStopped)for(var e=this.observers,r=e.length,n=e.slice(),i=0;i<r;i++)n[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new A;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,r=e.length,n=e.slice(),i=0;i<r;i++)n[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new A;this.isStopped=!0;for(var t=this.observers,e=t.length,r=t.slice(),n=0;n<e;n++)r[n].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new A;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new A;return this.hasError?(t.error(this.thrownError),p.EMPTY):this.isStopped?(t.complete(),p.EMPTY):(this.observers.push(t),new O(this,t))},e.prototype.asObservable=function(){var t=new E;return t.source=this,t},e.create=function(t,e){return new M(t,e)},e}(E),M=function(t){function e(e,r){var n=t.call(this)||this;return n.destination=e,n.source=r,n}return i(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):p.EMPTY},e}(P);var I=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var r=this.connectable;r._refCount++;var n=new N(t,r),i=e.subscribe(n);return n.closed||(n.connection=r.connect()),i},t}(),N=function(t){function e(e,r){var n=t.call(this,e)||this;return n.connectable=r,n}return i(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var r=this.connection,n=t._connection;this.connection=null,!n||r&&n!==r||n.unsubscribe()}}else this.connection=null},e}(v),j=function(t){function e(e,r){var n=t.call(this)||this;return n.source=e,n.subjectFactory=r,n._refCount=0,n._isComplete=!1,n}return i(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new p).add(this.source.subscribe(new L(this.getSubject(),this))),t.closed?(this._connection=null,t=p.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return(t=this).lift(new I(t));var t},e}(E),R=j.prototype,L=(R._subscribe,R._isComplete,R.getSubject,R.connect,R.refCount,function(t){function e(e,r){var n=t.call(this,e)||this;return n.connectable=r,n}return i(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(k));var F=function(t){function e(e,r,n){var i=t.call(this)||this;return i.key=e,i.groupSubject=r,i.refCountSubscription=n,i}return i(e,t),e.prototype._subscribe=function(t){var e=new p,r=this.refCountSubscription,n=this.groupSubject;return r&&!r.closed&&e.add(new U(r)),e.add(n.subscribe(t)),e},e}(E),U=function(t){function e(e){var r=t.call(this)||this;return r.parent=e,e.count++,r}return i(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(p),V=function(t){function e(e){var r=t.call(this)||this;return r._value=e,r}return i(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var r=t.prototype._subscribe.call(this,e);return r&&!r.closed&&e.next(this._value),r},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new A;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(P),D=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.scheduler=e,n.work=r,n.pending=!1,n}return i(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var r=this.id,n=this.scheduler;return null!=r&&(this.id=this.recycleAsyncId(n,r,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(n,this.id,e),this},e.prototype.requestAsyncId=function(t,e,r){return void 0===r&&(r=0),setInterval(t.flush.bind(t,this),r)},e.prototype.recycleAsyncId=function(t,e,r){if(void 0===r&&(r=0),null!==r&&this.delay===r&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var r=this._execute(t,e);if(r)return r;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var r=!1,n=void 0;try{this.work(t)}catch(t){r=!0,n=!!t&&t||new Error(t)}if(r)return this.unsubscribe(),n},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,r=e.actions,n=r.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==n&&r.splice(n,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,r){return t.call(this)||this}return i(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(p)),B=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.scheduler=e,n.work=r,n}return i(e,t),e.prototype.schedule=function(e,r){return void 0===r&&(r=0),r>0?t.prototype.schedule.call(this,e,r):(this.delay=r,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,r){return r>0||this.closed?t.prototype.execute.call(this,e,r):this._execute(e,r)},e.prototype.requestAsyncId=function(e,r,n){return void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0?t.prototype.requestAsyncId.call(this,e,r,n):e.flush(this)},e}(D),W=function(){function t(e,r){void 0===r&&(r=t.now),this.SchedulerAction=e,this.now=r}return t.prototype.schedule=function(t,e,r){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(r,e)},t.now=function(){return Date.now()},t}(),H=function(t){function e(r,n){void 0===n&&(n=W.now);var i=t.call(this,r,(function(){return e.delegate&&e.delegate!==i?e.delegate.now():n()}))||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return i(e,t),e.prototype.schedule=function(r,n,i){return void 0===n&&(n=0),e.delegate&&e.delegate!==this?e.delegate.schedule(r,n,i):t.prototype.schedule.call(this,r,n,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var r;this.active=!0;do{if(r=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,r){for(;t=e.shift();)t.unsubscribe();throw r}}},e}(W),z=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(H))(B),$=new E((function(t){return t.complete()}));function Y(t){return t?function(t){return new E((function(e){return t.schedule((function(){return e.complete()}))}))}(t):$}function q(t){return t&&"function"==typeof t.schedule}var G,X=function(t){return function(e){for(var r=0,n=t.length;r<n&&!e.closed;r++)e.next(t[r]);e.closed||e.complete()}};function Q(t,e){return new E(e?function(r){var n=new p,i=0;return n.add(e.schedule((function(){i!==t.length?(r.next(t[i++]),r.closed||n.add(this.schedule())):r.complete()}))),n}:X(t))}function K(t){var e=new E((function(e){e.next(t),e.complete()}));return e._isScalar=!0,e.value=t,e}function J(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];switch(q(r)?t.pop():r=void 0,t.length){case 0:return Y(r);case 1:return r?Q(t,r):K(t[0]);default:return Q(t,r)}}function Z(t,e){return new E(e?function(r){return e.schedule(tt,0,{error:t,subscriber:r})}:function(e){return e.error(t)})}function tt(t){var e=t.error;t.subscriber.error(e)}G||(G={});var et=function(){function t(t,e,r){this.kind=t,this.value=e,this.error=r,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,r){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return r&&r()}},t.prototype.accept=function(t,e,r){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,r)},t.prototype.toObservable=function(){switch(this.kind){case"N":return J(this.value);case"E":return Z(this.error);case"C":return Y()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();var rt=function(t){function e(e,r,n){void 0===n&&(n=0);var i=t.call(this,e)||this;return i.scheduler=r,i.delay=n,i}return i(e,t),e.dispatch=function(t){var e=t.notification,r=t.destination;e.observe(r),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(e.dispatch,this.delay,new nt(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(et.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(et.createError(t)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(et.createComplete()),this.unsubscribe()},e}(v),nt=function(){return function(t,e){this.notification=t,this.destination=e}}(),it=function(t){function e(e,r,n){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this)||this;return i.scheduler=n,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=e<1?1:e,i._windowTime=r<1?1:r,r===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return i(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var r=this._events;r.push(e),r.length>this._bufferSize&&r.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new ot(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,r=this._infiniteTimeWindow,n=r?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=n.length;if(this.closed)throw new A;if(this.isStopped||this.hasError?e=p.EMPTY:(this.observers.push(t),e=new O(this,t)),i&&t.add(t=new rt(t,i)),r)for(var s=0;s<o&&!t.closed;s++)t.next(n[s]);else for(s=0;s<o&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||z).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,r=this._windowTime,n=this._events,i=n.length,o=0;o<i&&!(t-n[o].time<r);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&n.splice(0,o),n},e}(P),ot=function(){return function(t,e){this.time=t,this.value=e}}(),st=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return i(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),p.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),p.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(P),at=1,ct={};var ut=function(t){var e=at++;return ct[e]=t,Promise.resolve().then((function(){return function(t){var e=ct[t];e&&e()}(e)})),e},lt=function(t){delete ct[t]},ht=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.scheduler=e,n.work=r,n}return i(e,t),e.prototype.requestAsyncId=function(e,r,n){return void 0===n&&(n=0),null!==n&&n>0?t.prototype.requestAsyncId.call(this,e,r,n):(e.actions.push(this),e.scheduled||(e.scheduled=ut(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,r,n){if(void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,r,n);0===e.actions.length&&(lt(r),e.scheduled=void 0)},e}(D),dt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,r=this.actions,n=-1,i=r.length;t=t||r.shift();do{if(e=t.execute(t.state,t.delay))break}while(++n<i&&(t=r.shift()));if(this.active=!1,e){for(;++n<i&&(t=r.shift());)t.unsubscribe();throw e}},e}(H))(ht),ft=new H(D),pt=function(t){function e(e,r){var n=t.call(this,e,r)||this;return n.scheduler=e,n.work=r,n}return i(e,t),e.prototype.requestAsyncId=function(e,r,n){return void 0===n&&(n=0),null!==n&&n>0?t.prototype.requestAsyncId.call(this,e,r,n):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame((function(){return e.flush(null)}))))},e.prototype.recycleAsyncId=function(e,r,n){if(void 0===n&&(n=0),null!==n&&n>0||null===n&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,r,n);0===e.actions.length&&(cancelAnimationFrame(r),e.scheduled=void 0)},e}(D),mt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,r=this.actions,n=-1,i=r.length;t=t||r.shift();do{if(e=t.execute(t.state,t.delay))break}while(++n<i&&(t=r.shift()));if(this.active=!1,e){for(;++n<i&&(t=r.shift());)t.unsubscribe();throw e}},e}(H))(pt),gt=function(t){function e(e,r){void 0===e&&(e=vt),void 0===r&&(r=Number.POSITIVE_INFINITY);var n=t.call(this,e,(function(){return n.frame}))||this;return n.maxFrames=r,n.frame=0,n.index=-1,n}return i(e,t),e.prototype.flush=function(){for(var t,e,r=this.actions,n=this.maxFrames;(e=r[0])&&e.delay<=n&&(r.shift(),this.frame=e.delay,!(t=e.execute(e.state,e.delay))););if(t){for(;e=r.shift();)e.unsubscribe();throw t}},e.frameTimeFactor=10,e}(H),vt=function(t){function e(e,r,n){void 0===n&&(n=e.index+=1);var i=t.call(this,e,r)||this;return i.scheduler=e,i.work=r,i.index=n,i.active=!0,i.index=e.index=n,i}return i(e,t),e.prototype.schedule=function(r,n){if(void 0===n&&(n=0),!this.id)return t.prototype.schedule.call(this,r,n);this.active=!1;var i=new e(this.scheduler,this.work);return this.add(i),i.schedule(r,n)},e.prototype.requestAsyncId=function(t,r,n){void 0===n&&(n=0),this.delay=t.frame+n;var i=t.actions;return i.push(this),i.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(t,e,r){void 0===r&&(r=0)},e.prototype._execute=function(e,r){if(!0===this.active)return t.prototype._execute.call(this,e,r)},e.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},e}(D);function bt(t){return t}function yt(t){return!!t&&(t instanceof E||"function"==typeof t.lift&&"function"==typeof t.subscribe)}function wt(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}wt.prototype=Object.create(Error.prototype);var St=wt;function _t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}_t.prototype=Object.create(Error.prototype);var xt=_t;function Et(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}Et.prototype=Object.create(Error.prototype);var Ct=Et;function Tt(t,e){return function(r){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return r.lift(new At(t,e))}}var At=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new Ot(t,this.project,this.thisArg))},t}(),Ot=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.project=r,i.count=0,i.thisArg=n||i,i}return i(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(v);function kt(t,e,r){if(e){if(!q(e))return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return kt(t,r).apply(void 0,n).pipe(Tt((function(t){return l(t)?e.apply(void 0,t):e(t)})))};r=e}return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i,o=this,s={context:o,subject:i,callbackFunc:t,scheduler:r};return new E((function(n){if(r){var a={args:e,subscriber:n,params:s};return r.schedule(Pt,0,a)}if(!i){i=new st;try{t.apply(o,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.next(t.length<=1?t[0]:t),i.complete()}]))}catch(t){y(i)?i.error(t):console.warn(t)}}return i.subscribe(n)}))}}function Pt(t){var e=this,r=t.args,n=t.subscriber,i=t.params,o=i.callbackFunc,s=i.context,a=i.scheduler,c=i.subject;if(!c){c=i.subject=new st;try{o.apply(s,r.concat([function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t.length<=1?t[0]:t;e.add(a.schedule(Mt,0,{value:n,subject:c}))}]))}catch(t){c.error(t)}}this.add(c.subscribe(n))}function Mt(t){var e=t.value,r=t.subject;r.next(e),r.complete()}function It(t,e,r){if(e){if(!q(e))return function(){for(var n=[],i=0;i<arguments.length;i++)n[i]=arguments[i];return It(t,r).apply(void 0,n).pipe(Tt((function(t){return l(t)?e.apply(void 0,t):e(t)})))};r=e}return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i={subject:void 0,args:e,callbackFunc:t,scheduler:r,context:this};return new E((function(n){var o=i.context,s=i.subject;if(r)return r.schedule(Nt,0,{params:i,subscriber:n,context:o});if(!s){s=i.subject=new st;try{t.apply(o,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t.shift();r?s.error(r):(s.next(t.length<=1?t[0]:t),s.complete())}]))}catch(t){y(s)?s.error(t):console.warn(t)}}return s.subscribe(n)}))}}function Nt(t){var e=this,r=t.params,n=t.subscriber,i=t.context,o=r.callbackFunc,s=r.args,a=r.scheduler,c=r.subject;if(!c){c=r.subject=new st;try{o.apply(i,s.concat([function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];var n=t.shift();if(n)e.add(a.schedule(Rt,0,{err:n,subject:c}));else{var i=t.length<=1?t[0]:t;e.add(a.schedule(jt,0,{value:i,subject:c}))}}]))}catch(t){this.add(a.schedule(Rt,0,{err:t,subject:c}))}}this.add(c.subscribe(n))}function jt(t){var e=t.value,r=t.subject;r.next(e),r.complete()}function Rt(t){var e=t.err;t.subject.error(e)}var Lt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.notifyNext=function(t,e,r,n,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(v),Ft=function(t){function e(e,r,n){var i=t.call(this)||this;return i.parent=e,i.outerValue=r,i.outerIndex=n,i.index=0,i}return i(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(v),Ut=function(t){return function(e){return t.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,c),e}};function Vt(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var Dt=Vt(),Bt=function(t){return function(e){for(var r=t[Dt]();;){var n=r.next();if(n.done){e.complete();break}if(e.next(n.value),e.closed)break}return"function"==typeof r.return&&e.add((function(){r.return&&r.return()})),e}},Wt=function(t){return function(e){var r=t[w]();if("function"!=typeof r.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return r.subscribe(e)}},Ht=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function zt(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var $t=function(t){if(t instanceof E)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[w])return Wt(t);if(Ht(t))return X(t);if(zt(t))return Ut(t);if(t&&"function"==typeof t[Dt])return Bt(t);var e=h(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function Yt(t,e,r,n,i){if(void 0===i&&(i=new Ft(t,r,n)),!i.closed)return $t(e)(i)}var qt={};function Gt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=null,n=null;return q(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(r=t.pop()),1===t.length&&l(t[0])&&(t=t[0]),Q(t,n).lift(new Xt(r))}var Xt=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new Qt(t,this.resultSelector))},t}(),Qt=function(t){function e(e,r){var n=t.call(this,e)||this;return n.resultSelector=r,n.active=0,n.values=[],n.observables=[],n}return i(e,t),e.prototype._next=function(t){this.values.push(qt),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var r=0;r<e;r++){var n=t[r];this.add(Yt(this,n,n,r))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,r,n,i){var o=this.values,s=o[r],a=this.toRespond?s===qt?--this.toRespond:this.toRespond:0;o[r]=e,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(Lt);function Kt(t,e){if(!e)return t instanceof E?t:new E($t(t));if(null!=t){if(function(t){return t&&"function"==typeof t[w]}(t))return function(t,e){return new E(e?function(r){var n=new p;return n.add(e.schedule((function(){var i=t[w]();n.add(i.subscribe({next:function(t){n.add(e.schedule((function(){return r.next(t)})))},error:function(t){n.add(e.schedule((function(){return r.error(t)})))},complete:function(){n.add(e.schedule((function(){return r.complete()})))}}))}))),n}:Wt(t))}(t,e);if(zt(t))return function(t,e){return new E(e?function(r){var n=new p;return n.add(e.schedule((function(){return t.then((function(t){n.add(e.schedule((function(){r.next(t),n.add(e.schedule((function(){return r.complete()})))})))}),(function(t){n.add(e.schedule((function(){return r.error(t)})))}))}))),n}:Ut(t))}(t,e);if(Ht(t))return Q(t,e);if(function(t){return t&&"function"==typeof t[Dt]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new E(e?function(r){var n,i=new p;return i.add((function(){n&&"function"==typeof n.return&&n.return()})),i.add(e.schedule((function(){n=t[Dt](),i.add(e.schedule((function(){if(!r.closed){var t,e;try{var i=n.next();t=i.value,e=i.done}catch(t){return void r.error(t)}e?r.complete():(r.next(t),this.schedule())}})))}))),i}:Bt(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}var Jt=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new Zt(t,this.project,this.concurrent))},t}(),Zt=function(t){function e(e,r,n){void 0===n&&(n=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=r,i.concurrent=n,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return i(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,r=this.index++;try{e=this.project(t,r)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,r)},e.prototype._innerSub=function(t,e,r){var n=new Ft(this,void 0,void 0);this.destination.add(n),Yt(this,t,e,r,n)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,r,n,i){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(Lt);function te(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),function t(e,r,n){return void 0===n&&(n=Number.POSITIVE_INFINITY),"function"==typeof r?function(i){return i.pipe(t((function(t,n){return Kt(e(t,n)).pipe(Tt((function(e,i){return r(t,e,n,i)})))}),n))}:("number"==typeof r&&(n=r),function(t){return t.lift(new Jt(e,n))})}(bt,t)}function ee(){return te(1)}function re(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ee()(J.apply(void 0,t))}function ne(t){return new E((function(e){var r;try{r=t()}catch(t){return void e.error(t)}return(r?Kt(r):Y()).subscribe(e)}))}function ie(){for(var t,e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&l(e[0])&&(e=e[0]),0===e.length?$:t?ie(e).pipe(Tt((function(e){return t.apply(void 0,e)}))):new E((function(t){return new oe(t,e)}))}var oe=function(t){function e(e,r){var n=t.call(this,e)||this;n.sources=r,n.completed=0,n.haveValues=0;var i=r.length;n.values=new Array(i);for(var o=0;o<i;o++){var s=Yt(n,r[o],null,o);s&&n.add(s)}return n}return i(e,t),e.prototype.notifyNext=function(t,e,r,n,i){this.values[r]=e,i._hasValue||(i._hasValue=!0,this.haveValues++)},e.prototype.notifyComplete=function(t){var e=this.destination,r=this.haveValues,n=this.values,i=n.length;t._hasValue?(this.completed++,this.completed===i&&(r===i&&e.next(n),e.complete())):e.complete()},e}(Lt);Object.prototype.toString;function se(t,e,r,n){return o(r)&&(n=r,r=void 0),n?se(t,e,r).pipe(Tt((function(t){return l(t)?n.apply(void 0,t):n(t)}))):new E((function(n){!function t(e,r,n,i,o){var s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){var a=e;e.addEventListener(r,n,o),s=function(){return a.removeEventListener(r,n,o)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){var c=e;e.on(r,n),s=function(){return c.off(r,n)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){var u=e;e.addListener(r,n),s=function(){return u.removeListener(r,n)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var l=0,h=e.length;l<h;l++)t(e[l],r,n,i,o)}i.add(s)}(t,e,(function(t){arguments.length>1?n.next(Array.prototype.slice.call(arguments)):n.next(t)}),n,r)}))}function ae(t,e,r){return r?ae(t,e).pipe(Tt((function(t){return l(t)?r.apply(void 0,t):r(t)}))):new E((function(r){var n,i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return r.next(1===t.length?t[0]:t)};try{n=t(i)}catch(t){return void r.error(t)}if(o(e))return function(){return e(i,n)}}))}function ce(t,e,r,n,i){var o,s;if(1==arguments.length){var a=t;s=a.initialState,e=a.condition,r=a.iterate,o=a.resultSelector||bt,i=a.scheduler}else void 0===n||q(n)?(s=t,o=bt,i=n):(s=t,o=n);return new E((function(t){var n=s;if(i)return i.schedule(ue,0,{subscriber:t,iterate:r,condition:e,resultSelector:o,state:n});for(;;){if(e){var a=void 0;try{a=e(n)}catch(e){return void t.error(e)}if(!a){t.complete();break}}var c=void 0;try{c=o(n)}catch(e){return void t.error(e)}if(t.next(c),t.closed)break;try{n=r(n)}catch(e){return void t.error(e)}}}))}function ue(t){var e=t.subscriber,r=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(t){return void e.error(t)}else t.needIterate=!0;if(r){var n=void 0;try{n=r(t.state)}catch(t){return void e.error(t)}if(!n)return void e.complete();if(e.closed)return}var i;try{i=t.resultSelector(t.state)}catch(t){return void e.error(t)}if(!e.closed&&(e.next(i),!e.closed))return this.schedule(t)}}function le(t,e,r){return void 0===e&&(e=$),void 0===r&&(r=$),ne((function(){return t()?e:r}))}function he(t){return!l(t)&&t-parseFloat(t)+1>=0}function de(t,e){return void 0===t&&(t=0),void 0===e&&(e=ft),(!he(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=ft),new E((function(r){return r.add(e.schedule(fe,t,{subscriber:r,counter:0,period:t})),r}))}function fe(t){var e=t.subscriber,r=t.counter,n=t.period;e.next(r),this.schedule({subscriber:e,counter:r+1,period:n},n)}function pe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=Number.POSITIVE_INFINITY,n=null,i=t[t.length-1];return q(i)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(r=t.pop())):"number"==typeof i&&(r=t.pop()),null===n&&1===t.length&&t[0]instanceof E?t[0]:te(r)(Q(t,n))}var me=new E(S);function ge(){return me}function ve(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return $;var r=t[0],n=t.slice(1);return 1===t.length&&l(r)?ve.apply(void 0,r):new E((function(t){var e=function(){return t.add(ve.apply(void 0,n).subscribe(t))};return Kt(r).subscribe({next:function(e){t.next(e)},error:e,complete:e})}))}function be(t,e){return new E(e?function(r){var n=Object.keys(t),i=new p;return i.add(e.schedule(ye,0,{keys:n,index:0,subscriber:r,subscription:i,obj:t})),i}:function(e){for(var r=Object.keys(t),n=0;n<r.length&&!e.closed;n++){var i=r[n];t.hasOwnProperty(i)&&e.next([i,t[i]])}e.complete()})}function ye(t){var e=t.keys,r=t.index,n=t.subscriber,i=t.subscription,o=t.obj;if(!n.closed)if(r<e.length){var s=e[r];n.next([s,o[s]]),i.add(this.schedule({keys:e,index:r+1,subscriber:n,subscription:i,obj:o}))}else n.complete()}function we(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!l(t[0]))return t[0];t=t[0]}return Q(t,void 0).lift(new Se)}var Se=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new _e(t))},t}(),_e=function(t){function e(e){var r=t.call(this,e)||this;return r.hasFirst=!1,r.observables=[],r.subscriptions=[],r}return i(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var r=0;r<e&&!this.hasFirst;r++){var n=t[r],i=Yt(this,n,n,r);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},e.prototype.notifyNext=function(t,e,r,n,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==r){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(e)},e}(Lt);function xe(t,e,r){return void 0===t&&(t=0),new E((function(n){void 0===e&&(e=t,t=0);var i=0,o=t;if(r)return r.schedule(Ee,0,{index:i,count:e,start:t,subscriber:n});for(;;){if(i++>=e){n.complete();break}if(n.next(o++),n.closed)break}}))}function Ee(t){var e=t.start,r=t.index,n=t.count,i=t.subscriber;r>=n?i.complete():(i.next(e),i.closed||(t.index=r+1,t.start=e+1,this.schedule(t)))}function Ce(t,e,r){void 0===t&&(t=0);var n=-1;return he(e)?n=Number(e)<1?1:Number(e):q(e)&&(r=e),q(r)||(r=ft),new E((function(e){var i=he(t)?t:+t-r.now();return r.schedule(Te,i,{index:0,period:n,subscriber:e})}))}function Te(t){var e=t.index,r=t.period,n=t.subscriber;if(n.next(e),!n.closed){if(-1===r)return n.complete();t.index=e+1,this.schedule(t,r)}}function Ae(t,e){return new E((function(r){var n,i;try{n=t()}catch(t){return void r.error(t)}try{i=e(n)}catch(t){return void r.error(t)}var o=(i?Kt(i):$).subscribe(r);return function(){o.unsubscribe(),n&&n.unsubscribe()}}))}function Oe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var r=t[t.length-1];return"function"==typeof r&&t.pop(),Q(t,void 0).lift(new ke(r))}var ke=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new Pe(t,this.resultSelector))},t}(),Pe=function(t){function e(e,r,n){void 0===n&&(n=Object.create(null));var i=t.call(this,e)||this;return i.iterators=[],i.active=0,i.resultSelector="function"==typeof r?r:null,i.values=n,i}return i(e,t),e.prototype._next=function(t){var e=this.iterators;l(t)?e.push(new Ie(t)):"function"==typeof t[Dt]?e.push(new Me(t[Dt]())):e.push(new Ne(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(var r=0;r<e;r++){var n=t[r];if(n.stillUnsubscribed)this.destination.add(n.subscribe(n,r));else this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,r=this.destination,n=0;n<e;n++){if("function"==typeof(s=t[n]).hasValue&&!s.hasValue())return}var i=!1,o=[];for(n=0;n<e;n++){var s,a=(s=t[n]).next();if(s.hasCompleted()&&(i=!0),a.done)return void r.complete();o.push(a.value)}this.resultSelector?this._tryresultSelector(o):r.next(o),i&&r.complete()},e.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(v),Me=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),Ie=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[Dt]=function(){return this},t.prototype.next=function(t){var e=this.index++,r=this.array;return e<this.length?{value:r[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),Ne=function(t){function e(e,r,n){var i=t.call(this,e)||this;return i.parent=r,i.observable=n,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return i(e,t),e.prototype[Dt]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t,e,r,n,i){this.buffer.push(e),this.parent.checkIterators()},e.prototype.subscribe=function(t,e){return Yt(this,this.observable,this,e)},e}(Lt)}]);