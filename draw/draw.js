!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){t.exports=n(1)},function(t,e,n){"use strict";n.r(e);n(2),n(11)},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(3),i=function(){function t(){}return t.prototype.init=function(e){this.mapApi=e,this.config=this._RV.getConfig("plugins").draw,this.config.language=this._RV.getCurrentLang(),this.config.url=this._RV.getConfig("services").geometryUrl,this.panelManager=new r.PanelManager(e,this.config),this.button=this.mapApi.mapI.addPluginButton(t.prototype.translations[this._RV.getCurrentLang()].menu,this.onMenuItemClick()),this.button.isActive=!0},t.prototype.onMenuItemClick=function(){var t=this;return function(){t.button.isActive=!t.button.isActive,t.panelManager.setInactive(),document.getElementsByClassName("rv-mapnav-draw-content")[0].style.display=t.button.isActive?"block":"none"}},t}();e.default=i,i.prototype.translations={"en-CA":{menu:"Draw Toolbar",picker:"Select colour",point:"Draw point",line:"Draw line",polygon:"Draw polygon",measure:"Show/Hide distances",extent:"Erase selected graphics",write:"Save graphics file",read:"Upload graphics file"},"fr-CA":{menu:"Barre de dessin",picker:"Sélectionner la couleur",point:"Dessiner point",line:"Dessiner ligne",polygon:"Dessiner polygon",measure:"Afficher/Cacher les distances",extent:"Effacer les graphiques sélectionnés",write:"Sauvegarder le fichier de graphiques",read:"Charger le fichier de graphiques"}},window.draw=i},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(4),i=n(5),o=n(7),s=n(8),a=n(10),c=function(){function t(t,e){this.mapApi=t,this.drawToolbar=new i.DrawToolbar(t,e),this.makeControls(e)}return t.prototype.setInactive=function(){this.setActive(this._controls,"point",!0)},t.prototype.makeControls=function(t){var e=this;this.angularControls(t.tools),$("rv-mapnav").prepend(this.compileTemplate(r.MAPNAV_DRAW_TOOLBAR_TEMPLATE)),-1!==t.tools.indexOf("picker")&&setTimeout((function(){var t=new o.default({parent:$("#drawiconpicker").closest(".md-icon-button")[0],color:"red",popup:"left"});$("#pathpicker")[0].style.color="red";var n=e;t.onChange=function(t){n.drawToolbar.activeColor=t.rgba;var e=t.rgbaString.substring(0,t.rgbaString.lastIndexOf(","))+",1)";$("#pathpicker")[0].style.color=e}}),0)},t.prototype.angularControls=function(t){var e=this;this.mapApi.agControllerRegister("DrawToolbarCtrl",(function(){var n=this,r={picker:{name:"picker",label:"plugins.draw.picker",icon:"M12 3c-4.97 0-9 4.03-9 9s4.03 9 9 9c.83 0 1.5-.67 1.5-1.5 0-.39-.15-.74-.39-1.01-.23-.26-.38-.61-.38-.99 0-.83.67-1.5 1.5-1.5H16c2.76 0 5-2.24 5-5 0-4.42-4.03-8-9-8zm-5.5 9c-.83 0-1.5-.67-1.5-1.5S5.67 9 6.5 9 8 9.67 8 10.5 7.33 12 6.5 12zm3-4C8.67 8 8 7.33 8 6.5S8.67 5 9.5 5s1.5.67 1.5 1.5S10.33 8 9.5 8zm5 0c-.83 0-1.5-.67-1.5-1.5S13.67 5 14.5 5s1.5.67 1.5 1.5S15.33 8 14.5 8zm3 4c-.83 0-1.5-.67-1.5-1.5S16.67 9 17.5 9s1.5.67 1.5 1.5-.67 1.5-1.5 1.5z",tooltip:"plugins.draw.picker",active:!1,createIcon:function(){e.createIcon(n.controls.picker)}},point:{name:"point",label:"plugins.draw.point",icon:"M12 7c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5z",tooltip:"plugins.draw.point",active:!1,createIcon:function(){e.createIcon(n.controls.point)},selected:function(){return n.controls.point.active},action:function(){e.setActive(n.controls,"point")}},polyline:{name:"polyline",label:"plugins.draw.line",icon:"M3.5 18.49l6-6.01 4 4L22 6.92l-1.41-1.41-7.09 7.97-4-4L2 16.99z",tooltip:"plugins.draw.line",active:!1,createIcon:function(){e.createIcon(n.controls.polyline)},selected:function(){return n.controls.polyline.active},action:function(){e.setActive(n.controls,"polyline")}},polygon:{name:"polygon",label:"plugins.draw.polygon",icon:"M2 22h20V2z",tooltip:"plugins.draw.polygon",active:!1,createIcon:function(){e.createIcon(n.controls.polygon)},selected:function(){return n.controls.polygon.active},action:function(){e.setActive(n.controls,"polygon")}},measure:{name:"measure",label:"plugins.draw.measure",iconShow:"M12 4.5C7 4.5 2.73 7.61 1 12c1.73 4.39 6 7.5 11 7.5s9.27-3.11 11-7.5c-1.73-4.39-6-7.5-11-7.5zM12 17c-2.76 0-5-2.24-5-5s2.24-5 5-5 5 2.24 5 5-2.24 5-5 5zm0-8c-1.66 0-3 1.34-3 3s1.34 3 3 3 3-1.34 3-3-1.34-3-3-3z",iconHide:"M12 7c2.76 0 5 2.24 5 5 0 .65-.13 1.26-.36 1.83l2.92 2.92c1.51-1.26 2.7-2.89 3.43-4.75-1.73-4.39-6-7.5-11-7.5-1.4 0-2.74.25-3.98.7l2.16 2.16C10.74 7.13 11.35 7 12 7zM2 4.27l2.28 2.28.46.46C3.08 8.3 1.78 10.02 1 12c1.73 4.39 6 7.5 11 7.5 1.55 0 3.03-.3 4.38-.84l.42.42L19.73 22 21 20.73 3.27 3 2 4.27zM7.53 9.8l1.55 1.55c-.05.21-.08.43-.08.65 0 1.66 1.34 3 3 3 .22 0 .44-.03.65-.08l1.55 1.55c-.67.33-1.41.53-2.2.53-2.76 0-5-2.24-5-5 0-.79.2-1.53.53-2.2zm4.31-.78l3.15 3.15.02-.16c0-1.66-1.34-3-3-3l-.17.01z",tooltip:"plugins.draw.measure",active:!0,createIcon:function(){e.createIcon(n.controls.measure,"iconShow")},action:function(){e.measure(n.controls.measure,e)}},extent:{name:"extent",label:"plugins.draw.extent",icon:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zm2.46-7.12l1.41-1.41L12 12.59l2.12-2.12 1.41 1.41L13.41 14l2.12 2.12-1.41 1.41L12 15.41l-2.12 2.12-1.41-1.41L10.59 14l-2.13-2.12zM15.5 4l-1-1h-5l-1 1H5v2h14V4z",tooltip:"plugins.draw.extent",active:!1,createIcon:function(){e.createIcon(n.controls.extent)},selected:function(){return n.controls.extent.active},action:function(){e.setActive(n.controls,"extent")}},write:{name:"write",label:"plugins.draw.write",icon:"M19 9h-4V3H9v6H5l7 7 7-7z M5 18v2h14v-2H5z",tooltip:"plugins.draw.write",active:!1,createIcon:function(){e.createIcon(n.controls.write)},action:function(){e.setActive(n.controls,"write");var t=new Blob([e.drawToolbar.exportGraphics()],{type:"application/json"});s.saveAs(t,"viewer.fgpv")}},read:{name:"read",label:"plugins.draw.read",icon:"M9 16h6v-6h4l-7-7-7 7h4z M5 18v2h14v-2H5z",tooltip:"plugins.draw.read",active:!1,createIcon:function(){e.createIcon(n.controls.read)},action:function(){e.setActive(n.controls,"read"),$(document.getElementById("rvUploadGraphics"))[0].click(),$("#rvUploadGraphics").change((function(t){$("#rvUploadGraphics").off("change");var n=new FileReader;n.addEventListener("load",(function(t){e.drawToolbar.importGraphics(JSON.parse(t.target.result))})),n.readAsText(t.target.files[0]),$("#rvUploadGraphics").val("")}))}}};this.controls={};for(var i=0,o=t;i<o.length;i++){var a=o[i];this.controls[a]=r[a]}e._controls=this.controls,e.mapApi.mapDiv.on("keydown",{controls:this.controls,draw:e.drawToolbar},(function(t){var n=t.data.draw.activeTool;if(27===window.event.which&&""!==n){var r=document.getElementsByClassName("rv-draw-"+n+"-button")[0];r.rvFocus(),r.classList.remove("rv-control-active"),e.setActive(t.data.controls,n,!0)}}))}))},t.prototype.createIcon=function(t,e){var n=void 0!==e?t[e]:t.icon;setTimeout((function(){document.getElementById("path"+t.name).setAttribute("d",n)}),0)},t.prototype.setActive=function(t,e,n){var r=void 0===n&&!t[e].active;if(Object.keys(t).forEach((function(e){return t[e].active=!1})),t[e].active=r,this.mapApi.mapDiv.off("keydown",".rv-esri-map",this.keyDownHandler),void 0!==this._mousemoveHandler&&this._mousemoveHandler.remove(),void 0!==this._mouseclickHandler&&this._mouseclickHandler.remove(),this.drawToolbar.mapPoints=[],r){document.getElementsByClassName("rv-esri-map")[0].rvFocus();var i=$(window);if(this.mapApi.mapDiv.on("keydown",".rv-esri-map",{draw:this.drawToolbar,jQwindow:i,name:e},this.keyDownHandler),"polyline"===e){var o=this;this._mousemoveHandler=this.mapApi.esriMap.on("mouse-move",a((function(t){o.mouseHandler(t,o.drawToolbar)}),50)),this._mouseclickHandler=this.mapApi.esriMap.on("click",(function(t){o.mouseHandler(t,o.drawToolbar)}))}}this.drawToolbar.activeTool=r?t[e].name:""},t.prototype.keyDownHandler=function(t){var e,n,r,i=$(".rv-target")[0];n=(e=[i.offsetWidth,i.offsetHeight])[0],r=e[1];var o=$(i).offset(),s=o.left,a=o.top;if(s+=-t.data.jQwindow.scrollLeft()+n/2,a+=-t.data.jQwindow.scrollTop()+r/2,13===t.which&&"extent"===t.data.name)t.data.draw.setExtentPoints([s,a],!1),t.data.draw.geometryLength=t.data.draw.geometryLength+1;else if(32===t.which&&"extent"===t.data.name&&t.data.draw.geometryLength>0)t.data.draw.setExtentPoints([s,a],!0);else if(13===t.which||32===t.which&&"polyline"===t.data.name&&t.data.draw.geometryLength>1||32===t.which&&"polygon"===t.data.name&&t.data.draw.geometryLength>2){var c=13===t.which?"click":"dbl-click";t.data.draw.simulateClick([s,a],c),t.data.draw.geometryLength="click"===c?t.data.draw.geometryLength+1:0}},t.prototype.mouseHandler=function(t,e){"mousemove"===t.type&&void 0!==e.mapPoints[0]?e.mapPoints=[e.mapPoints[0],t.mapPoint]:"click"===t.type&&(e.mapPoints=[t.mapPoint])},t.prototype.measure=function(t,e){t.active=!t.active;var n=t.active?"iconHide":"iconShow";e.createIcon(t,n),"iconHide"===n?e.drawToolbar.createBackground(!1):e.drawToolbar.createBackground(!0)},t.prototype.compileTemplate=function(t){var e=$(t);return this.mapApi.$compile(e),e},t}();e.PanelManager=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.MAPNAV_DRAW_TOOLBAR_TEMPLATE='\n<span class="rv-spacer"></span>\n<div class="rv-mapnav-content rv-mapnav-draw-content">\n    <div class="rv-button-group hover rv-whiteframe-z2" ng-controller="DrawToolbarCtrl as ctrl">\n        <md-button ng-repeat-start="control in ctrl.controls" name="{{ controls }}"\n            aria-label="{{ control.label | translate }}"\n            class="md-icon-button rv-button-32 rv-icon-16 rv-draw-button rv-draw-{{ control.name }}-button"\n            ng-class="{ \'rv-control-active\': control.selected() }"\n            ng-click="control.action($event)">\n            <md-tooltip md-direction="left">{{ control.tooltip | translate }}</md-tooltip>\n            <md-icon>\n                <svg xmlns="http://www.w3.org/2000/svg" fit="" height="100%" width="100%" preserveAspectRatio="xMidYMid meet" viewBox="0 0 24 24" focusable="false">\n                <g id="drawicon{{control.name}}" ng-init="control.createIcon()"><path id="path{{control.name}}" d=""></path></g></svg>\n            </md-icon>\n        </md-button>\n        \x3c!-- this will insert divider after every element except the last one --\x3e\n        <md-divider ng-if="!$last" ng-repeat-end></md-divider>\n        <input id="rvUploadGraphics" class="ng-hide" type="file" accept=".fgpv"></input>\n    </div>\n</div>\n<span class="rv-spacer"></span>\n'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=n(6),i=n(12),o=function(){function t(){this._drawPoint=new i.Subject,this._drawPolyline=new i.Subject,this._drawPolygon=new i.Subject,this._drawExtent=new i.Subject,this.drawPoint=this._drawPoint.asObservable(),this.drawPolyline=this._drawPolyline.asObservable(),this.drawPolygon=this._drawPolygon.asObservable(),this.drawExtent=this._drawExtent.asObservable()}return t.prototype.subsDrawPoint=function(t){this._drawPoint.next(t)},t.prototype.subsDrawPolyline=function(t){this._drawPolyline.next(t)},t.prototype.subsDrawPolygon=function(t){this._drawPolygon.next(t)},t.prototype.subsDrawExtent=function(t){this._drawExtent.next(t)},t}();e.DrawObs=o,window.drawObs=new o;var s=function(){function t(t,e){var n=this;return this._activeTool="",this._activeColor=[255,0,0,1],this._mapPoint=[],this._geomLength=0,this._extentPoints=[],this._showMeasure=!0,this._mapApi=t,this._config=e,this._identifyMode=this._mapApi.layersObj._identifyMode,this._showMeasure=-1!==e.tools.indexOf("measure"),window.RAMP.GAPI.esriLoadApiClasses([["esri/toolbars/draw","esriTool"],["esri/graphic","Graphic"],["esri/symbols/TextSymbol","TextSymbol"],["esri/symbols/SimpleMarkerSymbol","SimpleMarkerSymbol"],["esri/symbols/SimpleLineSymbol","SimpleLineSymbol"],["esri/symbols/SimpleFillSymbol","SimpleFillSymbol"],["esri/geometry/ScreenPoint","ScreenPoint"],["dojo/i18n!esri/nls/jsapi","i18n"],["esri/tasks/GeometryService","GeomService"],["esri/tasks/DensifyParameters","DensifyParams"],["esri/tasks/DistanceParameters","DistanceParams"],["esri/tasks/LengthsParameters","LengthParams"],["esri/tasks/AreasAndLengthsParameters","AreaParams"],["esri/geometry/Point","Point"],["esri/geometry/Polygon","Polygon"]]).then((function(t){n.initToolbar(t);n._local={point:{"en-CA":{addPoint:"Click to add a point"},"fr-CA":{addPoint:"Cliquez pour ajouter un point"}},polyline:{"en-CA":{complete:"Double-click to end line",resume:"Click to end line segment",start:"Click to start line segment"},"fr-CA":{complete:"Double-cliquez pour terminer la ligne",resume:"Cliquez pour terminer le segment de ligne",start:"Cliquez pour commencer le segment de ligne"}},polygon:{"en-CA":{complete:"Double-click to close polygon",resume:"Click to end polygon segment",start:"Click to start polygon segment"},"fr-CA":{complete:"Double-cliquez pour fermer le polygone",resume:"Cliquez pour terminer le segment de polygone",start:"Cliquez pour commencer le segment de polygone"}},extent:{"en-CA":{freehand:"Press down to start and let go to finish"},"fr-CA":{freehand:"Appuyez pour commencer et laissez aller pour finir"}}}})),this._mapApi.layersObj.addLayer("graphicsRvColl"),this._geometryService=window.RAMP.GAPI.esriBundle.GeometryService(e.url),this._geometryService.on("distance-complete",(function(t){n.outputDistance(t)})),this._geometryService.on("areas-and-lengths-complete",(function(t){n.outputAreaAndLength(t,n._activeGraphic)})),this._geometryService.on("lengths-complete",(function(t){n.outputLength(t,n._activeGraphic)})),this._geometryService.on("label-points-complete",(function(t){n.labelPoint(t,n._activeGraphic)})),r.MultiLineLayer.setMultiLine(),r.MultilineTextSymbol.setMultiLine(),this}return t.prototype.initToolbar=function(t){var e=this;this._bundle=t,this._toolbar=new this._bundle.esriTool(this._mapApi.esriMap),this._distanceParams=new this._bundle.DistanceParams,this._distanceParams.distanceUnit=this._bundle.GeomService.UNIT_KILOMETER,this._distanceParams.geodesic=!0,this._lengthParams=new this._bundle.LengthParams,this._lengthParams.lengthUnit=this._bundle.GeomService.UNIT_KILOMETER,this._lengthParams.geodesic=!0,this._areaParams=new this._bundle.AreaParams,this._areaParams.lengthUnit=this._bundle.GeomService.UNIT_KILOMETER,this._areaParams.areaUnit=this._bundle.GeomService.UNIT_SQUARE_KILOMETERS,this._areaParams.calculationType="preserveShape";this._toolbar.on("draw-complete",(function(t){e.addToMap(t)})),this._mapApi.esriMap.on("pan-end",(function(){setTimeout((function(){return e.createBackground()}),0)})),this._mapApi.esriMap.on("zoom-end",(function(){setTimeout((function(){return e.createBackground()}),0)}))},Object.defineProperty(t.prototype,"activeTool",{get:function(){return this._activeTool},set:function(t){["point","polyline","polygon","extent"].indexOf(t)>-1?(this._bundle.i18n.toolbars.draw=this._local[t][this._config.language],this._toolbar.activate(this._bundle.esriTool[t.toUpperCase()]),this.disableDetails(!0)):(this._toolbar.deactivate(),this.disableDetails(!1)),this._activeTool=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activeColor",{get:function(){return this._activeColor},set:function(t){this._activeColor=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"geometryLength",{get:function(){return this._geomLength},set:function(t){this._geomLength=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"mapPoints",{get:function(){return this._mapPoint},set:function(t){this._mapPoint=t,2===t.length&&(this._distanceParams.geometry1=t[0],this._distanceParams.geometry2=t[1],this._geometryService.distance(this._distanceParams))},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"graphicKey",{get:function(){return this._graphicKey},set:function(t){this._graphicKey=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"graphicsLayer",{get:function(){return this._mapApi.esriMap._layers.graphicsRvColl},enumerable:!0,configurable:!0}),t.prototype.importGraphics=function(t){for(var e=0,n=t;e<n.length;e++){var r=n[e],i=new this._bundle.Graphic(r);i.symbol.color=r.symbol.color,void 0!==i.symbol.outline&&(i.symbol.outline.color=r.symbol.outline.color),i.key=r.key,this.graphicsLayer.add(i)}this.createBackground()},t.prototype.exportGraphics=function(){for(var t=[],e=0,n=this.graphicsLayer.graphics;e<n.length;e++){var r=n[e];if(void 0!==r.geometry){var i=r.toJson();i.key=r.key,i.symbol.color=r.symbol.color,void 0!==i.symbol.outline&&(i.symbol.outline.color=[r.symbol.outline.color.r,r.symbol.outline.color.g,r.symbol.outline.color.b,r.symbol.outline.color.a]),t.push(i)}}return JSON.stringify(t)},t.prototype.disableDetails=function(t){this._mapApi.layersObj._identifyMode=t?[]:this._identifyMode},t.prototype.simulateClick=function(t,e){var n=this._mapApi.esriMap.toMap(new this._bundle.ScreenPoint({x:t[0],y:t[1]}));this._mapApi.esriMap.emit(e,{mapPoint:new this._bundle.Point(n.x,n.y,this._mapApi.esriMap.spatialReference)})},t.prototype.setExtentPoints=function(t,e){if(e&&1===this._extentPoints.length){var n=this._mapApi.esriMap.toMap(new this._bundle.ScreenPoint({x:t[0],y:t[1]})),r={xmin:this._extentPoints[0].x,ymin:this._extentPoints[0].y,xmax:n.x,ymax:n.y};this.deleteGraphics(r),this._extentPoints=[]}else this._extentPoints[0]=this._mapApi.esriMap.toMap(new this._bundle.ScreenPoint({x:t[0],y:t[1]}))},t.prototype.addToMap=function(t){switch(t.geometry.type){case"point":window.drawObs.subsDrawPoint(t.geometry),this.addGraphic(t.geometry,new this._bundle.SimpleMarkerSymbol);break;case"polyline":window.drawObs.subsDrawPolyline(t.geometry),this._activeGraphic=t.geometry,this._lengthParams.polylines=[t.geometry],this._geometryService.lengths(this._lengthParams),this.addGraphic(t.geometry,new this._bundle.SimpleLineSymbol);break;case"polygon":window.drawObs.subsDrawPolygon(t.geometry),this._activeGraphic=t.geometry,this._areaParams.polygons=[t.geometry],this._geometryService.areasAndLengths(this._areaParams),this.addGraphic(t.geometry,new this._bundle.SimpleFillSymbol);break;case"extent":window.drawObs.subsDrawExtent(t.geometry),this.deleteGraphics(t.geometry)}},t.prototype.addGraphic=function(t,e){e.color=this.activeColor,this.graphicKey=Math.random().toString(36).substr(2,9);var n=new this._bundle.Graphic(t,e);n.key=this.graphicKey,this.graphicsLayer.add(n),this.geometryLength=0,this.mapPoints=[]},t.prototype.deleteGraphics=function(t){var e=new this._bundle.Polygon({rings:[[[t.xmin,t.ymin],[t.xmin,t.ymax],[t.xmax,t.ymax],[t.xmax,t.ymin],[t.xmin,t.ymin]]],spatialReference:this._mapApi.fgpMapObj.spatialReference});this.geometryLength=0,this.densifyGeom(e)},t.prototype.outputDistance=function(t){for(var e=this.graphicsLayer.graphics,n=0;n<e.length;n++){var r=e[n];"tmp"===r.key&&(this.graphicsLayer.remove(r),n--)}var i=new this._bundle.Graphic(this.mapPoints[1],new this._bundle.TextSymbol(t.distance.toFixed(2)+" km"));i.key="tmp",this.graphicsLayer.add(i),this.createBackground()},t.prototype.outputAreaAndLength=function(t,e){e.area=t.result.areas[0].toFixed(2),e.length=t.result.lengths[0].toFixed(2),this._geometryService.labelPoints([e])},t.prototype.outputLength=function(t,e){var n=e.paths[0][e.paths[0].length-1],r=new this._bundle.Point(n[0],n[1],this._mapApi.esriMap.spatialReference),i=new this._bundle.Graphic(r,new this._bundle.TextSymbol(t.result.lengths[0].toFixed(2)+" km"));i.key=this.graphicKey,this.graphicsLayer.add(i),this.createBackground()},t.prototype.labelPoint=function(t,e){var n=new this._bundle.Graphic(t.geometries[0],new this._bundle.TextSymbol(e.length+" km\n"+e.area+" km²"));n.key=this.graphicKey,this.graphicsLayer.add(n),this.createBackground()},t.prototype.createBackground=function(t){$("#graphicsRvColl_layer rect").remove(),this._showMeasure=void 0!==t?t:this._showMeasure,this._showMeasure?($("#graphicsRvColl_layer text").removeClass("rv-draw-text-hide"),$("#graphicsRvColl_layer rect").removeClass("rv-draw-text-hide")):($("#graphicsRvColl_layer text").addClass("rv-draw-text-hide"),$("#graphicsRvColl_layer rect").addClass("rv-draw-text-hide"));for(var e=0,n=$("#graphicsRvColl_layer text").not(".rv-draw-text-hide").toArray();e<n.length;e++){var r=n[e],i=r.getBBox(),o=document.createElementNS("http://www.w3.org/2000/svg","rect");o.setAttribute("x",String(i.x-2)),o.setAttribute("y",String(i.y+1)),o.setAttribute("width",String(i.width+4)),o.setAttribute("height",String(i.height-2)),o.setAttribute("fill","rgba(255,255,255,0.9)"),$(o).insertBefore(r)}},t.prototype.densifyGeom=function(t){var e=this,n=new this._bundle.DensifyParams;n.geodesic=!0,n.geometries=[t],n.lengthUnit=this._geometryService.UNIT_KILOMETER,this._geometryService.densify(n,(function(t){for(var n=e.graphicsLayer.graphics,r=["tmp"],i=0,o=n;i<o.length;i++){var s=o[i];t[0].getExtent().intersects(s.geometry)&&r.push(s.key)}for(var a=0;a<n.length;a++){s=n[a];-1!==r.indexOf(s.key)&&(e.graphicsLayer.remove(s),a--)}e.createBackground()}))},t}();e.DrawToolbar=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(){}return t.setMultiLine=function(){var t=this;window.RAMP.GAPI.esriLoadApiClasses([["esri/layers/LabelLayer","LabelLayer"]]).then((function(){"function"==typeof window.esri.layers.LabelLayer.prototype._addLabel&&(window.esri.layers.LabelLayer.prototype._addLabel2=window.esri.layers.LabelLayer.prototype._addLabel,window.esri.layers.LabelLayer.prototype._addLabel=function(e,n,r,i,o,s,a){e=e.replace(/\n/g,"<br />"),t._addLabel2(e,n,r,i,o,s,a)})}))},t}();e.MultiLineLayer=r;var i=function(){function t(){}return t.setMultiLine=function(){window.RAMP.GAPI.esriLoadApiClasses([["esri/symbols/TextSymbol","TextSymbol"],["dojox/gfx/svg","svg"]]).then((function(){"function"==typeof window.dojox.gfx.svg.Text.prototype.setShape&&(window.dojox.gfx.svg.Text.prototype.setShape=function(t){this.shape=window.dojox.gfx.makeParameters(this.shape,t),this.bbox=null;var e=this.rawNode,n=this.shape;for(e.setAttribute("x",n.x),e.setAttribute("y",n.y-10),e.setAttribute("text-anchor",n.align),e.setAttribute("text-decoration",n.decoration),e.setAttribute("rotate",n.rotated?90:0),e.setAttribute("kerning",n.kerning?"auto":0),e.setAttribute("text-rendering","optimizeLegibility");e.firstChild;)e.removeChild(e.firstChild);if(t.text){var r=t.text.replace(/<br\s*\/?>/gi,"\n").split("\n"),i=1.1*parseInt(document.defaultView.getComputedStyle(e,"").getPropertyValue("font-size"),10);!isNaN(i)&&isFinite(i)||(i=15);for(var o=0,s=r.length;o<s;o++){var a=document.createElementNS?document.createElementNS(window.dojox.gfx.svg.xmlns.svg,"tspan"):document.createElement("tspan");a.setAttribute("dy",String(o?i:-(r.length-1)*i/2)),a.setAttribute("x",n.x),a.appendChild((window.dojox.gfx.useSvgWeb,document.createTextNode(r[o]))),e.appendChild(a)}}return this})}))},t}();e.MultilineTextSymbol=i},function(t,e,n){"use strict";n.r(e);var r=function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")},i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var s,a=t[Symbol.iterator]();!(r=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")};String.prototype.startsWith=String.prototype.startsWith||function(t){return 0===this.indexOf(t)},String.prototype.padStart=String.prototype.padStart||function(t,e){for(var n=this;n.length<t;)n=e+n;return n};var s={cb:"0f8ff",tqw:"aebd7",q:"-ffff",qmrn:"7fffd4",zr:"0ffff",bg:"5f5dc",bsq:"e4c4",bck:"---",nch:"ebcd",b:"--ff",bvt:"8a2be2",brwn:"a52a2a",brw:"deb887",ctb:"5f9ea0",hrt:"7fff-",chcT:"d2691e",cr:"7f50",rnw:"6495ed",crns:"8dc",crms:"dc143c",cn:"-ffff",Db:"--8b",Dcn:"-8b8b",Dgnr:"b8860b",Dgr:"a9a9a9",Dgrn:"-64-",Dkhk:"bdb76b",Dmgn:"8b-8b",Dvgr:"556b2f",Drng:"8c-",Drch:"9932cc",Dr:"8b--",Dsmn:"e9967a",Dsgr:"8fbc8f",DsTb:"483d8b",DsTg:"2f4f4f",Dtrq:"-ced1",Dvt:"94-d3",ppnk:"1493",pskb:"-bfff",mgr:"696969",grb:"1e90ff",rbrc:"b22222",rwht:"af0",stg:"228b22",chs:"-ff",gnsb:"dcdcdc",st:"8f8ff",g:"d7-",gnr:"daa520",gr:"808080",grn:"-8-0",grnw:"adff2f",hnw:"0fff0",htpn:"69b4",nnr:"cd5c5c",ng:"4b-82",vr:"0",khk:"0e68c",vnr:"e6e6fa",nrb:"0f5",wngr:"7cfc-",mnch:"acd",Lb:"add8e6",Lcr:"08080",Lcn:"e0ffff",Lgnr:"afad2",Lgr:"d3d3d3",Lgrn:"90ee90",Lpnk:"b6c1",Lsmn:"a07a",Lsgr:"20b2aa",Lskb:"87cefa",LsTg:"778899",Lstb:"b0c4de",Lw:"e0",m:"-ff-",mgrn:"32cd32",nn:"af0e6",mgnt:"-ff",mrn:"8--0",mqm:"66cdaa",mmb:"--cd",mmrc:"ba55d3",mmpr:"9370db",msg:"3cb371",mmsT:"7b68ee","":"-fa9a",mtr:"48d1cc",mmvt:"c71585",mnLb:"191970",ntc:"5fffa",mstr:"e4e1",mccs:"e4b5",vjw:"dead",nv:"--80",c:"df5e6",v:"808-0",vrb:"6b8e23",rng:"a5-",rngr:"45-",rch:"da70d6",pgnr:"eee8aa",pgrn:"98fb98",ptrq:"afeeee",pvtr:"db7093",ppwh:"efd5",pchp:"dab9",pr:"cd853f",pnk:"c0cb",pm:"dda0dd",pwrb:"b0e0e6",prp:"8-080",cc:"663399",r:"--",sbr:"bc8f8f",rb:"4169e1",sbrw:"8b4513",smn:"a8072",nbr:"4a460",sgrn:"2e8b57",ssh:"5ee",snn:"a0522d",svr:"c0c0c0",skb:"87ceeb",sTb:"6a5acd",sTgr:"708090",snw:"afa",n:"-ff7f",stb:"4682b4",tn:"d2b48c",t:"-8080",thst:"d8bfd8",tmT:"6347",trqs:"40e0d0",vt:"ee82ee",whT:"5deb3",wht:"",hts:"5f5f5",w:"-",wgrn:"9acd32"};function a(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=e>0?t.toFixed(e).replace(/0+$/,"").replace(/\.$/,""):t.toString();return n||"0"}var c=function(){function t(e,n,i,s){r(this,t);var a=this;if(void 0===e);else if(Array.isArray(e))this.rgba=e;else if(void 0===i){var c=e&&""+e;c&&function(e){if(e.startsWith("hsl")){var n=e.match(/([\-\d\.e]+)/g).map(Number),r=o(n,4),i=r[0],s=r[1],c=r[2],u=r[3];void 0===u&&(u=1),i/=360,s/=100,c/=100,a.hsla=[i,s,c,u]}else if(e.startsWith("rgb")){var l=e.match(/([\-\d\.e]+)/g).map(Number),p=o(l,4),h=p[0],d=p[1],f=p[2],b=p[3];void 0===b&&(b=1),a.rgba=[h,d,f,b]}else e.startsWith("#")?a.rgba=t.hexToRgb(e):a.rgba=t.nameToRgb(e)||t.hexToRgb(e)}(c.toLowerCase())}else this.rgba=[e,n,i,void 0===s?1:s]}return i(t,[{key:"printRGB",value:function(t){var e=(t?this.rgba:this.rgba.slice(0,3)).map((function(t,e){return a(t,3===e?3:0)}));return t?"rgba("+e+")":"rgb("+e+")"}},{key:"printHSL",value:function(t){var e=[360,100,100,1],n=["","%","%",""],r=(t?this.hsla:this.hsla.slice(0,3)).map((function(t,r){return a(t*e[r],3===r?3:1)+n[r]}));return t?"hsla("+r+")":"hsl("+r+")"}},{key:"printHex",value:function(t){var e=this.hex;return t?e:e.substring(0,7)}},{key:"rgba",get:function(){if(this._rgba)return this._rgba;if(!this._hsla)throw new Error("No color is set");return this._rgba=t.hslToRgb(this._hsla)},set:function(t){3===t.length&&(t[3]=1),this._rgba=t,this._hsla=null}},{key:"rgbString",get:function(){return this.printRGB()}},{key:"rgbaString",get:function(){return this.printRGB(!0)}},{key:"hsla",get:function(){if(this._hsla)return this._hsla;if(!this._rgba)throw new Error("No color is set");return this._hsla=t.rgbToHsl(this._rgba)},set:function(t){3===t.length&&(t[3]=1),this._hsla=t,this._rgba=null}},{key:"hslString",get:function(){return this.printHSL()}},{key:"hslaString",get:function(){return this.printHSL(!0)}},{key:"hex",get:function(){return"#"+this.rgba.map((function(t,e){return e<3?t.toString(16):Math.round(255*t).toString(16)})).map((function(t){return t.padStart(2,"0")})).join("")},set:function(e){this.rgba=t.hexToRgb(e)}}],[{key:"hexToRgb",value:function(t){var e=(t.startsWith("#")?t.slice(1):t).replace(/^(\w{3})$/,"$1F").replace(/^(\w)(\w)(\w)(\w)$/,"$1$1$2$2$3$3$4$4").replace(/^(\w{6})$/,"$1FF");if(!e.match(/^([0-9a-fA-F]{8})$/))throw new Error("Unknown hex color; "+t);var n=e.match(/^(\w\w)(\w\w)(\w\w)(\w\w)$/).slice(1).map((function(t){return parseInt(t,16)}));return n[3]=n[3]/255,n}},{key:"nameToRgb",value:function(e){var n=e.toLowerCase().replace("at","T").replace(/[aeiouyldf]/g,"").replace("ght","L").replace("rk","D").slice(-5,4),r=s[n];return void 0===r?r:t.hexToRgb(r.replace(/\-/g,"00").padStart(6,"f"))}},{key:"rgbToHsl",value:function(t){var e=o(t,4),n=e[0],r=e[1],i=e[2],s=e[3];n/=255,r/=255,i/=255;var a=Math.max(n,r,i),c=Math.min(n,r,i),u=void 0,l=void 0,p=(a+c)/2;if(a===c)u=l=0;else{var h=a-c;switch(l=p>.5?h/(2-a-c):h/(a+c),a){case n:u=(r-i)/h+(r<i?6:0);break;case r:u=(i-n)/h+2;break;case i:u=(n-r)/h+4}u/=6}return[u,l,p,s]}},{key:"hslToRgb",value:function(t){var e=o(t,4),n=e[0],r=e[1],i=e[2],s=e[3],a=void 0,c=void 0,u=void 0;if(0===r)a=c=u=i;else{var l=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},p=i<.5?i*(1+r):i+r-i*r,h=2*i-p;a=l(h,p,n+1/3),c=l(h,p,n),u=l(h,p,n-1/3)}var d=[255*a,255*c,255*u].map(Math.round);return d[3]=s,d}}]),t}(),u=function(){function t(){r(this,t),this._events=[]}return i(t,[{key:"add",value:function(t,e,n){t.addEventListener(e,n,!1),this._events.push({target:t,type:e,handler:n})}},{key:"remove",value:function(e,n,r){this._events=this._events.filter((function(i){var o=!0;return e&&e!==i.target&&(o=!1),n&&n!==i.type&&(o=!1),r&&r!==i.handler&&(o=!1),o&&t._doRemove(i.target,i.type,i.handler),!o}))}},{key:"destroy",value:function(){this._events.forEach((function(e){return t._doRemove(e.target,e.type,e.handler)})),this._events=[]}}],[{key:"_doRemove",value:function(t,e,n){t.removeEventListener(e,n,!1)}}]),t}();function l(t,e,n){var r=!1;function i(t,e,n){return Math.max(e,Math.min(t,n))}function o(t,o,s){if(s&&(r=!0),r){t.preventDefault();var a=e.getBoundingClientRect(),c=a.width,u=a.height,l=o.clientX,p=o.clientY,h=i(l-a.left,0,c),d=i(p-a.top,0,u);n(h/c,d/u)}}function s(t,e){1===(void 0===t.buttons?t.which:t.buttons)?o(t,t,e):r=!1}function a(t,e){1===t.touches.length?o(t,t.touches[0],e):r=!1}t.add(e,"mousedown",(function(t){s(t,!0)})),t.add(e,"touchstart",(function(t){a(t,!0)})),t.add(window,"mousemove",s),t.add(e,"touchmove",a),t.add(window,"mouseup",(function(t){r=!1})),t.add(e,"touchend",(function(t){r=!1})),t.add(e,"touchcancel",(function(t){r=!1}))}function p(t,e){return(e||document).querySelector(t)}function h(t){t.preventDefault(),t.stopPropagation()}function d(t,e,n,r,i){t.add(e,"keydown",(function(t){n.indexOf(t.key)>=0&&(i&&h(t),r(t))}))}var f=document.createElement("style");f.textContent=".picker_wrapper.no_alpha .picker_alpha{display:none}.picker_wrapper.no_editor .picker_editor{position:absolute;z-index:-1;opacity:0}.picker_wrapper.no_cancel .picker_cancel{display:none}.layout_default.picker_wrapper{display:-webkit-box;display:flex;-webkit-box-orient:horizontal;-webkit-box-direction:normal;flex-flow:row wrap;-webkit-box-pack:justify;justify-content:space-between;-webkit-box-align:stretch;align-items:stretch;font-size:10px;width:25em;padding:.5em}.layout_default.picker_wrapper input,.layout_default.picker_wrapper button{font-size:1rem}.layout_default.picker_wrapper>*{margin:.5em}.layout_default.picker_wrapper::before{content:'';display:block;width:100%;height:0;-webkit-box-ordinal-group:2;order:1}.layout_default .picker_slider,.layout_default .picker_selector{padding:1em}.layout_default .picker_hue{width:100%}.layout_default .picker_sl{-webkit-box-flex:1;flex:1 1 auto}.layout_default .picker_sl::before{content:'';display:block;padding-bottom:100%}.layout_default .picker_editor{-webkit-box-ordinal-group:2;order:1;width:6.5rem}.layout_default .picker_editor input{width:100%;height:100%}.layout_default .picker_sample{-webkit-box-ordinal-group:2;order:1;-webkit-box-flex:1;flex:1 1 auto}.layout_default .picker_done,.layout_default .picker_cancel{-webkit-box-ordinal-group:2;order:1}.picker_wrapper{box-sizing:border-box;background:#f2f2f2;box-shadow:0 0 0 1px silver;cursor:default;font-family:sans-serif;color:#444;pointer-events:auto}.picker_wrapper:focus{outline:none}.picker_wrapper button,.picker_wrapper input{box-sizing:border-box;border:none;box-shadow:0 0 0 1px silver;outline:none}.picker_wrapper button:focus,.picker_wrapper button:active,.picker_wrapper input:focus,.picker_wrapper input:active{box-shadow:0 0 2px 1px dodgerblue}.picker_wrapper button{padding:.4em .6em;cursor:pointer;background-color:whitesmoke;background-image:-webkit-gradient(linear, left bottom, left top, from(gainsboro), to(transparent));background-image:-webkit-linear-gradient(bottom, gainsboro, transparent);background-image:linear-gradient(0deg, gainsboro, transparent)}.picker_wrapper button:active{background-image:-webkit-gradient(linear, left bottom, left top, from(transparent), to(gainsboro));background-image:-webkit-linear-gradient(bottom, transparent, gainsboro);background-image:linear-gradient(0deg, transparent, gainsboro)}.picker_wrapper button:hover{background-color:white}.picker_selector{position:absolute;z-index:1;display:block;-webkit-transform:translate(-50%, -50%);transform:translate(-50%, -50%);border:2px solid white;border-radius:100%;box-shadow:0 0 3px 1px #67b9ff;background:currentColor;cursor:pointer}.picker_slider .picker_selector{border-radius:2px}.picker_hue{position:relative;background-image:-webkit-gradient(linear, left top, right top, from(red), color-stop(yellow), color-stop(lime), color-stop(cyan), color-stop(blue), color-stop(magenta), to(red));background-image:-webkit-linear-gradient(left, red, yellow, lime, cyan, blue, magenta, red);background-image:linear-gradient(90deg, red, yellow, lime, cyan, blue, magenta, red);box-shadow:0 0 0 1px silver}.picker_sl{position:relative;box-shadow:0 0 0 1px silver;background-image:-webkit-gradient(linear, left top, left bottom, from(white), color-stop(50%, rgba(255,255,255,0))),-webkit-gradient(linear, left bottom, left top, from(black), color-stop(50%, rgba(0,0,0,0))),-webkit-gradient(linear, left top, right top, from(gray), to(rgba(128,128,128,0)));background-image:-webkit-linear-gradient(top, white, rgba(255,255,255,0) 50%),-webkit-linear-gradient(bottom, black, rgba(0,0,0,0) 50%),-webkit-linear-gradient(left, gray, rgba(128,128,128,0));background-image:linear-gradient(180deg, white, rgba(255,255,255,0) 50%),linear-gradient(0deg, black, rgba(0,0,0,0) 50%),linear-gradient(90deg, gray, rgba(128,128,128,0))}.picker_alpha,.picker_sample{position:relative;background:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\") left top/contain white;box-shadow:0 0 0 1px silver}.picker_alpha .picker_selector,.picker_sample .picker_selector{background:none}.picker_editor input{font-family:monospace;padding:.2em .4em}.picker_sample::before{content:'';position:absolute;display:block;width:100%;height:100%;background:currentColor}.picker_arrow{position:absolute;z-index:-1}.picker_wrapper.popup{position:absolute;z-index:2;margin:1.5em}.picker_wrapper.popup,.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{background:#f2f2f2;box-shadow:0 0 10px 1px rgba(0,0,0,0.4)}.picker_wrapper.popup .picker_arrow{width:3em;height:3em;margin:0}.picker_wrapper.popup .picker_arrow::before,.picker_wrapper.popup .picker_arrow::after{content:\"\";display:block;position:absolute;top:0;left:0;z-index:-99}.picker_wrapper.popup .picker_arrow::before{width:100%;height:100%;-webkit-transform:skew(45deg);transform:skew(45deg);-webkit-transform-origin:0 100%;transform-origin:0 100%}.picker_wrapper.popup .picker_arrow::after{width:150%;height:150%;box-shadow:none}.popup.popup_top{bottom:100%;left:0}.popup.popup_top .picker_arrow{bottom:0;left:0;-webkit-transform:rotate(-90deg);transform:rotate(-90deg)}.popup.popup_bottom{top:100%;left:0}.popup.popup_bottom .picker_arrow{top:0;left:0;-webkit-transform:rotate(90deg) scale(1, -1);transform:rotate(90deg) scale(1, -1)}.popup.popup_left{top:0;right:100%}.popup.popup_left .picker_arrow{top:0;right:0;-webkit-transform:scale(-1, 1);transform:scale(-1, 1)}.popup.popup_right{top:0;left:100%}.popup.popup_right .picker_arrow{top:0;left:0}",document.documentElement.firstElementChild.appendChild(f);var b=function(){function t(e){r(this,t),this.settings={popup:"right",layout:"default",alpha:!0,editor:!0,editorFormat:"hex",cancelButton:!1},this._events=new u,this.onChange=null,this.onDone=null,this.onOpen=null,this.onClose=null,this.setOptions(e)}return i(t,[{key:"setOptions",value:function(t){var e=this;if(t){var n=this.settings;if(t instanceof HTMLElement)n.parent=t;else{n.parent&&t.parent&&n.parent!==t.parent&&(this._events.remove(n.parent),this._popupInited=!1),function(t,e,n){for(var r in t)n&&n.indexOf(r)>=0||(e[r]=t[r])}(t,n),t.onChange&&(this.onChange=t.onChange),t.onDone&&(this.onDone=t.onDone),t.onOpen&&(this.onOpen=t.onOpen),t.onClose&&(this.onClose=t.onClose);var r=t.color||t.colour;r&&this._setColor(r)}var i=n.parent;if(i&&n.popup&&!this._popupInited){var o=function(t){return e.openHandler(t)};this._events.add(i,"click",o),d(this._events,i,[" ","Spacebar","Enter"],o),this._popupInited=!0}else t.parent&&!n.popup&&this.show()}}},{key:"openHandler",value:function(t){if(this.show()){t&&t.preventDefault(),this.settings.parent.style.pointerEvents="none";var e=t&&"keydown"===t.type?this._domEdit:this.domElement;setTimeout((function(){return e.focus()}),100),this.onOpen&&this.onOpen(this.colour)}}},{key:"closeHandler",value:function(t){var e=t&&t.type,n=!1;if(t)if("mousedown"===e||"focusin"===e){var r=(this.__containedEvent||0)+100;t.timeStamp>r&&(n=!0)}else h(t),n=!0;else n=!0;n&&this.hide()&&(this.settings.parent.style.pointerEvents="","mousedown"!==e&&this.settings.parent.focus(),this.onClose&&this.onClose(this.colour))}},{key:"movePopup",value:function(t,e){this.closeHandler(),this.setOptions(t),e&&this.openHandler()}},{key:"setColor",value:function(t,e){this._setColor(t,{silent:e})}},{key:"_setColor",value:function(t,e){if("string"==typeof t&&(t=t.trim()),t){e=e||{};var n=void 0;try{n=new c(t)}catch(t){if(e.failSilently)return;throw t}if(!this.settings.alpha){var r=n.hsla;r[3]=1,n.hsla=r}this.colour=this.color=n,this._setHSLA(null,null,null,null,e)}}},{key:"setColour",value:function(t,e){this.setColor(t,e)}},{key:"show",value:function(){if(!this.settings.parent)return!1;if(this.domElement){var t=this._toggleDOM(!0);return this._setPosition(),t}var e,n,r=this.settings.template||'<div class="picker_wrapper" tabindex="-1"><div class="picker_arrow"></div><div class="picker_hue picker_slider"><div class="picker_selector"></div></div><div class="picker_sl"><div class="picker_selector"></div></div><div class="picker_alpha picker_slider"><div class="picker_selector"></div></div><div class="picker_editor"><input aria-label="Type a color name or hex value"/></div><div class="picker_sample"></div><div class="picker_done"><button>Ok</button></div><div class="picker_cancel"><button>Cancel</button></div></div>',i=(e=r,(n=document.createElement("div")).innerHTML=e,n.firstElementChild);return this.domElement=i,this._domH=p(".picker_hue",i),this._domSL=p(".picker_sl",i),this._domA=p(".picker_alpha",i),this._domEdit=p(".picker_editor input",i),this._domSample=p(".picker_sample",i),this._domOkay=p(".picker_done button",i),this._domCancel=p(".picker_cancel button",i),i.classList.add("layout_"+this.settings.layout),this.settings.alpha||i.classList.add("no_alpha"),this.settings.editor||i.classList.add("no_editor"),this.settings.cancelButton||i.classList.add("no_cancel"),this._ifPopup((function(){return i.classList.add("popup")})),this._setPosition(),this.colour?this._updateUI():this._setColor("#0cf"),this._bindEvents(),!0}},{key:"hide",value:function(){return this._toggleDOM(!1)}},{key:"destroy",value:function(){this._events.destroy(),this.domElement&&this.settings.parent.removeChild(this.domElement)}},{key:"_bindEvents",value:function(){var t=this,e=this,n=this.domElement,r=this._events;function i(t,e,n){r.add(t,e,n)}i(n,"click",(function(t){return t.preventDefault()})),l(r,this._domH,(function(t,n){return e._setHSLA(t)})),l(r,this._domSL,(function(t,n){return e._setHSLA(null,t,1-n)})),this.settings.alpha&&l(r,this._domA,(function(t,n){return e._setHSLA(null,null,null,1-n)}));var o=this._domEdit;i(o,"input",(function(t){e._setColor(this.value,{fromEditor:!0,failSilently:!0})})),i(o,"focus",(function(t){this.selectionStart===this.selectionEnd&&this.select()})),this._ifPopup((function(){var e=function(e){return t.closeHandler(e)};i(window,"mousedown",e),i(window,"focusin",e),d(r,n,["Esc","Escape"],e);var o=function(e){t.__containedEvent=e.timeStamp};i(n,"mousedown",o),i(n,"focusin",o),i(t._domCancel,"click",e)}));var s=function(e){t._ifPopup((function(){return t.closeHandler(e)})),t.onDone&&t.onDone(t.colour)};i(this._domOkay,"click",s),d(r,n,["Enter"],s)}},{key:"_setPosition",value:function(){var t=this.settings.parent,e=this.domElement;t!==e.parentNode&&t.appendChild(e),this._ifPopup((function(n){"static"===getComputedStyle(t).position&&(t.style.position="relative");var r=!0===n?"popup_right":"popup_"+n;["popup_top","popup_bottom","popup_left","popup_right"].forEach((function(t){t===r?e.classList.add(t):e.classList.remove(t)})),e.classList.add(r)}))}},{key:"_setHSLA",value:function(t,e,n,r,i){i=i||{};var o=this.colour,s=o.hsla;[t,e,n,r].forEach((function(t,e){(t||0===t)&&(s[e]=t)})),o.hsla=s,this._updateUI(i),this.onChange&&!i.silent&&this.onChange(o)}},{key:"_updateUI",value:function(t){if(this.domElement){t=t||{};var e=this.colour,n=e.hsla,r="hsl("+360*n[0]+", 100%, 50%)",i=e.hslString,o=e.hslaString,s=this._domH,a=this._domSL,c=this._domA,u=p(".picker_selector",s),l=p(".picker_selector",a),h=p(".picker_selector",c);g(0,u,n[0]),this._domSL.style.backgroundColor=this._domH.style.color=r,g(0,l,n[1]),w(0,l,1-n[2]),a.style.color=i,w(0,h,1-n[3]);var d=i,f=d.replace("hsl","hsla").replace(")",", 0)"),b="linear-gradient("+[d,f]+")";if(this._domA.style.backgroundImage=b+", url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='2' height='2'%3E%3Cpath d='M1,0H0V1H2V2H1' fill='lightgrey'/%3E%3C/svg%3E\")",!t.fromEditor){var v=this.settings.editorFormat,y=this.settings.alpha,m=void 0;switch(v){case"rgb":m=e.printRGB(y);break;case"hsl":m=e.printHSL(y);break;default:m=e.printHex(y)}this._domEdit.value=m}this._domSample.style.color=o}function g(t,e,n){e.style.left=100*n+"%"}function w(t,e,n){e.style.top=100*n+"%"}}},{key:"_ifPopup",value:function(t,e){this.settings.parent&&this.settings.popup?t&&t(this.settings.popup):e&&e()}},{key:"_toggleDOM",value:function(t){var e=this.domElement;if(!e)return!1;var n=t?"":"none",r=e.style.display!==n;return r&&(e.style.display=n),r}}],[{key:"StyleElement",get:function(){return f}}]),t}();e.default=b},function(t,e,n){(function(n){var r,i,o;i=[],void 0===(o="function"==typeof(r=function(){"use strict";function e(t,e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){s(r.response,e,n)},r.onerror=function(){console.error("could not download file")},r.send()}function r(t){var e=new XMLHttpRequest;return e.open("HEAD",t,!1),e.send(),200<=e.status&&299>=e.status}function i(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(n){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var o="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof n&&n.global===n?n:void 0,s=o.saveAs||"object"!=typeof window||window!==o?function(){}:"download"in HTMLAnchorElement.prototype?function(t,n,s){var a=o.URL||o.webkitURL,c=document.createElement("a");n=n||t.name||"download",c.download=n,c.rel="noopener","string"==typeof t?(c.href=t,c.origin===location.origin?i(c):r(c.href)?e(t,n,s):i(c,c.target="_blank")):(c.href=a.createObjectURL(t),setTimeout((function(){a.revokeObjectURL(c.href)}),4e4),setTimeout((function(){i(c)}),0))}:"msSaveOrOpenBlob"in navigator?function(t,n,o){if(n=n||t.name||"download","string"!=typeof t)navigator.msSaveOrOpenBlob(function(t,e){return void 0===e?e={autoBom:!1}:"object"!=typeof e&&(console.warn("Depricated: Expected third argument to be a object"),e={autoBom:!e}),e.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\ufeff",t],{type:t.type}):t}(t,o),n);else if(r(t))e(t,n,o);else{var s=document.createElement("a");s.href=t,s.target="_blank",setTimeout((function(){i(s)}))}}:function(t,n,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),"string"==typeof t)return e(t,n,r);var s="application/octet-stream"===t.type,a=/constructor/i.test(o.HTMLElement)||o.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||s&&a)&&"object"==typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=c?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=t:location=t,i=null},u.readAsDataURL(t)}else{var l=o.URL||o.webkitURL,p=l.createObjectURL(t);i?i.location=p:location.href=p,i=null,setTimeout((function(){l.revokeObjectURL(p)}),4e4)}};o.saveAs=s.saveAs=s,t.exports=s})?r.apply(e,i):r)||(t.exports=o)}).call(this,n(9))},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e){function n(t,e,n){var r,i,o,s,a;function c(){var u=Date.now()-s;u<e&&u>=0?r=setTimeout(c,e-u):(r=null,n||(a=t.apply(o,i),o=i=null))}null==e&&(e=100);var u=function(){o=this,i=arguments,s=Date.now();var u=n&&!r;return r||(r=setTimeout(c,e)),u&&(a=t.apply(o,i),o=i=null),a};return u.clear=function(){r&&(clearTimeout(r),r=null)},u.flush=function(){r&&(a=t.apply(o,i),o=i=null,clearTimeout(r),r=null)},u}n.debounce=n,t.exports=n},function(t,e,n){},function(t,e,n){"use strict";n.r(e);
/*! *****************************************************************************
Copyright (c) Microsoft Corporation. All rights reserved.
Licensed under the Apache License, Version 2.0 (the "License"); you may not use
this file except in compliance with the License. You may obtain a copy of the
License at http://www.apache.org/licenses/LICENSE-2.0

THIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
KIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED
WARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,
MERCHANTABLITY OR NON-INFRINGEMENT.

See the Apache Version 2.0 License for specific language governing permissions
and limitations under the License.
***************************************************************************** */
var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)};function i(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}function o(t){return"function"==typeof t}var s=!1,a={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){t&&(new Error).stack;s=t},get useDeprecatedSynchronousErrorHandling(){return s}};function c(t){setTimeout((function(){throw t}))}var u={closed:!0,next:function(t){},error:function(t){if(a.useDeprecatedSynchronousErrorHandling)throw t;c(t)},complete:function(){}},l=Array.isArray||function(t){return t&&"number"==typeof t.length};function p(t){return null!==t&&"object"==typeof t}function h(t){return Error.call(this),this.message=t?t.length+" errors occurred during unsubscription:\n"+t.map((function(t,e){return e+1+") "+t.toString()})).join("\n  "):"",this.name="UnsubscriptionError",this.errors=t,this}h.prototype=Object.create(Error.prototype);var d=h,f=function(){function t(t){this.closed=!1,this._parent=null,this._parents=null,this._subscriptions=null,t&&(this._unsubscribe=t)}return t.prototype.unsubscribe=function(){var t,e=!1;if(!this.closed){var n=this._parent,r=this._parents,i=this._unsubscribe,s=this._subscriptions;this.closed=!0,this._parent=null,this._parents=null,this._subscriptions=null;for(var a=-1,c=r?r.length:0;n;)n.remove(this),n=++a<c&&r[a]||null;if(o(i))try{i.call(this)}catch(n){e=!0,t=n instanceof d?b(n.errors):[n]}if(l(s))for(a=-1,c=s.length;++a<c;){var u=s[a];if(p(u))try{u.unsubscribe()}catch(n){e=!0,t=t||[],n instanceof d?t=t.concat(b(n.errors)):t.push(n)}}if(e)throw new d(t)}},t.prototype.add=function(e){var n=e;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){var r=n;(n=new t)._subscriptions=[r]}break;default:if(!e)return t.EMPTY;throw new Error("unrecognized teardown "+e+" added to Subscription.")}if(n._addParent(this)){var i=this._subscriptions;i?i.push(n):this._subscriptions=[n]}return n},t.prototype.remove=function(t){var e=this._subscriptions;if(e){var n=e.indexOf(t);-1!==n&&e.splice(n,1)}},t.prototype._addParent=function(t){var e=this._parent,n=this._parents;return e!==t&&(e?n?-1===n.indexOf(t)&&(n.push(t),!0):(this._parents=[t],!0):(this._parent=t,!0))},t.EMPTY=function(t){return t.closed=!0,t}(new t),t}();function b(t){return t.reduce((function(t,e){return t.concat(e instanceof d?e.errors:e)}),[])}var v="function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random(),y=function(t){function e(n,r,i){var o=t.call(this)||this;switch(o.syncErrorValue=null,o.syncErrorThrown=!1,o.syncErrorThrowable=!1,o.isStopped=!1,arguments.length){case 0:o.destination=u;break;case 1:if(!n){o.destination=u;break}if("object"==typeof n){n instanceof e?(o.syncErrorThrowable=n.syncErrorThrowable,o.destination=n,n.add(o)):(o.syncErrorThrowable=!0,o.destination=new m(o,n));break}default:o.syncErrorThrowable=!0,o.destination=new m(o,n,r,i)}return o}return i(e,t),e.prototype[v]=function(){return this},e.create=function(t,n,r){var i=new e(t,n,r);return i.syncErrorThrowable=!1,i},e.prototype.next=function(t){this.isStopped||this._next(t)},e.prototype.error=function(t){this.isStopped||(this.isStopped=!0,this._error(t))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this))},e.prototype._next=function(t){this.destination.next(t)},e.prototype._error=function(t){this.destination.error(t),this.unsubscribe()},e.prototype._complete=function(){this.destination.complete(),this.unsubscribe()},e.prototype._unsubscribeAndRecycle=function(){var t=this._parent,e=this._parents;return this._parent=null,this._parents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parent=t,this._parents=e,this},e}(f),m=function(t){function e(e,n,r,i){var s,a=t.call(this)||this;a._parentSubscriber=e;var c=a;return o(n)?s=n:n&&(s=n.next,r=n.error,i=n.complete,n!==u&&(o((c=Object.create(n)).unsubscribe)&&a.add(c.unsubscribe.bind(c)),c.unsubscribe=a.unsubscribe.bind(a))),a._context=c,a._next=s,a._error=r,a._complete=i,a}return i(e,t),e.prototype.next=function(t){if(!this.isStopped&&this._next){var e=this._parentSubscriber;a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}},e.prototype.error=function(t){if(!this.isStopped){var e=this._parentSubscriber,n=a.useDeprecatedSynchronousErrorHandling;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):c(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;c(t)}}},e.prototype.complete=function(){var t=this;if(!this.isStopped){var e=this._parentSubscriber;if(this._complete){var n=function(){return t._complete.call(t._context)};a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?(this.__tryOrSetError(e,n),this.unsubscribe()):(this.__tryOrUnsub(n),this.unsubscribe())}else this.unsubscribe()}},e.prototype.__tryOrUnsub=function(t,e){try{t.call(this._context,e)}catch(t){if(this.unsubscribe(),a.useDeprecatedSynchronousErrorHandling)throw t;c(t)}},e.prototype.__tryOrSetError=function(t,e,n){if(!a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(e){return a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=e,t.syncErrorThrown=!0,!0):(c(e),!0)}return!1},e.prototype._unsubscribe=function(){var t=this._parentSubscriber;this._context=null,this._parentSubscriber=null,t.unsubscribe()},e}(y);function g(t){for(;t;){var e=t,n=e.closed,r=e.destination,i=e.isStopped;if(n||i)return!1;t=r&&r instanceof y?r:null}return!0}var w="function"==typeof Symbol&&Symbol.observable||"@@observable";function _(){}function x(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return k(t)}function k(t){return t?1===t.length?t[0]:function(e){return t.reduce((function(t,e){return e(t)}),e)}:_}var S=function(){function t(t){this._isScalar=!1,t&&(this._subscribe=t)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(t,e,n){var r=this.operator,i=function(t,e,n){if(t){if(t instanceof y)return t;if(t[v])return t[v]()}return t||e||n?new y(t,e,n):new y(u)}(t,e,n);if(r?i.add(r.call(i,this.source)):i.add(this.source||a.useDeprecatedSynchronousErrorHandling&&!i.syncErrorThrowable?this._subscribe(i):this._trySubscribe(i)),a.useDeprecatedSynchronousErrorHandling&&i.syncErrorThrowable&&(i.syncErrorThrowable=!1,i.syncErrorThrown))throw i.syncErrorValue;return i},t.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(e){a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),g(t)?t.error(e):console.warn(e)}},t.prototype.forEach=function(t,e){var n=this;return new(e=E(e))((function(e,r){var i;i=n.subscribe((function(e){try{t(e)}catch(t){r(t),i&&i.unsubscribe()}}),r,e)}))},t.prototype._subscribe=function(t){var e=this.source;return e&&e.subscribe(t)},t.prototype[w]=function(){return this},t.prototype.pipe=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return 0===t.length?this:k(t)(this)},t.prototype.toPromise=function(t){var e=this;return new(t=E(t))((function(t,n){var r;e.subscribe((function(t){return r=t}),(function(t){return n(t)}),(function(){return t(r)}))}))},t.create=function(e){return new t(e)},t}();function E(t){if(t||(t=a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}function T(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}T.prototype=Object.create(Error.prototype);var P=T,A=function(t){function e(e,n){var r=t.call(this)||this;return r.subject=e,r.subscriber=n,r.closed=!1,r}return i(e,t),e.prototype.unsubscribe=function(){if(!this.closed){this.closed=!0;var t=this.subject,e=t.observers;if(this.subject=null,e&&0!==e.length&&!t.isStopped&&!t.closed){var n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},e}(f),C=function(t){function e(e){var n=t.call(this,e)||this;return n.destination=e,n}return i(e,t),e}(y),L=function(t){function e(){var e=t.call(this)||this;return e.observers=[],e.closed=!1,e.isStopped=!1,e.hasError=!1,e.thrownError=null,e}return i(e,t),e.prototype[v]=function(){return new C(this)},e.prototype.lift=function(t){var e=new I(this,this);return e.operator=t,e},e.prototype.next=function(t){if(this.closed)throw new P;if(!this.isStopped)for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].next(t)},e.prototype.error=function(t){if(this.closed)throw new P;this.hasError=!0,this.thrownError=t,this.isStopped=!0;for(var e=this.observers,n=e.length,r=e.slice(),i=0;i<n;i++)r[i].error(t);this.observers.length=0},e.prototype.complete=function(){if(this.closed)throw new P;this.isStopped=!0;for(var t=this.observers,e=t.length,n=t.slice(),r=0;r<e;r++)n[r].complete();this.observers.length=0},e.prototype.unsubscribe=function(){this.isStopped=!0,this.closed=!0,this.observers=null},e.prototype._trySubscribe=function(e){if(this.closed)throw new P;return t.prototype._trySubscribe.call(this,e)},e.prototype._subscribe=function(t){if(this.closed)throw new P;return this.hasError?(t.error(this.thrownError),f.EMPTY):this.isStopped?(t.complete(),f.EMPTY):(this.observers.push(t),new A(this,t))},e.prototype.asObservable=function(){var t=new S;return t.source=this,t},e.create=function(t,e){return new I(t,e)},e}(S),I=function(t){function e(e,n){var r=t.call(this)||this;return r.destination=e,r.source=n,r}return i(e,t),e.prototype.next=function(t){var e=this.destination;e&&e.next&&e.next(t)},e.prototype.error=function(t){var e=this.destination;e&&e.error&&this.destination.error(t)},e.prototype.complete=function(){var t=this.destination;t&&t.complete&&this.destination.complete()},e.prototype._subscribe=function(t){return this.source?this.source.subscribe(t):f.EMPTY},e}(L);var O=function(){function t(t){this.connectable=t}return t.prototype.call=function(t,e){var n=this.connectable;n._refCount++;var r=new j(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i},t}(),j=function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return i(e,t),e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._refCount;if(e<=0)this.connection=null;else if(t._refCount=e-1,e>1)this.connection=null;else{var n=this.connection,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}else this.connection=null},e}(y),M=function(t){function e(e,n){var r=t.call(this)||this;return r.source=e,r.subjectFactory=n,r._refCount=0,r._isComplete=!1,r}return i(e,t),e.prototype._subscribe=function(t){return this.getSubject().subscribe(t)},e.prototype.getSubject=function(){var t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject},e.prototype.connect=function(){var t=this._connection;return t||(this._isComplete=!1,(t=this._connection=new f).add(this.source.subscribe(new N(this.getSubject(),this))),t.closed?(this._connection=null,t=f.EMPTY):this._connection=t),t},e.prototype.refCount=function(){return(t=this).lift(new O(t));var t},e}(S),D=M.prototype,N=(D._subscribe,D._isComplete,D.getSubject,D.connect,D.refCount,function(t){function e(e,n){var r=t.call(this,e)||this;return r.connectable=n,r}return i(e,t),e.prototype._error=function(e){this._unsubscribe(),t.prototype._error.call(this,e)},e.prototype._complete=function(){this.connectable._isComplete=!0,this._unsubscribe(),t.prototype._complete.call(this)},e.prototype._unsubscribe=function(){var t=this.connectable;if(t){this.connectable=null;var e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}},e}(C));var R=function(t){function e(e,n,r){var i=t.call(this)||this;return i.key=e,i.groupSubject=n,i.refCountSubscription=r,i}return i(e,t),e.prototype._subscribe=function(t){var e=new f,n=this.refCountSubscription,r=this.groupSubject;return n&&!n.closed&&e.add(new H(n)),e.add(r.subscribe(t)),e},e}(S),H=function(t){function e(e){var n=t.call(this)||this;return n.parent=e,e.count++,n}return i(e,t),e.prototype.unsubscribe=function(){var e=this.parent;e.closed||this.closed||(t.prototype.unsubscribe.call(this),e.count-=1,0===e.count&&e.attemptedToUnsubscribe&&e.unsubscribe())},e}(f),z=function(t){function e(e){var n=t.call(this)||this;return n._value=e,n}return i(e,t),Object.defineProperty(e.prototype,"value",{get:function(){return this.getValue()},enumerable:!0,configurable:!0}),e.prototype._subscribe=function(e){var n=t.prototype._subscribe.call(this,e);return n&&!n.closed&&e.next(this._value),n},e.prototype.getValue=function(){if(this.hasError)throw this.thrownError;if(this.closed)throw new P;return this._value},e.prototype.next=function(e){t.prototype.next.call(this,this._value=e)},e}(L),V=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r.pending=!1,r}return i(e,t),e.prototype.schedule=function(t,e){if(void 0===e&&(e=0),this.closed)return this;this.state=t;var n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this},e.prototype.requestAsyncId=function(t,e,n){return void 0===n&&(n=0),setInterval(t.flush.bind(t,this),n)},e.prototype.recycleAsyncId=function(t,e,n){if(void 0===n&&(n=0),null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)},e.prototype.execute=function(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;var n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))},e.prototype._execute=function(t,e){var n=!1,r=void 0;try{this.work(t)}catch(t){n=!0,r=!!t&&t||new Error(t)}if(n)return this.unsubscribe(),r},e.prototype._unsubscribe=function(){var t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null},e}(function(t){function e(e,n){return t.call(this)||this}return i(e,t),e.prototype.schedule=function(t,e){return void 0===e&&(e=0),this},e}(f)),G=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return i(e,t),e.prototype.schedule=function(e,n){return void 0===n&&(n=0),n>0?t.prototype.schedule.call(this,e,n):(this.delay=n,this.state=e,this.scheduler.flush(this),this)},e.prototype.execute=function(e,n){return n>0||this.closed?t.prototype.execute.call(this,e,n):this._execute(e,n)},e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0?t.prototype.requestAsyncId.call(this,e,n,r):e.flush(this)},e}(V),F=function(){function t(e,n){void 0===n&&(n=t.now),this.SchedulerAction=e,this.now=n}return t.prototype.schedule=function(t,e,n){return void 0===e&&(e=0),new this.SchedulerAction(this,t).schedule(n,e)},t.now=function(){return Date.now()},t}(),U=function(t){function e(n,r){void 0===r&&(r=F.now);var i=t.call(this,n,(function(){return e.delegate&&e.delegate!==i?e.delegate.now():r()}))||this;return i.actions=[],i.active=!1,i.scheduled=void 0,i}return i(e,t),e.prototype.schedule=function(n,r,i){return void 0===r&&(r=0),e.delegate&&e.delegate!==this?e.delegate.schedule(n,r,i):t.prototype.schedule.call(this,n,r,i)},e.prototype.flush=function(t){var e=this.actions;if(this.active)e.push(t);else{var n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}},e}(F),B=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e}(U))(G),$=new S((function(t){return t.complete()}));function q(t){return t?function(t){return new S((function(e){return t.schedule((function(){return e.complete()}))}))}(t):$}function Y(t){return t&&"function"==typeof t.schedule}var W,K=function(t){return function(e){for(var n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.closed||e.complete()}};function J(t,e){return new S(e?function(n){var r=new f,i=0;return r.add(e.schedule((function(){i!==t.length?(n.next(t[i++]),n.closed||r.add(this.schedule())):n.complete()}))),r}:K(t))}function Q(t){var e=new S((function(e){e.next(t),e.complete()}));return e._isScalar=!0,e.value=t,e}function X(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];switch(Y(n)?t.pop():n=void 0,t.length){case 0:return q(n);case 1:return n?J(t,n):Q(t[0]);default:return J(t,n)}}function Z(t,e){return new S(e?function(n){return e.schedule(tt,0,{error:t,subscriber:n})}:function(e){return e.error(t)})}function tt(t){var e=t.error;t.subscriber.error(e)}W||(W={});var et=function(){function t(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}return t.prototype.observe=function(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}},t.prototype.do=function(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}},t.prototype.accept=function(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)},t.prototype.toObservable=function(){switch(this.kind){case"N":return X(this.value);case"E":return Z(this.error);case"C":return q()}throw new Error("unexpected notification kind value")},t.createNext=function(e){return void 0!==e?new t("N",e):t.undefinedValueNotification},t.createError=function(e){return new t("E",void 0,e)},t.createComplete=function(){return t.completeNotification},t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t}();var nt=function(t){function e(e,n,r){void 0===r&&(r=0);var i=t.call(this,e)||this;return i.scheduler=n,i.delay=r,i}return i(e,t),e.dispatch=function(t){var e=t.notification,n=t.destination;e.observe(n),this.unsubscribe()},e.prototype.scheduleMessage=function(t){this.destination.add(this.scheduler.schedule(e.dispatch,this.delay,new rt(t,this.destination)))},e.prototype._next=function(t){this.scheduleMessage(et.createNext(t))},e.prototype._error=function(t){this.scheduleMessage(et.createError(t)),this.unsubscribe()},e.prototype._complete=function(){this.scheduleMessage(et.createComplete()),this.unsubscribe()},e}(y),rt=function(){return function(t,e){this.notification=t,this.destination=e}}(),it=function(t){function e(e,n,r){void 0===e&&(e=Number.POSITIVE_INFINITY),void 0===n&&(n=Number.POSITIVE_INFINITY);var i=t.call(this)||this;return i.scheduler=r,i._events=[],i._infiniteTimeWindow=!1,i._bufferSize=e<1?1:e,i._windowTime=n<1?1:n,n===Number.POSITIVE_INFINITY?(i._infiniteTimeWindow=!0,i.next=i.nextInfiniteTimeWindow):i.next=i.nextTimeWindow,i}return i(e,t),e.prototype.nextInfiniteTimeWindow=function(e){var n=this._events;n.push(e),n.length>this._bufferSize&&n.shift(),t.prototype.next.call(this,e)},e.prototype.nextTimeWindow=function(e){this._events.push(new ot(this._getNow(),e)),this._trimBufferThenGetEvents(),t.prototype.next.call(this,e)},e.prototype._subscribe=function(t){var e,n=this._infiniteTimeWindow,r=n?this._events:this._trimBufferThenGetEvents(),i=this.scheduler,o=r.length;if(this.closed)throw new P;if(this.isStopped||this.hasError?e=f.EMPTY:(this.observers.push(t),e=new A(this,t)),i&&t.add(t=new nt(t,i)),n)for(var s=0;s<o&&!t.closed;s++)t.next(r[s]);else for(s=0;s<o&&!t.closed;s++)t.next(r[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),e},e.prototype._getNow=function(){return(this.scheduler||B).now()},e.prototype._trimBufferThenGetEvents=function(){for(var t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length,o=0;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r},e}(L),ot=function(){return function(t,e){this.time=t,this.value=e}}(),st=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.value=null,e.hasNext=!1,e.hasCompleted=!1,e}return i(e,t),e.prototype._subscribe=function(e){return this.hasError?(e.error(this.thrownError),f.EMPTY):this.hasCompleted&&this.hasNext?(e.next(this.value),e.complete(),f.EMPTY):t.prototype._subscribe.call(this,e)},e.prototype.next=function(t){this.hasCompleted||(this.value=t,this.hasNext=!0)},e.prototype.error=function(e){this.hasCompleted||t.prototype.error.call(this,e)},e.prototype.complete=function(){this.hasCompleted=!0,this.hasNext&&t.prototype.next.call(this,this.value),t.prototype.complete.call(this)},e}(L),at=1,ct={};var ut=function(t){var e=at++;return ct[e]=t,Promise.resolve().then((function(){return function(t){var e=ct[t];e&&e()}(e)})),e},lt=function(t){delete ct[t]},pt=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return i(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=ut(e.flush.bind(e,null))))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(lt(n),e.scheduled=void 0)},e}(V),ht=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(U))(pt),dt=new U(V),ft=function(t){function e(e,n){var r=t.call(this,e,n)||this;return r.scheduler=e,r.work=n,r}return i(e,t),e.prototype.requestAsyncId=function(e,n,r){return void 0===r&&(r=0),null!==r&&r>0?t.prototype.requestAsyncId.call(this,e,n,r):(e.actions.push(this),e.scheduled||(e.scheduled=requestAnimationFrame((function(){return e.flush(null)}))))},e.prototype.recycleAsyncId=function(e,n,r){if(void 0===r&&(r=0),null!==r&&r>0||null===r&&this.delay>0)return t.prototype.recycleAsyncId.call(this,e,n,r);0===e.actions.length&&(cancelAnimationFrame(n),e.scheduled=void 0)},e}(V),bt=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.flush=function(t){this.active=!0,this.scheduled=void 0;var e,n=this.actions,r=-1,i=n.length;t=t||n.shift();do{if(e=t.execute(t.state,t.delay))break}while(++r<i&&(t=n.shift()));if(this.active=!1,e){for(;++r<i&&(t=n.shift());)t.unsubscribe();throw e}},e}(U))(ft),vt=function(t){function e(e,n){void 0===e&&(e=yt),void 0===n&&(n=Number.POSITIVE_INFINITY);var r=t.call(this,e,(function(){return r.frame}))||this;return r.maxFrames=n,r.frame=0,r.index=-1,r}return i(e,t),e.prototype.flush=function(){for(var t,e,n=this.actions,r=this.maxFrames;(e=n[0])&&e.delay<=r&&(n.shift(),this.frame=e.delay,!(t=e.execute(e.state,e.delay))););if(t){for(;e=n.shift();)e.unsubscribe();throw t}},e.frameTimeFactor=10,e}(U),yt=function(t){function e(e,n,r){void 0===r&&(r=e.index+=1);var i=t.call(this,e,n)||this;return i.scheduler=e,i.work=n,i.index=r,i.active=!0,i.index=e.index=r,i}return i(e,t),e.prototype.schedule=function(n,r){if(void 0===r&&(r=0),!this.id)return t.prototype.schedule.call(this,n,r);this.active=!1;var i=new e(this.scheduler,this.work);return this.add(i),i.schedule(n,r)},e.prototype.requestAsyncId=function(t,n,r){void 0===r&&(r=0),this.delay=t.frame+r;var i=t.actions;return i.push(this),i.sort(e.sortActions),!0},e.prototype.recycleAsyncId=function(t,e,n){void 0===n&&(n=0)},e.prototype._execute=function(e,n){if(!0===this.active)return t.prototype._execute.call(this,e,n)},e.sortActions=function(t,e){return t.delay===e.delay?t.index===e.index?0:t.index>e.index?1:-1:t.delay>e.delay?1:-1},e}(V);function mt(t){return t}function gt(t){return!!t&&(t instanceof S||"function"==typeof t.lift&&"function"==typeof t.subscribe)}function wt(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}wt.prototype=Object.create(Error.prototype);var _t=wt;function xt(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}xt.prototype=Object.create(Error.prototype);var kt=xt;function St(){return Error.call(this),this.message="Timeout has occurred",this.name="TimeoutError",this}St.prototype=Object.create(Error.prototype);var Et=St;function Tt(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new Pt(t,e))}}var Pt=function(){function t(t,e){this.project=t,this.thisArg=e}return t.prototype.call=function(t,e){return e.subscribe(new At(t,this.project,this.thisArg))},t}(),At=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.project=n,i.count=0,i.thisArg=r||i,i}return i(e,t),e.prototype._next=function(t){var e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(y);function Ct(t,e,n){if(e){if(!Y(e))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return Ct(t,n).apply(void 0,r).pipe(Tt((function(t){return l(t)?e.apply(void 0,t):e(t)})))};n=e}return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i,o=this,s={context:o,subject:i,callbackFunc:t,scheduler:n};return new S((function(r){if(n){var a={args:e,subscriber:r,params:s};return n.schedule(Lt,0,a)}if(!i){i=new st;try{t.apply(o,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];i.next(t.length<=1?t[0]:t),i.complete()}]))}catch(t){g(i)?i.error(t):console.warn(t)}}return i.subscribe(r)}))}}function Lt(t){var e=this,n=t.args,r=t.subscriber,i=t.params,o=i.callbackFunc,s=i.context,a=i.scheduler,c=i.subject;if(!c){c=i.subject=new st;try{o.apply(s,n.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.length<=1?t[0]:t;e.add(a.schedule(It,0,{value:r,subject:c}))}]))}catch(t){c.error(t)}}this.add(c.subscribe(r))}function It(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function Ot(t,e,n){if(e){if(!Y(e))return function(){for(var r=[],i=0;i<arguments.length;i++)r[i]=arguments[i];return Ot(t,n).apply(void 0,r).pipe(Tt((function(t){return l(t)?e.apply(void 0,t):e(t)})))};n=e}return function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];var i={subject:void 0,args:e,callbackFunc:t,scheduler:n,context:this};return new S((function(r){var o=i.context,s=i.subject;if(n)return n.schedule(jt,0,{params:i,subscriber:r,context:o});if(!s){s=i.subject=new st;try{t.apply(o,e.concat([function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t.shift();n?s.error(n):(s.next(t.length<=1?t[0]:t),s.complete())}]))}catch(t){g(s)?s.error(t):console.warn(t)}}return s.subscribe(r)}))}}function jt(t){var e=this,n=t.params,r=t.subscriber,i=t.context,o=n.callbackFunc,s=n.args,a=n.scheduler,c=n.subject;if(!c){c=n.subject=new st;try{o.apply(i,s.concat([function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t.shift();if(r)e.add(a.schedule(Dt,0,{err:r,subject:c}));else{var i=t.length<=1?t[0]:t;e.add(a.schedule(Mt,0,{value:i,subject:c}))}}]))}catch(t){this.add(a.schedule(Dt,0,{err:t,subject:c}))}}this.add(c.subscribe(r))}function Mt(t){var e=t.value,n=t.subject;n.next(e),n.complete()}function Dt(t){var e=t.err;t.subject.error(e)}var Nt=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyError=function(t,e){this.destination.error(t)},e.prototype.notifyComplete=function(t){this.destination.complete()},e}(y),Rt=function(t){function e(e,n,r){var i=t.call(this)||this;return i.parent=e,i.outerValue=n,i.outerIndex=r,i.index=0,i}return i(e,t),e.prototype._next=function(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)},e.prototype._error=function(t){this.parent.notifyError(t,this),this.unsubscribe()},e.prototype._complete=function(){this.parent.notifyComplete(this),this.unsubscribe()},e}(y),Ht=function(t){return function(e){return t.then((function(t){e.closed||(e.next(t),e.complete())}),(function(t){return e.error(t)})).then(null,c),e}};function zt(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}var Vt=zt(),Gt=function(t){return function(e){for(var n=t[Vt]();;){var r=n.next();if(r.done){e.complete();break}if(e.next(r.value),e.closed)break}return"function"==typeof n.return&&e.add((function(){n.return&&n.return()})),e}},Ft=function(t){return function(e){var n=t[w]();if("function"!=typeof n.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return n.subscribe(e)}},Ut=function(t){return t&&"number"==typeof t.length&&"function"!=typeof t};function Bt(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}var $t=function(t){if(t instanceof S)return function(e){return t._isScalar?(e.next(t.value),void e.complete()):t.subscribe(e)};if(t&&"function"==typeof t[w])return Ft(t);if(Ut(t))return K(t);if(Bt(t))return Ht(t);if(t&&"function"==typeof t[Vt])return Gt(t);var e=p(t)?"an invalid object":"'"+t+"'";throw new TypeError("You provided "+e+" where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.")};function qt(t,e,n,r,i){if(void 0===i&&(i=new Rt(t,n,r)),!i.closed)return $t(e)(i)}var Yt={};function Wt(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=null,r=null;return Y(t[t.length-1])&&(r=t.pop()),"function"==typeof t[t.length-1]&&(n=t.pop()),1===t.length&&l(t[0])&&(t=t[0]),J(t,r).lift(new Kt(n))}var Kt=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new Jt(t,this.resultSelector))},t}(),Jt=function(t){function e(e,n){var r=t.call(this,e)||this;return r.resultSelector=n,r.active=0,r.values=[],r.observables=[],r}return i(e,t),e.prototype._next=function(t){this.values.push(Yt),this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(var n=0;n<e;n++){var r=t[n];this.add(qt(this,r,r,n))}}},e.prototype.notifyComplete=function(t){0==(this.active-=1)&&this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){var o=this.values,s=o[n],a=this.toRespond?s===Yt?--this.toRespond:this.toRespond:0;o[n]=e,0===a&&(this.resultSelector?this._tryResultSelector(o):this.destination.next(o.slice()))},e.prototype._tryResultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(Nt);function Qt(t,e){if(!e)return t instanceof S?t:new S($t(t));if(null!=t){if(function(t){return t&&"function"==typeof t[w]}(t))return function(t,e){return new S(e?function(n){var r=new f;return r.add(e.schedule((function(){var i=t[w]();r.add(i.subscribe({next:function(t){r.add(e.schedule((function(){return n.next(t)})))},error:function(t){r.add(e.schedule((function(){return n.error(t)})))},complete:function(){r.add(e.schedule((function(){return n.complete()})))}}))}))),r}:Ft(t))}(t,e);if(Bt(t))return function(t,e){return new S(e?function(n){var r=new f;return r.add(e.schedule((function(){return t.then((function(t){r.add(e.schedule((function(){n.next(t),r.add(e.schedule((function(){return n.complete()})))})))}),(function(t){r.add(e.schedule((function(){return n.error(t)})))}))}))),r}:Ht(t))}(t,e);if(Ut(t))return J(t,e);if(function(t){return t&&"function"==typeof t[Vt]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new S(e?function(n){var r,i=new f;return i.add((function(){r&&"function"==typeof r.return&&r.return()})),i.add(e.schedule((function(){r=t[Vt](),i.add(e.schedule((function(){if(!n.closed){var t,e;try{var i=r.next();t=i.value,e=i.done}catch(t){return void n.error(t)}e?n.complete():(n.next(t),this.schedule())}})))}))),i}:Gt(t))}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}var Xt=function(){function t(t,e){void 0===e&&(e=Number.POSITIVE_INFINITY),this.project=t,this.concurrent=e}return t.prototype.call=function(t,e){return e.subscribe(new Zt(t,this.project,this.concurrent))},t}(),Zt=function(t){function e(e,n,r){void 0===r&&(r=Number.POSITIVE_INFINITY);var i=t.call(this,e)||this;return i.project=n,i.concurrent=r,i.hasCompleted=!1,i.buffer=[],i.active=0,i.index=0,i}return i(e,t),e.prototype._next=function(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)},e.prototype._tryNext=function(t){var e,n=this.index++;try{e=this.project(t,n)}catch(t){return void this.destination.error(t)}this.active++,this._innerSub(e,t,n)},e.prototype._innerSub=function(t,e,n){var r=new Rt(this,void 0,void 0);this.destination.add(r),qt(this,t,e,n,r)},e.prototype._complete=function(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()},e.prototype.notifyNext=function(t,e,n,r,i){this.destination.next(e)},e.prototype.notifyComplete=function(t){var e=this.buffer;this.remove(t),this.active--,e.length>0?this._next(e.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()},e}(Nt);function te(t){return void 0===t&&(t=Number.POSITIVE_INFINITY),function t(e,n,r){return void 0===r&&(r=Number.POSITIVE_INFINITY),"function"==typeof n?function(i){return i.pipe(t((function(t,r){return Qt(e(t,r)).pipe(Tt((function(e,i){return n(t,e,r,i)})))}),r))}:("number"==typeof n&&(r=n),function(t){return t.lift(new Xt(e,r))})}(mt,t)}function ee(){return te(1)}function ne(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return ee()(X.apply(void 0,t))}function re(t){return new S((function(e){var n;try{n=t()}catch(t){return void e.error(t)}return(n?Qt(n):q()).subscribe(e)}))}function ie(){for(var t,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return"function"==typeof e[e.length-1]&&(t=e.pop()),1===e.length&&l(e[0])&&(e=e[0]),0===e.length?$:t?ie(e).pipe(Tt((function(e){return t.apply(void 0,e)}))):new S((function(t){return new oe(t,e)}))}var oe=function(t){function e(e,n){var r=t.call(this,e)||this;r.sources=n,r.completed=0,r.haveValues=0;var i=n.length;r.values=new Array(i);for(var o=0;o<i;o++){var s=qt(r,n[o],null,o);s&&r.add(s)}return r}return i(e,t),e.prototype.notifyNext=function(t,e,n,r,i){this.values[n]=e,i._hasValue||(i._hasValue=!0,this.haveValues++)},e.prototype.notifyComplete=function(t){var e=this.destination,n=this.haveValues,r=this.values,i=r.length;t._hasValue?(this.completed++,this.completed===i&&(n===i&&e.next(r),e.complete())):e.complete()},e}(Nt);Object.prototype.toString;function se(t,e,n,r){return o(n)&&(r=n,n=void 0),r?se(t,e,n).pipe(Tt((function(t){return l(t)?r.apply(void 0,t):r(t)}))):new S((function(r){!function t(e,n,r,i,o){var s;if(function(t){return t&&"function"==typeof t.addEventListener&&"function"==typeof t.removeEventListener}(e)){var a=e;e.addEventListener(n,r,o),s=function(){return a.removeEventListener(n,r,o)}}else if(function(t){return t&&"function"==typeof t.on&&"function"==typeof t.off}(e)){var c=e;e.on(n,r),s=function(){return c.off(n,r)}}else if(function(t){return t&&"function"==typeof t.addListener&&"function"==typeof t.removeListener}(e)){var u=e;e.addListener(n,r),s=function(){return u.removeListener(n,r)}}else{if(!e||!e.length)throw new TypeError("Invalid event target");for(var l=0,p=e.length;l<p;l++)t(e[l],n,r,i,o)}i.add(s)}(t,e,(function(t){arguments.length>1?r.next(Array.prototype.slice.call(arguments)):r.next(t)}),r,n)}))}function ae(t,e,n){return n?ae(t,e).pipe(Tt((function(t){return l(t)?n.apply(void 0,t):n(t)}))):new S((function(n){var r,i=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return n.next(1===t.length?t[0]:t)};try{r=t(i)}catch(t){return void n.error(t)}if(o(e))return function(){return e(i,r)}}))}function ce(t,e,n,r,i){var o,s;if(1==arguments.length){var a=t;s=a.initialState,e=a.condition,n=a.iterate,o=a.resultSelector||mt,i=a.scheduler}else void 0===r||Y(r)?(s=t,o=mt,i=r):(s=t,o=r);return new S((function(t){var r=s;if(i)return i.schedule(ue,0,{subscriber:t,iterate:n,condition:e,resultSelector:o,state:r});for(;;){if(e){var a=void 0;try{a=e(r)}catch(e){return void t.error(e)}if(!a){t.complete();break}}var c=void 0;try{c=o(r)}catch(e){return void t.error(e)}if(t.next(c),t.closed)break;try{r=n(r)}catch(e){return void t.error(e)}}}))}function ue(t){var e=t.subscriber,n=t.condition;if(!e.closed){if(t.needIterate)try{t.state=t.iterate(t.state)}catch(t){return void e.error(t)}else t.needIterate=!0;if(n){var r=void 0;try{r=n(t.state)}catch(t){return void e.error(t)}if(!r)return void e.complete();if(e.closed)return}var i;try{i=t.resultSelector(t.state)}catch(t){return void e.error(t)}if(!e.closed&&(e.next(i),!e.closed))return this.schedule(t)}}function le(t,e,n){return void 0===e&&(e=$),void 0===n&&(n=$),re((function(){return t()?e:n}))}function pe(t){return!l(t)&&t-parseFloat(t)+1>=0}function he(t,e){return void 0===t&&(t=0),void 0===e&&(e=dt),(!pe(t)||t<0)&&(t=0),e&&"function"==typeof e.schedule||(e=dt),new S((function(n){return n.add(e.schedule(de,t,{subscriber:n,counter:0,period:t})),n}))}function de(t){var e=t.subscriber,n=t.counter,r=t.period;e.next(n),this.schedule({subscriber:e,counter:n+1,period:r},r)}function fe(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=Number.POSITIVE_INFINITY,r=null,i=t[t.length-1];return Y(i)?(r=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(n=t.pop())):"number"==typeof i&&(n=t.pop()),null===r&&1===t.length&&t[0]instanceof S?t[0]:te(n)(J(t,r))}var be=new S(_);function ve(){return be}function ye(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(0===t.length)return $;var n=t[0],r=t.slice(1);return 1===t.length&&l(n)?ye.apply(void 0,n):new S((function(t){var e=function(){return t.add(ye.apply(void 0,r).subscribe(t))};return Qt(n).subscribe({next:function(e){t.next(e)},error:e,complete:e})}))}function me(t,e){return new S(e?function(n){var r=Object.keys(t),i=new f;return i.add(e.schedule(ge,0,{keys:r,index:0,subscriber:n,subscription:i,obj:t})),i}:function(e){for(var n=Object.keys(t),r=0;r<n.length&&!e.closed;r++){var i=n[r];t.hasOwnProperty(i)&&e.next([i,t[i]])}e.complete()})}function ge(t){var e=t.keys,n=t.index,r=t.subscriber,i=t.subscription,o=t.obj;if(!r.closed)if(n<e.length){var s=e[n];r.next([s,o[s]]),i.add(this.schedule({keys:e,index:n+1,subscriber:r,subscription:i,obj:o}))}else r.complete()}function we(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];if(1===t.length){if(!l(t[0]))return t[0];t=t[0]}return J(t,void 0).lift(new _e)}var _e=function(){function t(){}return t.prototype.call=function(t,e){return e.subscribe(new xe(t))},t}(),xe=function(t){function e(e){var n=t.call(this,e)||this;return n.hasFirst=!1,n.observables=[],n.subscriptions=[],n}return i(e,t),e.prototype._next=function(t){this.observables.push(t)},e.prototype._complete=function(){var t=this.observables,e=t.length;if(0===e)this.destination.complete();else{for(var n=0;n<e&&!this.hasFirst;n++){var r=t[n],i=qt(this,r,r,n);this.subscriptions&&this.subscriptions.push(i),this.add(i)}this.observables=null}},e.prototype.notifyNext=function(t,e,n,r,i){if(!this.hasFirst){this.hasFirst=!0;for(var o=0;o<this.subscriptions.length;o++)if(o!==n){var s=this.subscriptions[o];s.unsubscribe(),this.remove(s)}this.subscriptions=null}this.destination.next(e)},e}(Nt);function ke(t,e,n){return void 0===t&&(t=0),new S((function(r){void 0===e&&(e=t,t=0);var i=0,o=t;if(n)return n.schedule(Se,0,{index:i,count:e,start:t,subscriber:r});for(;;){if(i++>=e){r.complete();break}if(r.next(o++),r.closed)break}}))}function Se(t){var e=t.start,n=t.index,r=t.count,i=t.subscriber;n>=r?i.complete():(i.next(e),i.closed||(t.index=n+1,t.start=e+1,this.schedule(t)))}function Ee(t,e,n){void 0===t&&(t=0);var r=-1;return pe(e)?r=Number(e)<1?1:Number(e):Y(e)&&(n=e),Y(n)||(n=dt),new S((function(e){var i=pe(t)?t:+t-n.now();return n.schedule(Te,i,{index:0,period:r,subscriber:e})}))}function Te(t){var e=t.index,n=t.period,r=t.subscriber;if(r.next(e),!r.closed){if(-1===n)return r.complete();t.index=e+1,this.schedule(t,n)}}function Pe(t,e){return new S((function(n){var r,i;try{r=t()}catch(t){return void n.error(t)}try{i=e(r)}catch(t){return void n.error(t)}var o=(i?Qt(i):$).subscribe(n);return function(){o.unsubscribe(),r&&r.unsubscribe()}}))}function Ae(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];var n=t[t.length-1];return"function"==typeof n&&t.pop(),J(t,void 0).lift(new Ce(n))}var Ce=function(){function t(t){this.resultSelector=t}return t.prototype.call=function(t,e){return e.subscribe(new Le(t,this.resultSelector))},t}(),Le=function(t){function e(e,n,r){void 0===r&&(r=Object.create(null));var i=t.call(this,e)||this;return i.iterators=[],i.active=0,i.resultSelector="function"==typeof n?n:null,i.values=r,i}return i(e,t),e.prototype._next=function(t){var e=this.iterators;l(t)?e.push(new Oe(t)):"function"==typeof t[Vt]?e.push(new Ie(t[Vt]())):e.push(new je(this.destination,this,t))},e.prototype._complete=function(){var t=this.iterators,e=t.length;if(this.unsubscribe(),0!==e){this.active=e;for(var n=0;n<e;n++){var r=t[n];if(r.stillUnsubscribed)this.destination.add(r.subscribe(r,n));else this.active--}}else this.destination.complete()},e.prototype.notifyInactive=function(){this.active--,0===this.active&&this.destination.complete()},e.prototype.checkIterators=function(){for(var t=this.iterators,e=t.length,n=this.destination,r=0;r<e;r++){if("function"==typeof(s=t[r]).hasValue&&!s.hasValue())return}var i=!1,o=[];for(r=0;r<e;r++){var s,a=(s=t[r]).next();if(s.hasCompleted()&&(i=!0),a.done)return void n.complete();o.push(a.value)}this.resultSelector?this._tryresultSelector(o):n.next(o),i&&n.complete()},e.prototype._tryresultSelector=function(t){var e;try{e=this.resultSelector.apply(this,t)}catch(t){return void this.destination.error(t)}this.destination.next(e)},e}(y),Ie=function(){function t(t){this.iterator=t,this.nextResult=t.next()}return t.prototype.hasValue=function(){return!0},t.prototype.next=function(){var t=this.nextResult;return this.nextResult=this.iterator.next(),t},t.prototype.hasCompleted=function(){var t=this.nextResult;return t&&t.done},t}(),Oe=function(){function t(t){this.array=t,this.index=0,this.length=0,this.length=t.length}return t.prototype[Vt]=function(){return this},t.prototype.next=function(t){var e=this.index++,n=this.array;return e<this.length?{value:n[e],done:!1}:{value:null,done:!0}},t.prototype.hasValue=function(){return this.array.length>this.index},t.prototype.hasCompleted=function(){return this.array.length===this.index},t}(),je=function(t){function e(e,n,r){var i=t.call(this,e)||this;return i.parent=n,i.observable=r,i.stillUnsubscribed=!0,i.buffer=[],i.isComplete=!1,i}return i(e,t),e.prototype[Vt]=function(){return this},e.prototype.next=function(){var t=this.buffer;return 0===t.length&&this.isComplete?{value:null,done:!0}:{value:t.shift(),done:!1}},e.prototype.hasValue=function(){return this.buffer.length>0},e.prototype.hasCompleted=function(){return 0===this.buffer.length&&this.isComplete},e.prototype.notifyComplete=function(){this.buffer.length>0?(this.isComplete=!0,this.parent.notifyInactive()):this.destination.complete()},e.prototype.notifyNext=function(t,e,n,r,i){this.buffer.push(e),this.parent.checkIterators()},e.prototype.subscribe=function(t,e){return qt(this,this.observable,this,e)},e}(Nt);n.d(e,"Observable",(function(){return S})),n.d(e,"ConnectableObservable",(function(){return M})),n.d(e,"GroupedObservable",(function(){return R})),n.d(e,"observable",(function(){return w})),n.d(e,"Subject",(function(){return L})),n.d(e,"BehaviorSubject",(function(){return z})),n.d(e,"ReplaySubject",(function(){return it})),n.d(e,"AsyncSubject",(function(){return st})),n.d(e,"asapScheduler",(function(){return ht})),n.d(e,"asyncScheduler",(function(){return dt})),n.d(e,"queueScheduler",(function(){return B})),n.d(e,"animationFrameScheduler",(function(){return bt})),n.d(e,"VirtualTimeScheduler",(function(){return vt})),n.d(e,"VirtualAction",(function(){return yt})),n.d(e,"Scheduler",(function(){return F})),n.d(e,"Subscription",(function(){return f})),n.d(e,"Subscriber",(function(){return y})),n.d(e,"Notification",(function(){return et})),n.d(e,"pipe",(function(){return x})),n.d(e,"noop",(function(){return _})),n.d(e,"identity",(function(){return mt})),n.d(e,"isObservable",(function(){return gt})),n.d(e,"ArgumentOutOfRangeError",(function(){return _t})),n.d(e,"EmptyError",(function(){return kt})),n.d(e,"ObjectUnsubscribedError",(function(){return P})),n.d(e,"UnsubscriptionError",(function(){return d})),n.d(e,"TimeoutError",(function(){return Et})),n.d(e,"bindCallback",(function(){return Ct})),n.d(e,"bindNodeCallback",(function(){return Ot})),n.d(e,"combineLatest",(function(){return Wt})),n.d(e,"concat",(function(){return ne})),n.d(e,"defer",(function(){return re})),n.d(e,"empty",(function(){return q})),n.d(e,"forkJoin",(function(){return ie})),n.d(e,"from",(function(){return Qt})),n.d(e,"fromEvent",(function(){return se})),n.d(e,"fromEventPattern",(function(){return ae})),n.d(e,"generate",(function(){return ce})),n.d(e,"iif",(function(){return le})),n.d(e,"interval",(function(){return he})),n.d(e,"merge",(function(){return fe})),n.d(e,"never",(function(){return ve})),n.d(e,"of",(function(){return X})),n.d(e,"onErrorResumeNext",(function(){return ye})),n.d(e,"pairs",(function(){return me})),n.d(e,"race",(function(){return we})),n.d(e,"range",(function(){return ke})),n.d(e,"throwError",(function(){return Z})),n.d(e,"timer",(function(){return Ee})),n.d(e,"using",(function(){return Pe})),n.d(e,"zip",(function(){return Ae})),n.d(e,"EMPTY",(function(){return $})),n.d(e,"NEVER",(function(){return be})),n.d(e,"config",(function(){return a}))}]);